ARM GAS  /tmp/ccR5kwXz.s 			page 1


   1              		.cpu cortex-m7
   2              		.eabi_attribute 28, 1
   3              		.eabi_attribute 20, 1
   4              		.eabi_attribute 21, 1
   5              		.eabi_attribute 23, 3
   6              		.eabi_attribute 24, 1
   7              		.eabi_attribute 25, 1
   8              		.eabi_attribute 26, 1
   9              		.eabi_attribute 30, 6
  10              		.eabi_attribute 34, 1
  11              		.eabi_attribute 18, 4
  12              		.file	"stm32h747i_discovery_bus.c"
  13              		.text
  14              	.Ltext0:
  15              		.cfi_sections	.debug_frame
  16              		.section	.rodata.I2C_Charac,"a"
  17              		.align	2
  20              	I2C_Charac:
  21 0000 A0860100 		.word	100000
  22 0004 80380100 		.word	80000
  23 0008 C0D40100 		.word	120000
  24 000c 00000000 		.word	0
  25 0010 7A0D0000 		.word	3450
  26 0014 FA000000 		.word	250
  27 0018 5C120000 		.word	4700
  28 001c A00F0000 		.word	4000
  29 0020 80020000 		.word	640
  30 0024 14000000 		.word	20
  31 0028 00000000 		.word	0
  32 002c 801A0600 		.word	400000
  33 0030 00E20400 		.word	320000
  34 0034 00530700 		.word	480000
  35 0038 00000000 		.word	0
  36 003c 84030000 		.word	900
  37 0040 64000000 		.word	100
  38 0044 14050000 		.word	1300
  39 0048 58020000 		.word	600
  40 004c FA000000 		.word	250
  41 0050 64000000 		.word	100
  42 0054 00000000 		.word	0
  43 0058 40420F00 		.word	1000000
  44 005c 00350C00 		.word	800000
  45 0060 804F1200 		.word	1200000
  46 0064 00000000 		.word	0
  47 0068 C2010000 		.word	450
  48 006c 32000000 		.word	50
  49 0070 F4010000 		.word	500
  50 0074 04010000 		.word	260
  51 0078 3C000000 		.word	60
  52 007c 64000000 		.word	100
  53 0080 00000000 		.word	0
  54              		.section	.bss.I2c4InitCounter,"aw",%nobits
  55              		.align	2
  58              	I2c4InitCounter:
  59 0000 00000000 		.space	4
  60              		.section	.bss.I2c_valid_timing,"aw",%nobits
  61              		.align	2
ARM GAS  /tmp/ccR5kwXz.s 			page 2


  64              	I2c_valid_timing:
  65 0000 00000000 		.space	2560
  65      00000000 
  65      00000000 
  65      00000000 
  65      00000000 
  66              		.section	.bss.I2c_valid_timing_nbr,"aw",%nobits
  67              		.align	2
  70              	I2c_valid_timing_nbr:
  71 0000 00000000 		.space	4
  72              		.section	.bss.BspI2cSemaphore,"aw",%nobits
  73              		.align	2
  76              	BspI2cSemaphore:
  77 0000 00000000 		.space	4
  78              		.comm	hbus_i2c4,76,4
  79              		.section	.text.BSP_I2C4_Init,"ax",%progbits
  80              		.align	1
  81              		.global	BSP_I2C4_Init
  82              		.arch armv7e-m
  83              		.syntax unified
  84              		.thumb
  85              		.thumb_func
  86              		.fpu fpv5-d16
  88              	BSP_I2C4_Init:
  89              	.LFB331:
  90              		.file 1 "./BSP/ST/stm32h747i_discovery_bus.c"
   1:./BSP/ST/stm32h747i_discovery_bus.c **** /**
   2:./BSP/ST/stm32h747i_discovery_bus.c ****   ******************************************************************************
   3:./BSP/ST/stm32h747i_discovery_bus.c ****   * @file    stm32h747i_discovery_bus.c
   4:./BSP/ST/stm32h747i_discovery_bus.c ****   * @author  MCD Application Team
   5:./BSP/ST/stm32h747i_discovery_bus.c ****   * @brief   This file provides a set of firmware functions to communicate
   6:./BSP/ST/stm32h747i_discovery_bus.c ****   *          with  external devices available on STM32H747I-DISCO board (MB1248) from
   7:./BSP/ST/stm32h747i_discovery_bus.c ****   *          STMicroelectronics
   8:./BSP/ST/stm32h747i_discovery_bus.c ****   ******************************************************************************
   9:./BSP/ST/stm32h747i_discovery_bus.c ****   * @attention
  10:./BSP/ST/stm32h747i_discovery_bus.c ****   *
  11:./BSP/ST/stm32h747i_discovery_bus.c ****   * <h2><center>&copy; Copyright (c) 2019 STMicroelectronics.
  12:./BSP/ST/stm32h747i_discovery_bus.c ****   * All rights reserved.</center></h2>
  13:./BSP/ST/stm32h747i_discovery_bus.c ****   *
  14:./BSP/ST/stm32h747i_discovery_bus.c ****   * This software component is licensed by ST under BSD 3-Clause license,
  15:./BSP/ST/stm32h747i_discovery_bus.c ****   * the "License"; You may not use this file except in compliance with the
  16:./BSP/ST/stm32h747i_discovery_bus.c ****   * License. You may obtain a copy of the License at:
  17:./BSP/ST/stm32h747i_discovery_bus.c ****   *                        opensource.org/licenses/BSD-3-Clause
  18:./BSP/ST/stm32h747i_discovery_bus.c ****   *
  19:./BSP/ST/stm32h747i_discovery_bus.c ****   ******************************************************************************
  20:./BSP/ST/stm32h747i_discovery_bus.c ****   */
  21:./BSP/ST/stm32h747i_discovery_bus.c **** 
  22:./BSP/ST/stm32h747i_discovery_bus.c **** /* Includes ------------------------------------------------------------------*/
  23:./BSP/ST/stm32h747i_discovery_bus.c **** #include "stm32h747i_discovery_bus.h"
  24:./BSP/ST/stm32h747i_discovery_bus.c **** #include "stm32h747i_discovery_errno.h"
  25:./BSP/ST/stm32h747i_discovery_bus.c **** 
  26:./BSP/ST/stm32h747i_discovery_bus.c **** /** @addtogroup BSP
  27:./BSP/ST/stm32h747i_discovery_bus.c ****   * @{
  28:./BSP/ST/stm32h747i_discovery_bus.c ****   */
  29:./BSP/ST/stm32h747i_discovery_bus.c **** 
  30:./BSP/ST/stm32h747i_discovery_bus.c **** /** @addtogroup STM32H747I_DISCO
  31:./BSP/ST/stm32h747i_discovery_bus.c ****   * @{
ARM GAS  /tmp/ccR5kwXz.s 			page 3


  32:./BSP/ST/stm32h747i_discovery_bus.c ****   */
  33:./BSP/ST/stm32h747i_discovery_bus.c **** 
  34:./BSP/ST/stm32h747i_discovery_bus.c **** /** @defgroup STM32H747I_DISCO_BUS BUS
  35:./BSP/ST/stm32h747i_discovery_bus.c ****   * @{
  36:./BSP/ST/stm32h747i_discovery_bus.c ****   */
  37:./BSP/ST/stm32h747i_discovery_bus.c **** 
  38:./BSP/ST/stm32h747i_discovery_bus.c **** 
  39:./BSP/ST/stm32h747i_discovery_bus.c **** /** @defgroup STM32H747I_DISCO_BUS_Private_Constants Private Constants
  40:./BSP/ST/stm32h747i_discovery_bus.c ****   * @{
  41:./BSP/ST/stm32h747i_discovery_bus.c ****   */
  42:./BSP/ST/stm32h747i_discovery_bus.c **** #ifndef I2C_VALID_TIMING_NBR
  43:./BSP/ST/stm32h747i_discovery_bus.c ****   #define I2C_VALID_TIMING_NBR                 128U
  44:./BSP/ST/stm32h747i_discovery_bus.c **** #endif
  45:./BSP/ST/stm32h747i_discovery_bus.c **** #define I2C_SPEED_FREQ_STANDARD                0U    /* 100 kHz */
  46:./BSP/ST/stm32h747i_discovery_bus.c **** #define I2C_SPEED_FREQ_FAST                    1U    /* 400 kHz */
  47:./BSP/ST/stm32h747i_discovery_bus.c **** #define I2C_SPEED_FREQ_FAST_PLUS               2U    /* 1 MHz */
  48:./BSP/ST/stm32h747i_discovery_bus.c **** #define I2C_ANALOG_FILTER_DELAY_MIN            50U   /* ns */
  49:./BSP/ST/stm32h747i_discovery_bus.c **** #define I2C_ANALOG_FILTER_DELAY_MAX            260U  /* ns */
  50:./BSP/ST/stm32h747i_discovery_bus.c **** #define I2C_USE_ANALOG_FILTER                  1U
  51:./BSP/ST/stm32h747i_discovery_bus.c **** #define I2C_DIGITAL_FILTER_COEF                0U
  52:./BSP/ST/stm32h747i_discovery_bus.c **** #define I2C_PRESC_MAX                          16U
  53:./BSP/ST/stm32h747i_discovery_bus.c **** #define I2C_SCLDEL_MAX                         16U
  54:./BSP/ST/stm32h747i_discovery_bus.c **** #define I2C_SDADEL_MAX                         16U
  55:./BSP/ST/stm32h747i_discovery_bus.c **** #define I2C_SCLH_MAX                           256U
  56:./BSP/ST/stm32h747i_discovery_bus.c **** #define I2C_SCLL_MAX                           256U
  57:./BSP/ST/stm32h747i_discovery_bus.c **** #define SEC2NSEC                               1000000000UL
  58:./BSP/ST/stm32h747i_discovery_bus.c **** /**
  59:./BSP/ST/stm32h747i_discovery_bus.c ****   * @}
  60:./BSP/ST/stm32h747i_discovery_bus.c ****   */
  61:./BSP/ST/stm32h747i_discovery_bus.c **** 
  62:./BSP/ST/stm32h747i_discovery_bus.c **** /** @defgroup STM32H747I_DISCO_BUS_Private_Types Private Types
  63:./BSP/ST/stm32h747i_discovery_bus.c ****   * @{
  64:./BSP/ST/stm32h747i_discovery_bus.c ****   */
  65:./BSP/ST/stm32h747i_discovery_bus.c **** typedef struct
  66:./BSP/ST/stm32h747i_discovery_bus.c **** {
  67:./BSP/ST/stm32h747i_discovery_bus.c ****   uint32_t freq;       /* Frequency in Hz */
  68:./BSP/ST/stm32h747i_discovery_bus.c ****   uint32_t freq_min;   /* Minimum frequency in Hz */
  69:./BSP/ST/stm32h747i_discovery_bus.c ****   uint32_t freq_max;   /* Maximum frequency in Hz */
  70:./BSP/ST/stm32h747i_discovery_bus.c ****   uint32_t hddat_min;  /* Minimum data hold time in ns */
  71:./BSP/ST/stm32h747i_discovery_bus.c ****   uint32_t vddat_max;  /* Maximum data valid time in ns */
  72:./BSP/ST/stm32h747i_discovery_bus.c ****   uint32_t sudat_min;  /* Minimum data setup time in ns */
  73:./BSP/ST/stm32h747i_discovery_bus.c ****   uint32_t lscl_min;   /* Minimum low period of the SCL clock in ns */
  74:./BSP/ST/stm32h747i_discovery_bus.c ****   uint32_t hscl_min;   /* Minimum high period of SCL clock in ns */
  75:./BSP/ST/stm32h747i_discovery_bus.c ****   uint32_t trise;      /* Rise time in ns */
  76:./BSP/ST/stm32h747i_discovery_bus.c ****   uint32_t tfall;      /* Fall time in ns */
  77:./BSP/ST/stm32h747i_discovery_bus.c ****   uint32_t dnf;        /* Digital noise filter coefficient */
  78:./BSP/ST/stm32h747i_discovery_bus.c **** } I2C_Charac_t;
  79:./BSP/ST/stm32h747i_discovery_bus.c **** 
  80:./BSP/ST/stm32h747i_discovery_bus.c **** typedef struct
  81:./BSP/ST/stm32h747i_discovery_bus.c **** {
  82:./BSP/ST/stm32h747i_discovery_bus.c ****   uint32_t presc;      /* Timing prescaler */
  83:./BSP/ST/stm32h747i_discovery_bus.c ****   uint32_t tscldel;    /* SCL delay */
  84:./BSP/ST/stm32h747i_discovery_bus.c ****   uint32_t tsdadel;    /* SDA delay */
  85:./BSP/ST/stm32h747i_discovery_bus.c ****   uint32_t sclh;       /* SCL high period */
  86:./BSP/ST/stm32h747i_discovery_bus.c ****   uint32_t scll;       /* SCL low period */
  87:./BSP/ST/stm32h747i_discovery_bus.c **** } I2C_Timings_t;
  88:./BSP/ST/stm32h747i_discovery_bus.c **** /**
ARM GAS  /tmp/ccR5kwXz.s 			page 4


  89:./BSP/ST/stm32h747i_discovery_bus.c ****   * @}
  90:./BSP/ST/stm32h747i_discovery_bus.c ****   */
  91:./BSP/ST/stm32h747i_discovery_bus.c **** 
  92:./BSP/ST/stm32h747i_discovery_bus.c **** /** @addtogroup STM32H747I_DISCO_BUS_Private_Constants
  93:./BSP/ST/stm32h747i_discovery_bus.c ****   * @{
  94:./BSP/ST/stm32h747i_discovery_bus.c ****   */
  95:./BSP/ST/stm32h747i_discovery_bus.c **** static const I2C_Charac_t I2C_Charac[] =
  96:./BSP/ST/stm32h747i_discovery_bus.c **** {
  97:./BSP/ST/stm32h747i_discovery_bus.c ****   [I2C_SPEED_FREQ_STANDARD] =
  98:./BSP/ST/stm32h747i_discovery_bus.c ****   {
  99:./BSP/ST/stm32h747i_discovery_bus.c ****     .freq = 100000,
 100:./BSP/ST/stm32h747i_discovery_bus.c ****     .freq_min = 80000,
 101:./BSP/ST/stm32h747i_discovery_bus.c ****     .freq_max = 120000,
 102:./BSP/ST/stm32h747i_discovery_bus.c ****     .hddat_min = 0,
 103:./BSP/ST/stm32h747i_discovery_bus.c ****     .vddat_max = 3450,
 104:./BSP/ST/stm32h747i_discovery_bus.c ****     .sudat_min = 250,
 105:./BSP/ST/stm32h747i_discovery_bus.c ****     .lscl_min = 4700,
 106:./BSP/ST/stm32h747i_discovery_bus.c ****     .hscl_min = 4000,
 107:./BSP/ST/stm32h747i_discovery_bus.c ****     .trise = 640,
 108:./BSP/ST/stm32h747i_discovery_bus.c ****     .tfall = 20,
 109:./BSP/ST/stm32h747i_discovery_bus.c ****     .dnf = I2C_DIGITAL_FILTER_COEF,
 110:./BSP/ST/stm32h747i_discovery_bus.c ****   },
 111:./BSP/ST/stm32h747i_discovery_bus.c ****   [I2C_SPEED_FREQ_FAST] =
 112:./BSP/ST/stm32h747i_discovery_bus.c ****   {
 113:./BSP/ST/stm32h747i_discovery_bus.c ****     .freq = 400000,
 114:./BSP/ST/stm32h747i_discovery_bus.c ****     .freq_min = 320000,
 115:./BSP/ST/stm32h747i_discovery_bus.c ****     .freq_max = 480000,
 116:./BSP/ST/stm32h747i_discovery_bus.c ****     .hddat_min = 0,
 117:./BSP/ST/stm32h747i_discovery_bus.c ****     .vddat_max = 900,
 118:./BSP/ST/stm32h747i_discovery_bus.c ****     .sudat_min = 100,
 119:./BSP/ST/stm32h747i_discovery_bus.c ****     .lscl_min = 1300,
 120:./BSP/ST/stm32h747i_discovery_bus.c ****     .hscl_min = 600,
 121:./BSP/ST/stm32h747i_discovery_bus.c ****     .trise = 250,
 122:./BSP/ST/stm32h747i_discovery_bus.c ****     .tfall = 100,
 123:./BSP/ST/stm32h747i_discovery_bus.c ****     .dnf = I2C_DIGITAL_FILTER_COEF,
 124:./BSP/ST/stm32h747i_discovery_bus.c ****   },
 125:./BSP/ST/stm32h747i_discovery_bus.c ****   [I2C_SPEED_FREQ_FAST_PLUS] =
 126:./BSP/ST/stm32h747i_discovery_bus.c ****   {
 127:./BSP/ST/stm32h747i_discovery_bus.c ****     .freq = 1000000,
 128:./BSP/ST/stm32h747i_discovery_bus.c ****     .freq_min = 800000,
 129:./BSP/ST/stm32h747i_discovery_bus.c ****     .freq_max = 1200000,
 130:./BSP/ST/stm32h747i_discovery_bus.c ****     .hddat_min = 0,
 131:./BSP/ST/stm32h747i_discovery_bus.c ****     .vddat_max = 450,
 132:./BSP/ST/stm32h747i_discovery_bus.c ****     .sudat_min = 50,
 133:./BSP/ST/stm32h747i_discovery_bus.c ****     .lscl_min = 500,
 134:./BSP/ST/stm32h747i_discovery_bus.c ****     .hscl_min = 260,
 135:./BSP/ST/stm32h747i_discovery_bus.c ****     .trise = 60,
 136:./BSP/ST/stm32h747i_discovery_bus.c ****     .tfall = 100,
 137:./BSP/ST/stm32h747i_discovery_bus.c ****     .dnf = I2C_DIGITAL_FILTER_COEF,
 138:./BSP/ST/stm32h747i_discovery_bus.c ****   },
 139:./BSP/ST/stm32h747i_discovery_bus.c **** };
 140:./BSP/ST/stm32h747i_discovery_bus.c **** /**
 141:./BSP/ST/stm32h747i_discovery_bus.c ****   * @}
 142:./BSP/ST/stm32h747i_discovery_bus.c ****   */
 143:./BSP/ST/stm32h747i_discovery_bus.c **** 
 144:./BSP/ST/stm32h747i_discovery_bus.c **** /** @defgroup STM32H747I_DISCO_BUS_Private_Variables Private Variables
 145:./BSP/ST/stm32h747i_discovery_bus.c ****   * @{
ARM GAS  /tmp/ccR5kwXz.s 			page 5


 146:./BSP/ST/stm32h747i_discovery_bus.c ****   */
 147:./BSP/ST/stm32h747i_discovery_bus.c **** #if (USE_HAL_I2C_REGISTER_CALLBACKS == 1)
 148:./BSP/ST/stm32h747i_discovery_bus.c **** static uint32_t IsI2c4MspCbValid = 0;
 149:./BSP/ST/stm32h747i_discovery_bus.c **** #endif /* USE_HAL_I2C_REGISTER_CALLBACKS */
 150:./BSP/ST/stm32h747i_discovery_bus.c **** static uint32_t I2c4InitCounter = 0;
 151:./BSP/ST/stm32h747i_discovery_bus.c **** static I2C_Timings_t I2c_valid_timing[I2C_VALID_TIMING_NBR];
 152:./BSP/ST/stm32h747i_discovery_bus.c **** static uint32_t      I2c_valid_timing_nbr = 0;
 153:./BSP/ST/stm32h747i_discovery_bus.c **** #if defined(BSP_USE_CMSIS_OS)
 154:./BSP/ST/stm32h747i_discovery_bus.c **** static osSemaphoreId BspI2cSemaphore = 0;
 155:./BSP/ST/stm32h747i_discovery_bus.c **** #endif
 156:./BSP/ST/stm32h747i_discovery_bus.c **** /**
 157:./BSP/ST/stm32h747i_discovery_bus.c ****   * @}
 158:./BSP/ST/stm32h747i_discovery_bus.c ****   */
 159:./BSP/ST/stm32h747i_discovery_bus.c **** 
 160:./BSP/ST/stm32h747i_discovery_bus.c **** /** @defgroup STM32H747I_DISCO_BUS_Exported_Variables Exported Variables
 161:./BSP/ST/stm32h747i_discovery_bus.c ****   * @{
 162:./BSP/ST/stm32h747i_discovery_bus.c ****   */
 163:./BSP/ST/stm32h747i_discovery_bus.c **** I2C_HandleTypeDef hbus_i2c4;
 164:./BSP/ST/stm32h747i_discovery_bus.c **** /**
 165:./BSP/ST/stm32h747i_discovery_bus.c ****   * @}
 166:./BSP/ST/stm32h747i_discovery_bus.c ****   */
 167:./BSP/ST/stm32h747i_discovery_bus.c **** 
 168:./BSP/ST/stm32h747i_discovery_bus.c **** /** @defgroup STM32H747I_DISCO_BUS_Private_FunctionPrototypes Private FunctionPrototypes
 169:./BSP/ST/stm32h747i_discovery_bus.c ****   * @{
 170:./BSP/ST/stm32h747i_discovery_bus.c ****   */
 171:./BSP/ST/stm32h747i_discovery_bus.c **** static void I2C4_MspInit(I2C_HandleTypeDef *phi2c);
 172:./BSP/ST/stm32h747i_discovery_bus.c **** static void I2C4_MspDeInit(I2C_HandleTypeDef *phi2c);
 173:./BSP/ST/stm32h747i_discovery_bus.c **** static int32_t I2C4_WriteReg(uint16_t DevAddr, uint16_t MemAddSize, uint16_t Reg, uint8_t *pData, u
 174:./BSP/ST/stm32h747i_discovery_bus.c **** static int32_t I2C4_ReadReg(uint16_t DevAddr, uint16_t MemAddSize, uint16_t Reg, uint8_t *pData, ui
 175:./BSP/ST/stm32h747i_discovery_bus.c **** static uint32_t I2C_GetTiming(uint32_t clock_src_freq, uint32_t i2c_freq);
 176:./BSP/ST/stm32h747i_discovery_bus.c **** static uint32_t I2C_Compute_SCLL_SCLH(uint32_t clock_src_freq, uint32_t I2C_speed);
 177:./BSP/ST/stm32h747i_discovery_bus.c **** static void     I2C_Compute_PRESC_SCLDEL_SDADEL(uint32_t clock_src_freq, uint32_t I2C_speed);
 178:./BSP/ST/stm32h747i_discovery_bus.c **** /**
 179:./BSP/ST/stm32h747i_discovery_bus.c ****   * @}
 180:./BSP/ST/stm32h747i_discovery_bus.c ****   */
 181:./BSP/ST/stm32h747i_discovery_bus.c **** 
 182:./BSP/ST/stm32h747i_discovery_bus.c **** /** @defgroup STM32H747I_DISCO_BUS_Exported_Functions Exported Functions
 183:./BSP/ST/stm32h747i_discovery_bus.c ****   * @{
 184:./BSP/ST/stm32h747i_discovery_bus.c ****   */
 185:./BSP/ST/stm32h747i_discovery_bus.c **** 
 186:./BSP/ST/stm32h747i_discovery_bus.c **** /**
 187:./BSP/ST/stm32h747i_discovery_bus.c ****   * @brief  Initializes I2C HAL.
 188:./BSP/ST/stm32h747i_discovery_bus.c ****   * @retval BSP status
 189:./BSP/ST/stm32h747i_discovery_bus.c ****   */
 190:./BSP/ST/stm32h747i_discovery_bus.c **** int32_t BSP_I2C4_Init(void)
 191:./BSP/ST/stm32h747i_discovery_bus.c **** {
  91              		.loc 1 191 1
  92              		.cfi_startproc
  93              		@ args = 0, pretend = 0, frame = 8
  94              		@ frame_needed = 1, uses_anonymous_args = 0
  95 0000 80B5     		push	{r7, lr}
  96              	.LCFI0:
  97              		.cfi_def_cfa_offset 8
  98              		.cfi_offset 7, -8
  99              		.cfi_offset 14, -4
 100 0002 82B0     		sub	sp, sp, #8
 101              	.LCFI1:
ARM GAS  /tmp/ccR5kwXz.s 			page 6


 102              		.cfi_def_cfa_offset 16
 103 0004 00AF     		add	r7, sp, #0
 104              	.LCFI2:
 105              		.cfi_def_cfa_register 7
 192:./BSP/ST/stm32h747i_discovery_bus.c ****   int32_t ret = BSP_ERROR_NONE;
 106              		.loc 1 192 11
 107 0006 0023     		movs	r3, #0
 108 0008 7B60     		str	r3, [r7, #4]
 193:./BSP/ST/stm32h747i_discovery_bus.c **** 
 194:./BSP/ST/stm32h747i_discovery_bus.c ****   hbus_i2c4.Instance = BUS_I2C4;
 109              		.loc 1 194 22
 110 000a 1D4B     		ldr	r3, .L5
 111 000c 1D4A     		ldr	r2, .L5+4
 112 000e 1A60     		str	r2, [r3]
 195:./BSP/ST/stm32h747i_discovery_bus.c **** 
 196:./BSP/ST/stm32h747i_discovery_bus.c ****   if (I2c4InitCounter == 0U)
 113              		.loc 1 196 23
 114 0010 1D4B     		ldr	r3, .L5+8
 115 0012 1B68     		ldr	r3, [r3]
 116              		.loc 1 196 6
 117 0014 002B     		cmp	r3, #0
 118 0016 2DD1     		bne	.L2
 197:./BSP/ST/stm32h747i_discovery_bus.c ****   {
 198:./BSP/ST/stm32h747i_discovery_bus.c ****     I2c4InitCounter++;
 119              		.loc 1 198 20
 120 0018 1B4B     		ldr	r3, .L5+8
 121 001a 1B68     		ldr	r3, [r3]
 122 001c 0133     		adds	r3, r3, #1
 123 001e 1A4A     		ldr	r2, .L5+8
 124 0020 1360     		str	r3, [r2]
 199:./BSP/ST/stm32h747i_discovery_bus.c **** 
 200:./BSP/ST/stm32h747i_discovery_bus.c ****     if (HAL_I2C_GetState(&hbus_i2c4) == HAL_I2C_STATE_RESET)
 125              		.loc 1 200 9
 126 0022 1748     		ldr	r0, .L5
 127 0024 FFF7FEFF 		bl	HAL_I2C_GetState
 128 0028 0346     		mov	r3, r0
 129              		.loc 1 200 8
 130 002a 002B     		cmp	r3, #0
 131 002c 22D1     		bne	.L2
 201:./BSP/ST/stm32h747i_discovery_bus.c ****     {
 202:./BSP/ST/stm32h747i_discovery_bus.c **** #if defined(BSP_USE_CMSIS_OS)
 203:./BSP/ST/stm32h747i_discovery_bus.c ****       if(BspI2cSemaphore == NULL)
 132              		.loc 1 203 26
 133 002e 174B     		ldr	r3, .L5+12
 134 0030 1B68     		ldr	r3, [r3]
 135              		.loc 1 203 9
 136 0032 002B     		cmp	r3, #0
 137 0034 09D1     		bne	.L3
 138              	.LBB2:
 204:./BSP/ST/stm32h747i_discovery_bus.c ****       {
 205:./BSP/ST/stm32h747i_discovery_bus.c ****         /* Create semaphore to prevent multiple I2C access */
 206:./BSP/ST/stm32h747i_discovery_bus.c ****         osSemaphoreDef(BSP_I2C_SEM);
 139              		.loc 1 206 9
 140 0036 0023     		movs	r3, #0
 141 0038 3B60     		str	r3, [r7]
 207:./BSP/ST/stm32h747i_discovery_bus.c ****         BspI2cSemaphore = osSemaphoreCreate(osSemaphore(BSP_I2C_SEM), 1);
 142              		.loc 1 207 27
ARM GAS  /tmp/ccR5kwXz.s 			page 7


 143 003a 3B46     		mov	r3, r7
 144 003c 0121     		movs	r1, #1
 145 003e 1846     		mov	r0, r3
 146 0040 FFF7FEFF 		bl	osSemaphoreCreate
 147 0044 0346     		mov	r3, r0
 148              		.loc 1 207 25
 149 0046 114A     		ldr	r2, .L5+12
 150 0048 1360     		str	r3, [r2]
 151              	.L3:
 152              	.LBE2:
 208:./BSP/ST/stm32h747i_discovery_bus.c ****       }
 209:./BSP/ST/stm32h747i_discovery_bus.c **** #endif
 210:./BSP/ST/stm32h747i_discovery_bus.c **** #if (USE_HAL_I2C_REGISTER_CALLBACKS == 0)
 211:./BSP/ST/stm32h747i_discovery_bus.c ****       /* Init the I2C4 Msp */
 212:./BSP/ST/stm32h747i_discovery_bus.c ****       I2C4_MspInit(&hbus_i2c4);
 153              		.loc 1 212 7
 154 004a 0D48     		ldr	r0, .L5
 155 004c FFF7FEFF 		bl	I2C4_MspInit
 213:./BSP/ST/stm32h747i_discovery_bus.c **** #else
 214:./BSP/ST/stm32h747i_discovery_bus.c ****       if (IsI2c4MspCbValid == 0U)
 215:./BSP/ST/stm32h747i_discovery_bus.c ****       {
 216:./BSP/ST/stm32h747i_discovery_bus.c ****         if (BSP_I2C4_RegisterDefaultMspCallbacks() != BSP_ERROR_NONE)
 217:./BSP/ST/stm32h747i_discovery_bus.c ****         {
 218:./BSP/ST/stm32h747i_discovery_bus.c ****           ret = BSP_ERROR_MSP_FAILURE;
 219:./BSP/ST/stm32h747i_discovery_bus.c ****         }
 220:./BSP/ST/stm32h747i_discovery_bus.c ****       }
 221:./BSP/ST/stm32h747i_discovery_bus.c ****       if (ret == BSP_ERROR_NONE)
 222:./BSP/ST/stm32h747i_discovery_bus.c ****       {
 223:./BSP/ST/stm32h747i_discovery_bus.c **** #endif
 224:./BSP/ST/stm32h747i_discovery_bus.c ****         if (MX_I2C4_Init(&hbus_i2c4, I2C_GetTiming(HAL_RCC_GetPCLK2Freq(), BUS_I2C4_FREQUENCY)) != 
 156              		.loc 1 224 13
 157 0050 FFF7FEFF 		bl	HAL_RCC_GetPCLK2Freq
 158 0054 0346     		mov	r3, r0
 159 0056 0E49     		ldr	r1, .L5+16
 160 0058 1846     		mov	r0, r3
 161 005a FFF7FEFF 		bl	I2C_GetTiming
 162 005e 0346     		mov	r3, r0
 163 0060 1946     		mov	r1, r3
 164 0062 0748     		ldr	r0, .L5
 165 0064 FFF7FEFF 		bl	MX_I2C4_Init
 166 0068 0346     		mov	r3, r0
 167              		.loc 1 224 12
 168 006a 002B     		cmp	r3, #0
 169 006c 02D0     		beq	.L2
 225:./BSP/ST/stm32h747i_discovery_bus.c ****         {
 226:./BSP/ST/stm32h747i_discovery_bus.c ****           ret = BSP_ERROR_BUS_FAILURE;
 170              		.loc 1 226 15
 171 006e 6FF00703 		mvn	r3, #7
 172 0072 7B60     		str	r3, [r7, #4]
 173              	.L2:
 227:./BSP/ST/stm32h747i_discovery_bus.c ****         }
 228:./BSP/ST/stm32h747i_discovery_bus.c **** #if (USE_HAL_I2C_REGISTER_CALLBACKS == 1)
 229:./BSP/ST/stm32h747i_discovery_bus.c ****       }
 230:./BSP/ST/stm32h747i_discovery_bus.c **** #endif
 231:./BSP/ST/stm32h747i_discovery_bus.c ****     }
 232:./BSP/ST/stm32h747i_discovery_bus.c ****   }
 233:./BSP/ST/stm32h747i_discovery_bus.c **** 
ARM GAS  /tmp/ccR5kwXz.s 			page 8


 234:./BSP/ST/stm32h747i_discovery_bus.c ****   return ret;
 174              		.loc 1 234 10
 175 0074 7B68     		ldr	r3, [r7, #4]
 235:./BSP/ST/stm32h747i_discovery_bus.c **** }
 176              		.loc 1 235 1
 177 0076 1846     		mov	r0, r3
 178 0078 0837     		adds	r7, r7, #8
 179              	.LCFI3:
 180              		.cfi_def_cfa_offset 8
 181 007a BD46     		mov	sp, r7
 182              	.LCFI4:
 183              		.cfi_def_cfa_register 13
 184              		@ sp needed
 185 007c 80BD     		pop	{r7, pc}
 186              	.L6:
 187 007e 00BF     		.align	2
 188              	.L5:
 189 0080 00000000 		.word	hbus_i2c4
 190 0084 001C0058 		.word	1476402176
 191 0088 00000000 		.word	I2c4InitCounter
 192 008c 00000000 		.word	BspI2cSemaphore
 193 0090 A0860100 		.word	100000
 194              		.cfi_endproc
 195              	.LFE331:
 197              		.section	.text.BSP_I2C4_DeInit,"ax",%progbits
 198              		.align	1
 199              		.global	BSP_I2C4_DeInit
 200              		.syntax unified
 201              		.thumb
 202              		.thumb_func
 203              		.fpu fpv5-d16
 205              	BSP_I2C4_DeInit:
 206              	.LFB332:
 236:./BSP/ST/stm32h747i_discovery_bus.c **** 
 237:./BSP/ST/stm32h747i_discovery_bus.c **** /**
 238:./BSP/ST/stm32h747i_discovery_bus.c ****   * @brief  DeInitializes I2C HAL.
 239:./BSP/ST/stm32h747i_discovery_bus.c ****   * @retval BSP status
 240:./BSP/ST/stm32h747i_discovery_bus.c ****   */
 241:./BSP/ST/stm32h747i_discovery_bus.c **** int32_t BSP_I2C4_DeInit(void)
 242:./BSP/ST/stm32h747i_discovery_bus.c **** {
 207              		.loc 1 242 1
 208              		.cfi_startproc
 209              		@ args = 0, pretend = 0, frame = 8
 210              		@ frame_needed = 1, uses_anonymous_args = 0
 211 0000 80B5     		push	{r7, lr}
 212              	.LCFI5:
 213              		.cfi_def_cfa_offset 8
 214              		.cfi_offset 7, -8
 215              		.cfi_offset 14, -4
 216 0002 82B0     		sub	sp, sp, #8
 217              	.LCFI6:
 218              		.cfi_def_cfa_offset 16
 219 0004 00AF     		add	r7, sp, #0
 220              	.LCFI7:
 221              		.cfi_def_cfa_register 7
 243:./BSP/ST/stm32h747i_discovery_bus.c ****   int32_t ret  = BSP_ERROR_NONE;
 222              		.loc 1 243 11
ARM GAS  /tmp/ccR5kwXz.s 			page 9


 223 0006 0023     		movs	r3, #0
 224 0008 7B60     		str	r3, [r7, #4]
 244:./BSP/ST/stm32h747i_discovery_bus.c **** 
 245:./BSP/ST/stm32h747i_discovery_bus.c ****   I2c4InitCounter--;
 225              		.loc 1 245 18
 226 000a 0D4B     		ldr	r3, .L10
 227 000c 1B68     		ldr	r3, [r3]
 228 000e 013B     		subs	r3, r3, #1
 229 0010 0B4A     		ldr	r2, .L10
 230 0012 1360     		str	r3, [r2]
 246:./BSP/ST/stm32h747i_discovery_bus.c ****   if (I2c4InitCounter == 0U)
 231              		.loc 1 246 23
 232 0014 0A4B     		ldr	r3, .L10
 233 0016 1B68     		ldr	r3, [r3]
 234              		.loc 1 246 6
 235 0018 002B     		cmp	r3, #0
 236 001a 0BD1     		bne	.L8
 247:./BSP/ST/stm32h747i_discovery_bus.c ****   {
 248:./BSP/ST/stm32h747i_discovery_bus.c **** #if (USE_HAL_I2C_REGISTER_CALLBACKS == 0)
 249:./BSP/ST/stm32h747i_discovery_bus.c ****     I2C4_MspDeInit(&hbus_i2c4);
 237              		.loc 1 249 5
 238 001c 0948     		ldr	r0, .L10+4
 239 001e FFF7FEFF 		bl	I2C4_MspDeInit
 250:./BSP/ST/stm32h747i_discovery_bus.c **** #endif /* (USE_HAL_I2C_REGISTER_CALLBACKS == 0) */
 251:./BSP/ST/stm32h747i_discovery_bus.c **** 
 252:./BSP/ST/stm32h747i_discovery_bus.c ****     /* Init the I2C */
 253:./BSP/ST/stm32h747i_discovery_bus.c ****     if (HAL_I2C_DeInit(&hbus_i2c4) != HAL_OK)
 240              		.loc 1 253 9
 241 0022 0848     		ldr	r0, .L10+4
 242 0024 FFF7FEFF 		bl	HAL_I2C_DeInit
 243 0028 0346     		mov	r3, r0
 244              		.loc 1 253 8
 245 002a 002B     		cmp	r3, #0
 246 002c 02D0     		beq	.L8
 254:./BSP/ST/stm32h747i_discovery_bus.c ****     {
 255:./BSP/ST/stm32h747i_discovery_bus.c ****       ret = BSP_ERROR_BUS_FAILURE;
 247              		.loc 1 255 11
 248 002e 6FF00703 		mvn	r3, #7
 249 0032 7B60     		str	r3, [r7, #4]
 250              	.L8:
 256:./BSP/ST/stm32h747i_discovery_bus.c ****     }
 257:./BSP/ST/stm32h747i_discovery_bus.c ****   }
 258:./BSP/ST/stm32h747i_discovery_bus.c **** 
 259:./BSP/ST/stm32h747i_discovery_bus.c ****   return ret;
 251              		.loc 1 259 10
 252 0034 7B68     		ldr	r3, [r7, #4]
 260:./BSP/ST/stm32h747i_discovery_bus.c **** }
 253              		.loc 1 260 1
 254 0036 1846     		mov	r0, r3
 255 0038 0837     		adds	r7, r7, #8
 256              	.LCFI8:
 257              		.cfi_def_cfa_offset 8
 258 003a BD46     		mov	sp, r7
 259              	.LCFI9:
 260              		.cfi_def_cfa_register 13
 261              		@ sp needed
 262 003c 80BD     		pop	{r7, pc}
ARM GAS  /tmp/ccR5kwXz.s 			page 10


 263              	.L11:
 264 003e 00BF     		.align	2
 265              	.L10:
 266 0040 00000000 		.word	I2c4InitCounter
 267 0044 00000000 		.word	hbus_i2c4
 268              		.cfi_endproc
 269              	.LFE332:
 271              		.section	.text.MX_I2C4_Init,"ax",%progbits
 272              		.align	1
 273              		.weak	MX_I2C4_Init
 274              		.syntax unified
 275              		.thumb
 276              		.thumb_func
 277              		.fpu fpv5-d16
 279              	MX_I2C4_Init:
 280              	.LFB333:
 261:./BSP/ST/stm32h747i_discovery_bus.c **** 
 262:./BSP/ST/stm32h747i_discovery_bus.c **** /**
 263:./BSP/ST/stm32h747i_discovery_bus.c ****   * @brief  MX I2C4 initialization.
 264:./BSP/ST/stm32h747i_discovery_bus.c ****   * @param  hI2c I2C handle
 265:./BSP/ST/stm32h747i_discovery_bus.c ****   * @param  timing I2C timing
 266:./BSP/ST/stm32h747i_discovery_bus.c ****   * @retval HAL status
 267:./BSP/ST/stm32h747i_discovery_bus.c ****   */
 268:./BSP/ST/stm32h747i_discovery_bus.c **** __weak HAL_StatusTypeDef MX_I2C4_Init(I2C_HandleTypeDef *hI2c, uint32_t timing)
 269:./BSP/ST/stm32h747i_discovery_bus.c **** {
 281              		.loc 1 269 1
 282              		.cfi_startproc
 283              		@ args = 0, pretend = 0, frame = 16
 284              		@ frame_needed = 1, uses_anonymous_args = 0
 285 0000 80B5     		push	{r7, lr}
 286              	.LCFI10:
 287              		.cfi_def_cfa_offset 8
 288              		.cfi_offset 7, -8
 289              		.cfi_offset 14, -4
 290 0002 84B0     		sub	sp, sp, #16
 291              	.LCFI11:
 292              		.cfi_def_cfa_offset 24
 293 0004 00AF     		add	r7, sp, #0
 294              	.LCFI12:
 295              		.cfi_def_cfa_register 7
 296 0006 7860     		str	r0, [r7, #4]
 297 0008 3960     		str	r1, [r7]
 270:./BSP/ST/stm32h747i_discovery_bus.c ****   HAL_StatusTypeDef status = HAL_OK;
 298              		.loc 1 270 21
 299 000a 0023     		movs	r3, #0
 300 000c FB73     		strb	r3, [r7, #15]
 271:./BSP/ST/stm32h747i_discovery_bus.c **** 
 272:./BSP/ST/stm32h747i_discovery_bus.c ****   hI2c->Init.Timing           = timing;
 301              		.loc 1 272 31
 302 000e 7B68     		ldr	r3, [r7, #4]
 303 0010 3A68     		ldr	r2, [r7]
 304 0012 5A60     		str	r2, [r3, #4]
 273:./BSP/ST/stm32h747i_discovery_bus.c ****   hI2c->Init.OwnAddress1      = 0;
 305              		.loc 1 273 31
 306 0014 7B68     		ldr	r3, [r7, #4]
 307 0016 0022     		movs	r2, #0
 308 0018 9A60     		str	r2, [r3, #8]
ARM GAS  /tmp/ccR5kwXz.s 			page 11


 274:./BSP/ST/stm32h747i_discovery_bus.c ****   hI2c->Init.AddressingMode   = I2C_ADDRESSINGMODE_7BIT;
 309              		.loc 1 274 31
 310 001a 7B68     		ldr	r3, [r7, #4]
 311 001c 0122     		movs	r2, #1
 312 001e DA60     		str	r2, [r3, #12]
 275:./BSP/ST/stm32h747i_discovery_bus.c ****   hI2c->Init.DualAddressMode  = I2C_DUALADDRESS_DISABLE;
 313              		.loc 1 275 31
 314 0020 7B68     		ldr	r3, [r7, #4]
 315 0022 0022     		movs	r2, #0
 316 0024 1A61     		str	r2, [r3, #16]
 276:./BSP/ST/stm32h747i_discovery_bus.c ****   hI2c->Init.OwnAddress2      = 0;
 317              		.loc 1 276 31
 318 0026 7B68     		ldr	r3, [r7, #4]
 319 0028 0022     		movs	r2, #0
 320 002a 5A61     		str	r2, [r3, #20]
 277:./BSP/ST/stm32h747i_discovery_bus.c ****   hI2c->Init.OwnAddress2Masks = I2C_OA2_NOMASK;
 321              		.loc 1 277 31
 322 002c 7B68     		ldr	r3, [r7, #4]
 323 002e 0022     		movs	r2, #0
 324 0030 9A61     		str	r2, [r3, #24]
 278:./BSP/ST/stm32h747i_discovery_bus.c ****   hI2c->Init.GeneralCallMode  = I2C_GENERALCALL_DISABLE;
 325              		.loc 1 278 31
 326 0032 7B68     		ldr	r3, [r7, #4]
 327 0034 0022     		movs	r2, #0
 328 0036 DA61     		str	r2, [r3, #28]
 279:./BSP/ST/stm32h747i_discovery_bus.c ****   hI2c->Init.NoStretchMode    = I2C_NOSTRETCH_DISABLE;
 329              		.loc 1 279 31
 330 0038 7B68     		ldr	r3, [r7, #4]
 331 003a 0022     		movs	r2, #0
 332 003c 1A62     		str	r2, [r3, #32]
 280:./BSP/ST/stm32h747i_discovery_bus.c **** 
 281:./BSP/ST/stm32h747i_discovery_bus.c ****   if (HAL_I2C_Init(hI2c) != HAL_OK)
 333              		.loc 1 281 7
 334 003e 7868     		ldr	r0, [r7, #4]
 335 0040 FFF7FEFF 		bl	HAL_I2C_Init
 336 0044 0346     		mov	r3, r0
 337              		.loc 1 281 6
 338 0046 002B     		cmp	r3, #0
 339 0048 02D0     		beq	.L13
 282:./BSP/ST/stm32h747i_discovery_bus.c ****   {
 283:./BSP/ST/stm32h747i_discovery_bus.c ****     status = HAL_ERROR;
 340              		.loc 1 283 12
 341 004a 0123     		movs	r3, #1
 342 004c FB73     		strb	r3, [r7, #15]
 343 004e 14E0     		b	.L14
 344              	.L13:
 345              	.LBB3:
 284:./BSP/ST/stm32h747i_discovery_bus.c ****   }
 285:./BSP/ST/stm32h747i_discovery_bus.c ****   else
 286:./BSP/ST/stm32h747i_discovery_bus.c ****   {
 287:./BSP/ST/stm32h747i_discovery_bus.c ****     uint32_t analog_filter;
 288:./BSP/ST/stm32h747i_discovery_bus.c **** 
 289:./BSP/ST/stm32h747i_discovery_bus.c ****     analog_filter = I2C_ANALOGFILTER_ENABLE;
 346              		.loc 1 289 19
 347 0050 0023     		movs	r3, #0
 348 0052 BB60     		str	r3, [r7, #8]
 290:./BSP/ST/stm32h747i_discovery_bus.c ****     if (HAL_I2CEx_ConfigAnalogFilter(hI2c, analog_filter) != HAL_OK)
ARM GAS  /tmp/ccR5kwXz.s 			page 12


 349              		.loc 1 290 9
 350 0054 B968     		ldr	r1, [r7, #8]
 351 0056 7868     		ldr	r0, [r7, #4]
 352 0058 FFF7FEFF 		bl	HAL_I2CEx_ConfigAnalogFilter
 353 005c 0346     		mov	r3, r0
 354              		.loc 1 290 8
 355 005e 002B     		cmp	r3, #0
 356 0060 02D0     		beq	.L15
 291:./BSP/ST/stm32h747i_discovery_bus.c ****     {
 292:./BSP/ST/stm32h747i_discovery_bus.c ****       status = HAL_ERROR;
 357              		.loc 1 292 14
 358 0062 0123     		movs	r3, #1
 359 0064 FB73     		strb	r3, [r7, #15]
 360 0066 08E0     		b	.L14
 361              	.L15:
 293:./BSP/ST/stm32h747i_discovery_bus.c ****     }
 294:./BSP/ST/stm32h747i_discovery_bus.c ****     else
 295:./BSP/ST/stm32h747i_discovery_bus.c ****     {
 296:./BSP/ST/stm32h747i_discovery_bus.c ****       if (HAL_I2CEx_ConfigDigitalFilter(hI2c, I2C_DIGITAL_FILTER_COEF) != HAL_OK)
 362              		.loc 1 296 11
 363 0068 0021     		movs	r1, #0
 364 006a 7868     		ldr	r0, [r7, #4]
 365 006c FFF7FEFF 		bl	HAL_I2CEx_ConfigDigitalFilter
 366 0070 0346     		mov	r3, r0
 367              		.loc 1 296 10
 368 0072 002B     		cmp	r3, #0
 369 0074 01D0     		beq	.L14
 297:./BSP/ST/stm32h747i_discovery_bus.c ****       {
 298:./BSP/ST/stm32h747i_discovery_bus.c ****         status = HAL_ERROR;
 370              		.loc 1 298 16
 371 0076 0123     		movs	r3, #1
 372 0078 FB73     		strb	r3, [r7, #15]
 373              	.L14:
 374              	.LBE3:
 299:./BSP/ST/stm32h747i_discovery_bus.c ****       }
 300:./BSP/ST/stm32h747i_discovery_bus.c ****     }
 301:./BSP/ST/stm32h747i_discovery_bus.c ****   }
 302:./BSP/ST/stm32h747i_discovery_bus.c **** 
 303:./BSP/ST/stm32h747i_discovery_bus.c ****   return status;
 375              		.loc 1 303 10
 376 007a FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 304:./BSP/ST/stm32h747i_discovery_bus.c **** }
 377              		.loc 1 304 1
 378 007c 1846     		mov	r0, r3
 379 007e 1037     		adds	r7, r7, #16
 380              	.LCFI13:
 381              		.cfi_def_cfa_offset 8
 382 0080 BD46     		mov	sp, r7
 383              	.LCFI14:
 384              		.cfi_def_cfa_register 13
 385              		@ sp needed
 386 0082 80BD     		pop	{r7, pc}
 387              		.cfi_endproc
 388              	.LFE333:
 390              		.section	.text.BSP_I2C4_WriteReg,"ax",%progbits
 391              		.align	1
 392              		.global	BSP_I2C4_WriteReg
ARM GAS  /tmp/ccR5kwXz.s 			page 13


 393              		.syntax unified
 394              		.thumb
 395              		.thumb_func
 396              		.fpu fpv5-d16
 398              	BSP_I2C4_WriteReg:
 399              	.LFB334:
 305:./BSP/ST/stm32h747i_discovery_bus.c **** 
 306:./BSP/ST/stm32h747i_discovery_bus.c **** /**
 307:./BSP/ST/stm32h747i_discovery_bus.c ****   * @brief  Write a 8bit value in a register of the device through BUS.
 308:./BSP/ST/stm32h747i_discovery_bus.c ****   * @param  DevAddr Device address on Bus.
 309:./BSP/ST/stm32h747i_discovery_bus.c ****   * @param  Reg    The target register address to write
 310:./BSP/ST/stm32h747i_discovery_bus.c ****   * @param  pData  The target register value to be written
 311:./BSP/ST/stm32h747i_discovery_bus.c ****   * @param  Length buffer size to be written
 312:./BSP/ST/stm32h747i_discovery_bus.c ****   * @retval BSP status
 313:./BSP/ST/stm32h747i_discovery_bus.c ****   */
 314:./BSP/ST/stm32h747i_discovery_bus.c **** int32_t BSP_I2C4_WriteReg(uint16_t DevAddr, uint16_t Reg, uint8_t *pData, uint16_t Length)
 315:./BSP/ST/stm32h747i_discovery_bus.c **** {
 400              		.loc 1 315 1
 401              		.cfi_startproc
 402              		@ args = 0, pretend = 0, frame = 24
 403              		@ frame_needed = 1, uses_anonymous_args = 0
 404 0000 80B5     		push	{r7, lr}
 405              	.LCFI15:
 406              		.cfi_def_cfa_offset 8
 407              		.cfi_offset 7, -8
 408              		.cfi_offset 14, -4
 409 0002 88B0     		sub	sp, sp, #32
 410              	.LCFI16:
 411              		.cfi_def_cfa_offset 40
 412 0004 02AF     		add	r7, sp, #8
 413              	.LCFI17:
 414              		.cfi_def_cfa 7, 32
 415 0006 BA60     		str	r2, [r7, #8]
 416 0008 1A46     		mov	r2, r3
 417 000a 0346     		mov	r3, r0	@ movhi
 418 000c FB81     		strh	r3, [r7, #14]	@ movhi
 419 000e 0B46     		mov	r3, r1	@ movhi
 420 0010 BB81     		strh	r3, [r7, #12]	@ movhi
 421 0012 1346     		mov	r3, r2	@ movhi
 422 0014 FB80     		strh	r3, [r7, #6]	@ movhi
 316:./BSP/ST/stm32h747i_discovery_bus.c ****   int32_t ret;
 317:./BSP/ST/stm32h747i_discovery_bus.c **** #if defined(BSP_USE_CMSIS_OS)
 318:./BSP/ST/stm32h747i_discovery_bus.c ****   /* Get semaphore to prevent multiple I2C access */
 319:./BSP/ST/stm32h747i_discovery_bus.c ****   osSemaphoreWait(BspI2cSemaphore, osWaitForever);
 423              		.loc 1 319 3
 424 0016 164B     		ldr	r3, .L22
 425 0018 1B68     		ldr	r3, [r3]
 426 001a 4FF0FF31 		mov	r1, #-1
 427 001e 1846     		mov	r0, r3
 428 0020 FFF7FEFF 		bl	osSemaphoreWait
 320:./BSP/ST/stm32h747i_discovery_bus.c **** #endif
 321:./BSP/ST/stm32h747i_discovery_bus.c ****   if(I2C4_WriteReg(DevAddr, Reg, I2C_MEMADD_SIZE_8BIT, pData, Length) == 0)
 429              		.loc 1 321 6
 430 0024 B989     		ldrh	r1, [r7, #12]
 431 0026 F889     		ldrh	r0, [r7, #14]
 432 0028 FB88     		ldrh	r3, [r7, #6]
 433 002a 0093     		str	r3, [sp]
ARM GAS  /tmp/ccR5kwXz.s 			page 14


 434 002c BB68     		ldr	r3, [r7, #8]
 435 002e 0122     		movs	r2, #1
 436 0030 FFF7FEFF 		bl	I2C4_WriteReg
 437 0034 0346     		mov	r3, r0
 438              		.loc 1 321 5
 439 0036 002B     		cmp	r3, #0
 440 0038 02D1     		bne	.L18
 322:./BSP/ST/stm32h747i_discovery_bus.c ****   {
 323:./BSP/ST/stm32h747i_discovery_bus.c ****     ret = BSP_ERROR_NONE;
 441              		.loc 1 323 9
 442 003a 0023     		movs	r3, #0
 443 003c 7B61     		str	r3, [r7, #20]
 444 003e 0CE0     		b	.L19
 445              	.L18:
 324:./BSP/ST/stm32h747i_discovery_bus.c ****   }
 325:./BSP/ST/stm32h747i_discovery_bus.c ****   else
 326:./BSP/ST/stm32h747i_discovery_bus.c ****   {
 327:./BSP/ST/stm32h747i_discovery_bus.c ****     if( HAL_I2C_GetError(&hbus_i2c4) == HAL_I2C_ERROR_AF)
 446              		.loc 1 327 9
 447 0040 0C48     		ldr	r0, .L22+4
 448 0042 FFF7FEFF 		bl	HAL_I2C_GetError
 449 0046 0346     		mov	r3, r0
 450              		.loc 1 327 7
 451 0048 042B     		cmp	r3, #4
 452 004a 03D1     		bne	.L20
 328:./BSP/ST/stm32h747i_discovery_bus.c ****     {
 329:./BSP/ST/stm32h747i_discovery_bus.c ****       ret = BSP_ERROR_BUS_ACKNOWLEDGE_FAILURE;
 453              		.loc 1 329 11
 454 004c 6FF06503 		mvn	r3, #101
 455 0050 7B61     		str	r3, [r7, #20]
 456 0052 02E0     		b	.L19
 457              	.L20:
 330:./BSP/ST/stm32h747i_discovery_bus.c ****     }
 331:./BSP/ST/stm32h747i_discovery_bus.c ****     else
 332:./BSP/ST/stm32h747i_discovery_bus.c ****     {
 333:./BSP/ST/stm32h747i_discovery_bus.c ****       ret =  BSP_ERROR_PERIPH_FAILURE;
 458              		.loc 1 333 11
 459 0054 6FF00303 		mvn	r3, #3
 460 0058 7B61     		str	r3, [r7, #20]
 461              	.L19:
 334:./BSP/ST/stm32h747i_discovery_bus.c ****     }
 335:./BSP/ST/stm32h747i_discovery_bus.c ****   }
 336:./BSP/ST/stm32h747i_discovery_bus.c **** #if defined(BSP_USE_CMSIS_OS)
 337:./BSP/ST/stm32h747i_discovery_bus.c ****   /* Release semaphore to prevent multiple I2C access */
 338:./BSP/ST/stm32h747i_discovery_bus.c ****   osSemaphoreRelease(BspI2cSemaphore);
 462              		.loc 1 338 3
 463 005a 054B     		ldr	r3, .L22
 464 005c 1B68     		ldr	r3, [r3]
 465 005e 1846     		mov	r0, r3
 466 0060 FFF7FEFF 		bl	osSemaphoreRelease
 339:./BSP/ST/stm32h747i_discovery_bus.c **** #endif
 340:./BSP/ST/stm32h747i_discovery_bus.c ****   return ret;
 467              		.loc 1 340 10
 468 0064 7B69     		ldr	r3, [r7, #20]
 341:./BSP/ST/stm32h747i_discovery_bus.c **** }
 469              		.loc 1 341 1
 470 0066 1846     		mov	r0, r3
ARM GAS  /tmp/ccR5kwXz.s 			page 15


 471 0068 1837     		adds	r7, r7, #24
 472              	.LCFI18:
 473              		.cfi_def_cfa_offset 8
 474 006a BD46     		mov	sp, r7
 475              	.LCFI19:
 476              		.cfi_def_cfa_register 13
 477              		@ sp needed
 478 006c 80BD     		pop	{r7, pc}
 479              	.L23:
 480 006e 00BF     		.align	2
 481              	.L22:
 482 0070 00000000 		.word	BspI2cSemaphore
 483 0074 00000000 		.word	hbus_i2c4
 484              		.cfi_endproc
 485              	.LFE334:
 487              		.section	.text.BSP_I2C4_ReadReg,"ax",%progbits
 488              		.align	1
 489              		.global	BSP_I2C4_ReadReg
 490              		.syntax unified
 491              		.thumb
 492              		.thumb_func
 493              		.fpu fpv5-d16
 495              	BSP_I2C4_ReadReg:
 496              	.LFB335:
 342:./BSP/ST/stm32h747i_discovery_bus.c **** 
 343:./BSP/ST/stm32h747i_discovery_bus.c **** /**
 344:./BSP/ST/stm32h747i_discovery_bus.c ****   * @brief  Read a 8bit register of the device through BUS
 345:./BSP/ST/stm32h747i_discovery_bus.c ****   * @param  DevAddr Device address on BUS
 346:./BSP/ST/stm32h747i_discovery_bus.c ****   * @param  Reg     The target register address to read
 347:./BSP/ST/stm32h747i_discovery_bus.c ****   * @param  pData   Pointer to data buffer
 348:./BSP/ST/stm32h747i_discovery_bus.c ****   * @param  Length  Length of the data
 349:./BSP/ST/stm32h747i_discovery_bus.c ****   * @retval BSP status
 350:./BSP/ST/stm32h747i_discovery_bus.c ****   */
 351:./BSP/ST/stm32h747i_discovery_bus.c **** int32_t BSP_I2C4_ReadReg(uint16_t DevAddr, uint16_t Reg, uint8_t *pData, uint16_t Length)
 352:./BSP/ST/stm32h747i_discovery_bus.c **** {
 497              		.loc 1 352 1
 498              		.cfi_startproc
 499              		@ args = 0, pretend = 0, frame = 24
 500              		@ frame_needed = 1, uses_anonymous_args = 0
 501 0000 80B5     		push	{r7, lr}
 502              	.LCFI20:
 503              		.cfi_def_cfa_offset 8
 504              		.cfi_offset 7, -8
 505              		.cfi_offset 14, -4
 506 0002 88B0     		sub	sp, sp, #32
 507              	.LCFI21:
 508              		.cfi_def_cfa_offset 40
 509 0004 02AF     		add	r7, sp, #8
 510              	.LCFI22:
 511              		.cfi_def_cfa 7, 32
 512 0006 BA60     		str	r2, [r7, #8]
 513 0008 1A46     		mov	r2, r3
 514 000a 0346     		mov	r3, r0	@ movhi
 515 000c FB81     		strh	r3, [r7, #14]	@ movhi
 516 000e 0B46     		mov	r3, r1	@ movhi
 517 0010 BB81     		strh	r3, [r7, #12]	@ movhi
 518 0012 1346     		mov	r3, r2	@ movhi
ARM GAS  /tmp/ccR5kwXz.s 			page 16


 519 0014 FB80     		strh	r3, [r7, #6]	@ movhi
 353:./BSP/ST/stm32h747i_discovery_bus.c ****   int32_t ret;
 354:./BSP/ST/stm32h747i_discovery_bus.c **** #if defined(BSP_USE_CMSIS_OS)
 355:./BSP/ST/stm32h747i_discovery_bus.c ****   /* Get semaphore to prevent multiple I2C access */
 356:./BSP/ST/stm32h747i_discovery_bus.c ****   osSemaphoreWait(BspI2cSemaphore, osWaitForever);
 520              		.loc 1 356 3
 521 0016 164B     		ldr	r3, .L29
 522 0018 1B68     		ldr	r3, [r3]
 523 001a 4FF0FF31 		mov	r1, #-1
 524 001e 1846     		mov	r0, r3
 525 0020 FFF7FEFF 		bl	osSemaphoreWait
 357:./BSP/ST/stm32h747i_discovery_bus.c **** #endif
 358:./BSP/ST/stm32h747i_discovery_bus.c ****   if(I2C4_ReadReg(DevAddr, Reg, I2C_MEMADD_SIZE_8BIT, pData, Length) == 0)
 526              		.loc 1 358 6
 527 0024 B989     		ldrh	r1, [r7, #12]
 528 0026 F889     		ldrh	r0, [r7, #14]
 529 0028 FB88     		ldrh	r3, [r7, #6]
 530 002a 0093     		str	r3, [sp]
 531 002c BB68     		ldr	r3, [r7, #8]
 532 002e 0122     		movs	r2, #1
 533 0030 FFF7FEFF 		bl	I2C4_ReadReg
 534 0034 0346     		mov	r3, r0
 535              		.loc 1 358 5
 536 0036 002B     		cmp	r3, #0
 537 0038 02D1     		bne	.L25
 359:./BSP/ST/stm32h747i_discovery_bus.c ****   {
 360:./BSP/ST/stm32h747i_discovery_bus.c ****     ret = BSP_ERROR_NONE;
 538              		.loc 1 360 9
 539 003a 0023     		movs	r3, #0
 540 003c 7B61     		str	r3, [r7, #20]
 541 003e 0CE0     		b	.L26
 542              	.L25:
 361:./BSP/ST/stm32h747i_discovery_bus.c ****   }
 362:./BSP/ST/stm32h747i_discovery_bus.c ****   else
 363:./BSP/ST/stm32h747i_discovery_bus.c ****   {
 364:./BSP/ST/stm32h747i_discovery_bus.c ****     if( HAL_I2C_GetError(&hbus_i2c4) == HAL_I2C_ERROR_AF)
 543              		.loc 1 364 9
 544 0040 0C48     		ldr	r0, .L29+4
 545 0042 FFF7FEFF 		bl	HAL_I2C_GetError
 546 0046 0346     		mov	r3, r0
 547              		.loc 1 364 7
 548 0048 042B     		cmp	r3, #4
 549 004a 03D1     		bne	.L27
 365:./BSP/ST/stm32h747i_discovery_bus.c ****     {
 366:./BSP/ST/stm32h747i_discovery_bus.c ****       ret = BSP_ERROR_BUS_ACKNOWLEDGE_FAILURE;
 550              		.loc 1 366 11
 551 004c 6FF06503 		mvn	r3, #101
 552 0050 7B61     		str	r3, [r7, #20]
 553 0052 02E0     		b	.L26
 554              	.L27:
 367:./BSP/ST/stm32h747i_discovery_bus.c ****     }
 368:./BSP/ST/stm32h747i_discovery_bus.c ****     else
 369:./BSP/ST/stm32h747i_discovery_bus.c ****     {
 370:./BSP/ST/stm32h747i_discovery_bus.c ****       ret =  BSP_ERROR_PERIPH_FAILURE;
 555              		.loc 1 370 11
 556 0054 6FF00303 		mvn	r3, #3
 557 0058 7B61     		str	r3, [r7, #20]
ARM GAS  /tmp/ccR5kwXz.s 			page 17


 558              	.L26:
 371:./BSP/ST/stm32h747i_discovery_bus.c ****     }
 372:./BSP/ST/stm32h747i_discovery_bus.c ****   }
 373:./BSP/ST/stm32h747i_discovery_bus.c **** #if defined(BSP_USE_CMSIS_OS)
 374:./BSP/ST/stm32h747i_discovery_bus.c ****   /* Release semaphore to prevent multiple I2C access */
 375:./BSP/ST/stm32h747i_discovery_bus.c ****   osSemaphoreRelease(BspI2cSemaphore);
 559              		.loc 1 375 3
 560 005a 054B     		ldr	r3, .L29
 561 005c 1B68     		ldr	r3, [r3]
 562 005e 1846     		mov	r0, r3
 563 0060 FFF7FEFF 		bl	osSemaphoreRelease
 376:./BSP/ST/stm32h747i_discovery_bus.c **** #endif
 377:./BSP/ST/stm32h747i_discovery_bus.c ****   return ret;
 564              		.loc 1 377 10
 565 0064 7B69     		ldr	r3, [r7, #20]
 378:./BSP/ST/stm32h747i_discovery_bus.c **** }
 566              		.loc 1 378 1
 567 0066 1846     		mov	r0, r3
 568 0068 1837     		adds	r7, r7, #24
 569              	.LCFI23:
 570              		.cfi_def_cfa_offset 8
 571 006a BD46     		mov	sp, r7
 572              	.LCFI24:
 573              		.cfi_def_cfa_register 13
 574              		@ sp needed
 575 006c 80BD     		pop	{r7, pc}
 576              	.L30:
 577 006e 00BF     		.align	2
 578              	.L29:
 579 0070 00000000 		.word	BspI2cSemaphore
 580 0074 00000000 		.word	hbus_i2c4
 581              		.cfi_endproc
 582              	.LFE335:
 584              		.section	.text.BSP_I2C4_WriteReg16,"ax",%progbits
 585              		.align	1
 586              		.global	BSP_I2C4_WriteReg16
 587              		.syntax unified
 588              		.thumb
 589              		.thumb_func
 590              		.fpu fpv5-d16
 592              	BSP_I2C4_WriteReg16:
 593              	.LFB336:
 379:./BSP/ST/stm32h747i_discovery_bus.c **** 
 380:./BSP/ST/stm32h747i_discovery_bus.c **** /**
 381:./BSP/ST/stm32h747i_discovery_bus.c ****   * @brief  Write a 16bit value in a register of the device through BUS.
 382:./BSP/ST/stm32h747i_discovery_bus.c ****   * @param  DevAddr Device address on Bus.
 383:./BSP/ST/stm32h747i_discovery_bus.c ****   * @param  Reg    The target register address to write
 384:./BSP/ST/stm32h747i_discovery_bus.c ****   * @param  pData  The target register value to be written
 385:./BSP/ST/stm32h747i_discovery_bus.c ****   * @param  Length buffer size to be written
 386:./BSP/ST/stm32h747i_discovery_bus.c ****   * @retval BSP status
 387:./BSP/ST/stm32h747i_discovery_bus.c ****   */
 388:./BSP/ST/stm32h747i_discovery_bus.c **** int32_t BSP_I2C4_WriteReg16(uint16_t DevAddr, uint16_t Reg, uint8_t *pData, uint16_t Length)
 389:./BSP/ST/stm32h747i_discovery_bus.c **** {
 594              		.loc 1 389 1
 595              		.cfi_startproc
 596              		@ args = 0, pretend = 0, frame = 24
 597              		@ frame_needed = 1, uses_anonymous_args = 0
ARM GAS  /tmp/ccR5kwXz.s 			page 18


 598 0000 80B5     		push	{r7, lr}
 599              	.LCFI25:
 600              		.cfi_def_cfa_offset 8
 601              		.cfi_offset 7, -8
 602              		.cfi_offset 14, -4
 603 0002 88B0     		sub	sp, sp, #32
 604              	.LCFI26:
 605              		.cfi_def_cfa_offset 40
 606 0004 02AF     		add	r7, sp, #8
 607              	.LCFI27:
 608              		.cfi_def_cfa 7, 32
 609 0006 BA60     		str	r2, [r7, #8]
 610 0008 1A46     		mov	r2, r3
 611 000a 0346     		mov	r3, r0	@ movhi
 612 000c FB81     		strh	r3, [r7, #14]	@ movhi
 613 000e 0B46     		mov	r3, r1	@ movhi
 614 0010 BB81     		strh	r3, [r7, #12]	@ movhi
 615 0012 1346     		mov	r3, r2	@ movhi
 616 0014 FB80     		strh	r3, [r7, #6]	@ movhi
 390:./BSP/ST/stm32h747i_discovery_bus.c ****   int32_t ret;
 391:./BSP/ST/stm32h747i_discovery_bus.c ****  #if defined(BSP_USE_CMSIS_OS)
 392:./BSP/ST/stm32h747i_discovery_bus.c ****   /* Get semaphore to prevent multiple I2C access */
 393:./BSP/ST/stm32h747i_discovery_bus.c ****   osSemaphoreWait(BspI2cSemaphore, osWaitForever);
 617              		.loc 1 393 3
 618 0016 164B     		ldr	r3, .L36
 619 0018 1B68     		ldr	r3, [r3]
 620 001a 4FF0FF31 		mov	r1, #-1
 621 001e 1846     		mov	r0, r3
 622 0020 FFF7FEFF 		bl	osSemaphoreWait
 394:./BSP/ST/stm32h747i_discovery_bus.c **** #endif
 395:./BSP/ST/stm32h747i_discovery_bus.c ****   if(I2C4_WriteReg(DevAddr, Reg, I2C_MEMADD_SIZE_16BIT, pData, Length) == 0)
 623              		.loc 1 395 6
 624 0024 B989     		ldrh	r1, [r7, #12]
 625 0026 F889     		ldrh	r0, [r7, #14]
 626 0028 FB88     		ldrh	r3, [r7, #6]
 627 002a 0093     		str	r3, [sp]
 628 002c BB68     		ldr	r3, [r7, #8]
 629 002e 0222     		movs	r2, #2
 630 0030 FFF7FEFF 		bl	I2C4_WriteReg
 631 0034 0346     		mov	r3, r0
 632              		.loc 1 395 5
 633 0036 002B     		cmp	r3, #0
 634 0038 02D1     		bne	.L32
 396:./BSP/ST/stm32h747i_discovery_bus.c ****   {
 397:./BSP/ST/stm32h747i_discovery_bus.c ****     ret = BSP_ERROR_NONE;
 635              		.loc 1 397 9
 636 003a 0023     		movs	r3, #0
 637 003c 7B61     		str	r3, [r7, #20]
 638 003e 0CE0     		b	.L33
 639              	.L32:
 398:./BSP/ST/stm32h747i_discovery_bus.c ****   }
 399:./BSP/ST/stm32h747i_discovery_bus.c ****   else
 400:./BSP/ST/stm32h747i_discovery_bus.c ****   {
 401:./BSP/ST/stm32h747i_discovery_bus.c ****     if( HAL_I2C_GetError(&hbus_i2c4) == HAL_I2C_ERROR_AF)
 640              		.loc 1 401 9
 641 0040 0C48     		ldr	r0, .L36+4
 642 0042 FFF7FEFF 		bl	HAL_I2C_GetError
ARM GAS  /tmp/ccR5kwXz.s 			page 19


 643 0046 0346     		mov	r3, r0
 644              		.loc 1 401 7
 645 0048 042B     		cmp	r3, #4
 646 004a 03D1     		bne	.L34
 402:./BSP/ST/stm32h747i_discovery_bus.c ****     {
 403:./BSP/ST/stm32h747i_discovery_bus.c ****       ret = BSP_ERROR_BUS_ACKNOWLEDGE_FAILURE;
 647              		.loc 1 403 11
 648 004c 6FF06503 		mvn	r3, #101
 649 0050 7B61     		str	r3, [r7, #20]
 650 0052 02E0     		b	.L33
 651              	.L34:
 404:./BSP/ST/stm32h747i_discovery_bus.c ****     }
 405:./BSP/ST/stm32h747i_discovery_bus.c ****     else
 406:./BSP/ST/stm32h747i_discovery_bus.c ****     {
 407:./BSP/ST/stm32h747i_discovery_bus.c ****       ret =  BSP_ERROR_PERIPH_FAILURE;
 652              		.loc 1 407 11
 653 0054 6FF00303 		mvn	r3, #3
 654 0058 7B61     		str	r3, [r7, #20]
 655              	.L33:
 408:./BSP/ST/stm32h747i_discovery_bus.c ****     }
 409:./BSP/ST/stm32h747i_discovery_bus.c ****   }
 410:./BSP/ST/stm32h747i_discovery_bus.c **** #if defined(BSP_USE_CMSIS_OS)
 411:./BSP/ST/stm32h747i_discovery_bus.c ****   /* Release semaphore to prevent multiple I2C access */
 412:./BSP/ST/stm32h747i_discovery_bus.c ****   osSemaphoreRelease(BspI2cSemaphore);
 656              		.loc 1 412 3
 657 005a 054B     		ldr	r3, .L36
 658 005c 1B68     		ldr	r3, [r3]
 659 005e 1846     		mov	r0, r3
 660 0060 FFF7FEFF 		bl	osSemaphoreRelease
 413:./BSP/ST/stm32h747i_discovery_bus.c **** #endif
 414:./BSP/ST/stm32h747i_discovery_bus.c ****   return ret;
 661              		.loc 1 414 10
 662 0064 7B69     		ldr	r3, [r7, #20]
 415:./BSP/ST/stm32h747i_discovery_bus.c **** }
 663              		.loc 1 415 1
 664 0066 1846     		mov	r0, r3
 665 0068 1837     		adds	r7, r7, #24
 666              	.LCFI28:
 667              		.cfi_def_cfa_offset 8
 668 006a BD46     		mov	sp, r7
 669              	.LCFI29:
 670              		.cfi_def_cfa_register 13
 671              		@ sp needed
 672 006c 80BD     		pop	{r7, pc}
 673              	.L37:
 674 006e 00BF     		.align	2
 675              	.L36:
 676 0070 00000000 		.word	BspI2cSemaphore
 677 0074 00000000 		.word	hbus_i2c4
 678              		.cfi_endproc
 679              	.LFE336:
 681              		.section	.text.BSP_I2C4_ReadReg16,"ax",%progbits
 682              		.align	1
 683              		.global	BSP_I2C4_ReadReg16
 684              		.syntax unified
 685              		.thumb
 686              		.thumb_func
ARM GAS  /tmp/ccR5kwXz.s 			page 20


 687              		.fpu fpv5-d16
 689              	BSP_I2C4_ReadReg16:
 690              	.LFB337:
 416:./BSP/ST/stm32h747i_discovery_bus.c **** 
 417:./BSP/ST/stm32h747i_discovery_bus.c **** /**
 418:./BSP/ST/stm32h747i_discovery_bus.c ****   * @brief  Read a 16bit register of the device through BUS
 419:./BSP/ST/stm32h747i_discovery_bus.c ****   * @param  DevAddr Device address on BUS
 420:./BSP/ST/stm32h747i_discovery_bus.c ****   * @param  Reg     The target register address to read
 421:./BSP/ST/stm32h747i_discovery_bus.c ****   * @param  pData   Pointer to data buffer
 422:./BSP/ST/stm32h747i_discovery_bus.c ****   * @param  Length  Length of the data
 423:./BSP/ST/stm32h747i_discovery_bus.c ****   * @retval BSP status
 424:./BSP/ST/stm32h747i_discovery_bus.c ****   */
 425:./BSP/ST/stm32h747i_discovery_bus.c **** int32_t BSP_I2C4_ReadReg16(uint16_t DevAddr, uint16_t Reg, uint8_t *pData, uint16_t Length)
 426:./BSP/ST/stm32h747i_discovery_bus.c **** {
 691              		.loc 1 426 1
 692              		.cfi_startproc
 693              		@ args = 0, pretend = 0, frame = 24
 694              		@ frame_needed = 1, uses_anonymous_args = 0
 695 0000 80B5     		push	{r7, lr}
 696              	.LCFI30:
 697              		.cfi_def_cfa_offset 8
 698              		.cfi_offset 7, -8
 699              		.cfi_offset 14, -4
 700 0002 88B0     		sub	sp, sp, #32
 701              	.LCFI31:
 702              		.cfi_def_cfa_offset 40
 703 0004 02AF     		add	r7, sp, #8
 704              	.LCFI32:
 705              		.cfi_def_cfa 7, 32
 706 0006 BA60     		str	r2, [r7, #8]
 707 0008 1A46     		mov	r2, r3
 708 000a 0346     		mov	r3, r0	@ movhi
 709 000c FB81     		strh	r3, [r7, #14]	@ movhi
 710 000e 0B46     		mov	r3, r1	@ movhi
 711 0010 BB81     		strh	r3, [r7, #12]	@ movhi
 712 0012 1346     		mov	r3, r2	@ movhi
 713 0014 FB80     		strh	r3, [r7, #6]	@ movhi
 427:./BSP/ST/stm32h747i_discovery_bus.c ****   int32_t ret;
 428:./BSP/ST/stm32h747i_discovery_bus.c **** #if defined(BSP_USE_CMSIS_OS)
 429:./BSP/ST/stm32h747i_discovery_bus.c ****   /* Get semaphore to prevent multiple I2C access */
 430:./BSP/ST/stm32h747i_discovery_bus.c ****   osSemaphoreWait(BspI2cSemaphore, osWaitForever);
 714              		.loc 1 430 3
 715 0016 164B     		ldr	r3, .L43
 716 0018 1B68     		ldr	r3, [r3]
 717 001a 4FF0FF31 		mov	r1, #-1
 718 001e 1846     		mov	r0, r3
 719 0020 FFF7FEFF 		bl	osSemaphoreWait
 431:./BSP/ST/stm32h747i_discovery_bus.c **** #endif
 432:./BSP/ST/stm32h747i_discovery_bus.c ****   if(I2C4_ReadReg(DevAddr, Reg, I2C_MEMADD_SIZE_16BIT, pData, Length) == 0)
 720              		.loc 1 432 6
 721 0024 B989     		ldrh	r1, [r7, #12]
 722 0026 F889     		ldrh	r0, [r7, #14]
 723 0028 FB88     		ldrh	r3, [r7, #6]
 724 002a 0093     		str	r3, [sp]
 725 002c BB68     		ldr	r3, [r7, #8]
 726 002e 0222     		movs	r2, #2
 727 0030 FFF7FEFF 		bl	I2C4_ReadReg
ARM GAS  /tmp/ccR5kwXz.s 			page 21


 728 0034 0346     		mov	r3, r0
 729              		.loc 1 432 5
 730 0036 002B     		cmp	r3, #0
 731 0038 02D1     		bne	.L39
 433:./BSP/ST/stm32h747i_discovery_bus.c ****   {
 434:./BSP/ST/stm32h747i_discovery_bus.c ****     ret = BSP_ERROR_NONE;
 732              		.loc 1 434 9
 733 003a 0023     		movs	r3, #0
 734 003c 7B61     		str	r3, [r7, #20]
 735 003e 0CE0     		b	.L40
 736              	.L39:
 435:./BSP/ST/stm32h747i_discovery_bus.c ****   }
 436:./BSP/ST/stm32h747i_discovery_bus.c ****   else
 437:./BSP/ST/stm32h747i_discovery_bus.c ****   {
 438:./BSP/ST/stm32h747i_discovery_bus.c ****     if( HAL_I2C_GetError(&hbus_i2c4) == HAL_I2C_ERROR_AF)
 737              		.loc 1 438 9
 738 0040 0C48     		ldr	r0, .L43+4
 739 0042 FFF7FEFF 		bl	HAL_I2C_GetError
 740 0046 0346     		mov	r3, r0
 741              		.loc 1 438 7
 742 0048 042B     		cmp	r3, #4
 743 004a 03D1     		bne	.L41
 439:./BSP/ST/stm32h747i_discovery_bus.c ****     {
 440:./BSP/ST/stm32h747i_discovery_bus.c ****       ret = BSP_ERROR_BUS_ACKNOWLEDGE_FAILURE;
 744              		.loc 1 440 11
 745 004c 6FF06503 		mvn	r3, #101
 746 0050 7B61     		str	r3, [r7, #20]
 747 0052 02E0     		b	.L40
 748              	.L41:
 441:./BSP/ST/stm32h747i_discovery_bus.c ****     }
 442:./BSP/ST/stm32h747i_discovery_bus.c ****     else
 443:./BSP/ST/stm32h747i_discovery_bus.c ****     {
 444:./BSP/ST/stm32h747i_discovery_bus.c ****       ret =  BSP_ERROR_PERIPH_FAILURE;
 749              		.loc 1 444 11
 750 0054 6FF00303 		mvn	r3, #3
 751 0058 7B61     		str	r3, [r7, #20]
 752              	.L40:
 445:./BSP/ST/stm32h747i_discovery_bus.c ****     }
 446:./BSP/ST/stm32h747i_discovery_bus.c ****   }
 447:./BSP/ST/stm32h747i_discovery_bus.c **** #if defined(BSP_USE_CMSIS_OS)
 448:./BSP/ST/stm32h747i_discovery_bus.c ****   /* Release semaphore to prevent multiple I2C access */
 449:./BSP/ST/stm32h747i_discovery_bus.c ****   osSemaphoreRelease(BspI2cSemaphore);
 753              		.loc 1 449 3
 754 005a 054B     		ldr	r3, .L43
 755 005c 1B68     		ldr	r3, [r3]
 756 005e 1846     		mov	r0, r3
 757 0060 FFF7FEFF 		bl	osSemaphoreRelease
 450:./BSP/ST/stm32h747i_discovery_bus.c **** #endif
 451:./BSP/ST/stm32h747i_discovery_bus.c ****   return ret;
 758              		.loc 1 451 10
 759 0064 7B69     		ldr	r3, [r7, #20]
 452:./BSP/ST/stm32h747i_discovery_bus.c **** }
 760              		.loc 1 452 1
 761 0066 1846     		mov	r0, r3
 762 0068 1837     		adds	r7, r7, #24
 763              	.LCFI33:
 764              		.cfi_def_cfa_offset 8
ARM GAS  /tmp/ccR5kwXz.s 			page 22


 765 006a BD46     		mov	sp, r7
 766              	.LCFI34:
 767              		.cfi_def_cfa_register 13
 768              		@ sp needed
 769 006c 80BD     		pop	{r7, pc}
 770              	.L44:
 771 006e 00BF     		.align	2
 772              	.L43:
 773 0070 00000000 		.word	BspI2cSemaphore
 774 0074 00000000 		.word	hbus_i2c4
 775              		.cfi_endproc
 776              	.LFE337:
 778              		.section	.text.BSP_I2C4_IsReady,"ax",%progbits
 779              		.align	1
 780              		.global	BSP_I2C4_IsReady
 781              		.syntax unified
 782              		.thumb
 783              		.thumb_func
 784              		.fpu fpv5-d16
 786              	BSP_I2C4_IsReady:
 787              	.LFB338:
 453:./BSP/ST/stm32h747i_discovery_bus.c **** 
 454:./BSP/ST/stm32h747i_discovery_bus.c **** /**
 455:./BSP/ST/stm32h747i_discovery_bus.c ****   * @brief  Checks if target device is ready for communication.
 456:./BSP/ST/stm32h747i_discovery_bus.c ****   * @note   This function is used with Memory devices
 457:./BSP/ST/stm32h747i_discovery_bus.c ****   * @param  DevAddr  Target device address
 458:./BSP/ST/stm32h747i_discovery_bus.c ****   * @param  Trials      Number of trials
 459:./BSP/ST/stm32h747i_discovery_bus.c ****   * @retval BSP status
 460:./BSP/ST/stm32h747i_discovery_bus.c ****   */
 461:./BSP/ST/stm32h747i_discovery_bus.c **** int32_t BSP_I2C4_IsReady(uint16_t DevAddr, uint32_t Trials)
 462:./BSP/ST/stm32h747i_discovery_bus.c **** {
 788              		.loc 1 462 1
 789              		.cfi_startproc
 790              		@ args = 0, pretend = 0, frame = 16
 791              		@ frame_needed = 1, uses_anonymous_args = 0
 792 0000 80B5     		push	{r7, lr}
 793              	.LCFI35:
 794              		.cfi_def_cfa_offset 8
 795              		.cfi_offset 7, -8
 796              		.cfi_offset 14, -4
 797 0002 84B0     		sub	sp, sp, #16
 798              	.LCFI36:
 799              		.cfi_def_cfa_offset 24
 800 0004 00AF     		add	r7, sp, #0
 801              	.LCFI37:
 802              		.cfi_def_cfa_register 7
 803 0006 0346     		mov	r3, r0
 804 0008 3960     		str	r1, [r7]
 805 000a FB80     		strh	r3, [r7, #6]	@ movhi
 463:./BSP/ST/stm32h747i_discovery_bus.c ****   int32_t ret = BSP_ERROR_NONE;
 806              		.loc 1 463 11
 807 000c 0023     		movs	r3, #0
 808 000e FB60     		str	r3, [r7, #12]
 464:./BSP/ST/stm32h747i_discovery_bus.c **** #if defined(BSP_USE_CMSIS_OS)
 465:./BSP/ST/stm32h747i_discovery_bus.c ****   /* Get semaphore to prevent multiple I2C access */
 466:./BSP/ST/stm32h747i_discovery_bus.c ****   osSemaphoreWait(BspI2cSemaphore, osWaitForever);
 809              		.loc 1 466 3
ARM GAS  /tmp/ccR5kwXz.s 			page 23


 810 0010 0E4B     		ldr	r3, .L48
 811 0012 1B68     		ldr	r3, [r3]
 812 0014 4FF0FF31 		mov	r1, #-1
 813 0018 1846     		mov	r0, r3
 814 001a FFF7FEFF 		bl	osSemaphoreWait
 467:./BSP/ST/stm32h747i_discovery_bus.c **** #endif
 468:./BSP/ST/stm32h747i_discovery_bus.c ****   if(HAL_I2C_IsDeviceReady(&hbus_i2c4, DevAddr, Trials, 1000) != HAL_OK)
 815              		.loc 1 468 6
 816 001e F988     		ldrh	r1, [r7, #6]
 817 0020 4FF47A73 		mov	r3, #1000
 818 0024 3A68     		ldr	r2, [r7]
 819 0026 0A48     		ldr	r0, .L48+4
 820 0028 FFF7FEFF 		bl	HAL_I2C_IsDeviceReady
 821 002c 0346     		mov	r3, r0
 822              		.loc 1 468 5
 823 002e 002B     		cmp	r3, #0
 824 0030 02D0     		beq	.L46
 469:./BSP/ST/stm32h747i_discovery_bus.c ****   {
 470:./BSP/ST/stm32h747i_discovery_bus.c ****     ret = BSP_ERROR_BUSY;
 825              		.loc 1 470 9
 826 0032 6FF00203 		mvn	r3, #2
 827 0036 FB60     		str	r3, [r7, #12]
 828              	.L46:
 471:./BSP/ST/stm32h747i_discovery_bus.c ****   }
 472:./BSP/ST/stm32h747i_discovery_bus.c **** #if defined(BSP_USE_CMSIS_OS)
 473:./BSP/ST/stm32h747i_discovery_bus.c ****   /* Release semaphore to prevent multiple I2C access */
 474:./BSP/ST/stm32h747i_discovery_bus.c ****   osSemaphoreRelease(BspI2cSemaphore);
 829              		.loc 1 474 3
 830 0038 044B     		ldr	r3, .L48
 831 003a 1B68     		ldr	r3, [r3]
 832 003c 1846     		mov	r0, r3
 833 003e FFF7FEFF 		bl	osSemaphoreRelease
 475:./BSP/ST/stm32h747i_discovery_bus.c **** #endif
 476:./BSP/ST/stm32h747i_discovery_bus.c ****   return ret;
 834              		.loc 1 476 10
 835 0042 FB68     		ldr	r3, [r7, #12]
 477:./BSP/ST/stm32h747i_discovery_bus.c **** }
 836              		.loc 1 477 1
 837 0044 1846     		mov	r0, r3
 838 0046 1037     		adds	r7, r7, #16
 839              	.LCFI38:
 840              		.cfi_def_cfa_offset 8
 841 0048 BD46     		mov	sp, r7
 842              	.LCFI39:
 843              		.cfi_def_cfa_register 13
 844              		@ sp needed
 845 004a 80BD     		pop	{r7, pc}
 846              	.L49:
 847              		.align	2
 848              	.L48:
 849 004c 00000000 		.word	BspI2cSemaphore
 850 0050 00000000 		.word	hbus_i2c4
 851              		.cfi_endproc
 852              	.LFE338:
 854              		.section	.text.BSP_GetTick,"ax",%progbits
 855              		.align	1
 856              		.global	BSP_GetTick
ARM GAS  /tmp/ccR5kwXz.s 			page 24


 857              		.syntax unified
 858              		.thumb
 859              		.thumb_func
 860              		.fpu fpv5-d16
 862              	BSP_GetTick:
 863              	.LFB339:
 478:./BSP/ST/stm32h747i_discovery_bus.c **** 
 479:./BSP/ST/stm32h747i_discovery_bus.c **** /**
 480:./BSP/ST/stm32h747i_discovery_bus.c ****   * @brief  Delay function
 481:./BSP/ST/stm32h747i_discovery_bus.c ****   * @retval Tick value
 482:./BSP/ST/stm32h747i_discovery_bus.c ****   */
 483:./BSP/ST/stm32h747i_discovery_bus.c **** int32_t BSP_GetTick(void)
 484:./BSP/ST/stm32h747i_discovery_bus.c **** {
 864              		.loc 1 484 1
 865              		.cfi_startproc
 866              		@ args = 0, pretend = 0, frame = 0
 867              		@ frame_needed = 1, uses_anonymous_args = 0
 868 0000 80B5     		push	{r7, lr}
 869              	.LCFI40:
 870              		.cfi_def_cfa_offset 8
 871              		.cfi_offset 7, -8
 872              		.cfi_offset 14, -4
 873 0002 00AF     		add	r7, sp, #0
 874              	.LCFI41:
 875              		.cfi_def_cfa_register 7
 485:./BSP/ST/stm32h747i_discovery_bus.c ****   return (int32_t)HAL_GetTick();
 876              		.loc 1 485 19
 877 0004 FFF7FEFF 		bl	HAL_GetTick
 878 0008 0346     		mov	r3, r0
 486:./BSP/ST/stm32h747i_discovery_bus.c **** }
 879              		.loc 1 486 1
 880 000a 1846     		mov	r0, r3
 881 000c 80BD     		pop	{r7, pc}
 882              		.cfi_endproc
 883              	.LFE339:
 885              		.section	.text.I2C_GetTiming,"ax",%progbits
 886              		.align	1
 887              		.syntax unified
 888              		.thumb
 889              		.thumb_func
 890              		.fpu fpv5-d16
 892              	I2C_GetTiming:
 893              	.LFB340:
 487:./BSP/ST/stm32h747i_discovery_bus.c **** 
 488:./BSP/ST/stm32h747i_discovery_bus.c **** #if (USE_HAL_I2C_REGISTER_CALLBACKS == 1)
 489:./BSP/ST/stm32h747i_discovery_bus.c **** /**
 490:./BSP/ST/stm32h747i_discovery_bus.c ****   * @brief Register Default I2C4 Bus Msp Callbacks
 491:./BSP/ST/stm32h747i_discovery_bus.c ****   * @retval BSP status
 492:./BSP/ST/stm32h747i_discovery_bus.c ****   */
 493:./BSP/ST/stm32h747i_discovery_bus.c **** int32_t BSP_I2C4_RegisterDefaultMspCallbacks (void)
 494:./BSP/ST/stm32h747i_discovery_bus.c **** {
 495:./BSP/ST/stm32h747i_discovery_bus.c ****   int32_t ret = BSP_ERROR_NONE;
 496:./BSP/ST/stm32h747i_discovery_bus.c **** #if defined(BSP_USE_CMSIS_OS)
 497:./BSP/ST/stm32h747i_discovery_bus.c ****   /* Get semaphore to prevent multiple I2C access */
 498:./BSP/ST/stm32h747i_discovery_bus.c ****   osSemaphoreWait(BspI2cSemaphore, osWaitForever);
 499:./BSP/ST/stm32h747i_discovery_bus.c **** #endif
 500:./BSP/ST/stm32h747i_discovery_bus.c ****   __HAL_I2C_RESET_HANDLE_STATE(&hbus_i2c4);
ARM GAS  /tmp/ccR5kwXz.s 			page 25


 501:./BSP/ST/stm32h747i_discovery_bus.c **** 
 502:./BSP/ST/stm32h747i_discovery_bus.c ****   /* Register default MspInit/MspDeInit Callback */
 503:./BSP/ST/stm32h747i_discovery_bus.c ****   if(HAL_I2C_RegisterCallback(&hbus_i2c4, HAL_I2C_MSPINIT_CB_ID, I2C4_MspInit) != HAL_OK)
 504:./BSP/ST/stm32h747i_discovery_bus.c ****   {
 505:./BSP/ST/stm32h747i_discovery_bus.c ****     ret = BSP_ERROR_PERIPH_FAILURE;
 506:./BSP/ST/stm32h747i_discovery_bus.c ****   }
 507:./BSP/ST/stm32h747i_discovery_bus.c ****   else if(HAL_I2C_RegisterCallback(&hbus_i2c4, HAL_I2C_MSPDEINIT_CB_ID, I2C4_MspDeInit) != HAL_OK)
 508:./BSP/ST/stm32h747i_discovery_bus.c ****   {
 509:./BSP/ST/stm32h747i_discovery_bus.c ****     ret = BSP_ERROR_PERIPH_FAILURE;
 510:./BSP/ST/stm32h747i_discovery_bus.c ****   }
 511:./BSP/ST/stm32h747i_discovery_bus.c ****   else
 512:./BSP/ST/stm32h747i_discovery_bus.c ****   {
 513:./BSP/ST/stm32h747i_discovery_bus.c ****     IsI2c4MspCbValid = 1U;
 514:./BSP/ST/stm32h747i_discovery_bus.c ****   }
 515:./BSP/ST/stm32h747i_discovery_bus.c **** #if defined(BSP_USE_CMSIS_OS)
 516:./BSP/ST/stm32h747i_discovery_bus.c ****   /* Release semaphore to prevent multiple I2C access */
 517:./BSP/ST/stm32h747i_discovery_bus.c ****   osSemaphoreRelease(BspI2cSemaphore);
 518:./BSP/ST/stm32h747i_discovery_bus.c **** #endif
 519:./BSP/ST/stm32h747i_discovery_bus.c ****   /* BSP status */
 520:./BSP/ST/stm32h747i_discovery_bus.c ****   return ret;
 521:./BSP/ST/stm32h747i_discovery_bus.c **** }
 522:./BSP/ST/stm32h747i_discovery_bus.c **** 
 523:./BSP/ST/stm32h747i_discovery_bus.c **** /**
 524:./BSP/ST/stm32h747i_discovery_bus.c ****   * @brief Register I2C4 Bus Msp Callback registering
 525:./BSP/ST/stm32h747i_discovery_bus.c ****   * @param Callbacks     pointer to I2C4 MspInit/MspDeInit callback functions
 526:./BSP/ST/stm32h747i_discovery_bus.c ****   * @retval BSP status
 527:./BSP/ST/stm32h747i_discovery_bus.c ****   */
 528:./BSP/ST/stm32h747i_discovery_bus.c **** int32_t BSP_I2C4_RegisterMspCallbacks (BSP_I2C_Cb_t *Callback)
 529:./BSP/ST/stm32h747i_discovery_bus.c **** {
 530:./BSP/ST/stm32h747i_discovery_bus.c ****   int32_t ret = BSP_ERROR_NONE;
 531:./BSP/ST/stm32h747i_discovery_bus.c **** #if defined(BSP_USE_CMSIS_OS)
 532:./BSP/ST/stm32h747i_discovery_bus.c ****   /* Get semaphore to prevent multiple I2C access */
 533:./BSP/ST/stm32h747i_discovery_bus.c ****   osSemaphoreWait(BspI2cSemaphore, osWaitForever);
 534:./BSP/ST/stm32h747i_discovery_bus.c **** #endif
 535:./BSP/ST/stm32h747i_discovery_bus.c ****   __HAL_I2C_RESET_HANDLE_STATE(&hbus_i2c4);
 536:./BSP/ST/stm32h747i_discovery_bus.c **** 
 537:./BSP/ST/stm32h747i_discovery_bus.c ****   /* Register MspInit/MspDeInit Callbacks */
 538:./BSP/ST/stm32h747i_discovery_bus.c ****   if(HAL_I2C_RegisterCallback(&hbus_i2c4, HAL_I2C_MSPINIT_CB_ID, Callback->pMspI2cInitCb) != HAL_OK
 539:./BSP/ST/stm32h747i_discovery_bus.c ****   {
 540:./BSP/ST/stm32h747i_discovery_bus.c ****     ret = BSP_ERROR_PERIPH_FAILURE;
 541:./BSP/ST/stm32h747i_discovery_bus.c ****   }
 542:./BSP/ST/stm32h747i_discovery_bus.c ****   else if(HAL_I2C_RegisterCallback(&hbus_i2c4, HAL_I2C_MSPDEINIT_CB_ID, Callback->pMspI2cDeInitCb) 
 543:./BSP/ST/stm32h747i_discovery_bus.c ****   {
 544:./BSP/ST/stm32h747i_discovery_bus.c ****     ret = BSP_ERROR_PERIPH_FAILURE;
 545:./BSP/ST/stm32h747i_discovery_bus.c ****   }
 546:./BSP/ST/stm32h747i_discovery_bus.c ****   else
 547:./BSP/ST/stm32h747i_discovery_bus.c ****   {
 548:./BSP/ST/stm32h747i_discovery_bus.c ****     IsI2c4MspCbValid = 1U;
 549:./BSP/ST/stm32h747i_discovery_bus.c ****   }
 550:./BSP/ST/stm32h747i_discovery_bus.c **** #if defined(BSP_USE_CMSIS_OS)
 551:./BSP/ST/stm32h747i_discovery_bus.c ****   /* Release semaphore to prevent multiple I2C access */
 552:./BSP/ST/stm32h747i_discovery_bus.c ****   osSemaphoreRelease(BspI2cSemaphore);
 553:./BSP/ST/stm32h747i_discovery_bus.c **** #endif
 554:./BSP/ST/stm32h747i_discovery_bus.c ****   /* BSP status */
 555:./BSP/ST/stm32h747i_discovery_bus.c ****   return ret;
 556:./BSP/ST/stm32h747i_discovery_bus.c **** }
 557:./BSP/ST/stm32h747i_discovery_bus.c **** #endif /* USE_HAL_I2C_REGISTER_CALLBACKS */
ARM GAS  /tmp/ccR5kwXz.s 			page 26


 558:./BSP/ST/stm32h747i_discovery_bus.c **** /**
 559:./BSP/ST/stm32h747i_discovery_bus.c ****   * @}
 560:./BSP/ST/stm32h747i_discovery_bus.c ****   */
 561:./BSP/ST/stm32h747i_discovery_bus.c **** 
 562:./BSP/ST/stm32h747i_discovery_bus.c **** /** @defgroup STM32H747I_DISCO_BUS_Private_Functions Private Functions
 563:./BSP/ST/stm32h747i_discovery_bus.c ****   * @{
 564:./BSP/ST/stm32h747i_discovery_bus.c ****   */
 565:./BSP/ST/stm32h747i_discovery_bus.c **** 
 566:./BSP/ST/stm32h747i_discovery_bus.c **** /**
 567:./BSP/ST/stm32h747i_discovery_bus.c ****   * @brief  Compute I2C timing according current I2C clock source and required I2C clock.
 568:./BSP/ST/stm32h747i_discovery_bus.c ****   * @param  clock_src_freq I2C clock source in Hz.
 569:./BSP/ST/stm32h747i_discovery_bus.c ****   * @param  i2c_freq Required I2C clock in Hz.
 570:./BSP/ST/stm32h747i_discovery_bus.c ****   * @retval I2C timing or 0 in case of error.
 571:./BSP/ST/stm32h747i_discovery_bus.c ****   */
 572:./BSP/ST/stm32h747i_discovery_bus.c **** static uint32_t I2C_GetTiming(uint32_t clock_src_freq, uint32_t i2c_freq)
 573:./BSP/ST/stm32h747i_discovery_bus.c **** {
 894              		.loc 1 573 1
 895              		.cfi_startproc
 896              		@ args = 0, pretend = 0, frame = 24
 897              		@ frame_needed = 1, uses_anonymous_args = 0
 898 0000 80B5     		push	{r7, lr}
 899              	.LCFI42:
 900              		.cfi_def_cfa_offset 8
 901              		.cfi_offset 7, -8
 902              		.cfi_offset 14, -4
 903 0002 86B0     		sub	sp, sp, #24
 904              	.LCFI43:
 905              		.cfi_def_cfa_offset 32
 906 0004 00AF     		add	r7, sp, #0
 907              	.LCFI44:
 908              		.cfi_def_cfa_register 7
 909 0006 7860     		str	r0, [r7, #4]
 910 0008 3960     		str	r1, [r7]
 574:./BSP/ST/stm32h747i_discovery_bus.c ****   uint32_t ret = 0;
 911              		.loc 1 574 12
 912 000a 0023     		movs	r3, #0
 913 000c 7B61     		str	r3, [r7, #20]
 575:./BSP/ST/stm32h747i_discovery_bus.c ****   uint32_t speed;
 576:./BSP/ST/stm32h747i_discovery_bus.c ****   uint32_t idx;
 577:./BSP/ST/stm32h747i_discovery_bus.c **** 
 578:./BSP/ST/stm32h747i_discovery_bus.c ****   if((clock_src_freq != 0U) && (i2c_freq != 0U))
 914              		.loc 1 578 5
 915 000e 7B68     		ldr	r3, [r7, #4]
 916 0010 002B     		cmp	r3, #0
 917 0012 6BD0     		beq	.L53
 918              		.loc 1 578 29 discriminator 1
 919 0014 3B68     		ldr	r3, [r7]
 920 0016 002B     		cmp	r3, #0
 921 0018 68D0     		beq	.L53
 579:./BSP/ST/stm32h747i_discovery_bus.c ****   {
 580:./BSP/ST/stm32h747i_discovery_bus.c ****     for ( speed = 0 ; speed <=  (uint32_t)I2C_SPEED_FREQ_FAST_PLUS ; speed++)
 922              		.loc 1 580 17
 923 001a 0023     		movs	r3, #0
 924 001c 3B61     		str	r3, [r7, #16]
 925              		.loc 1 580 5
 926 001e 60E0     		b	.L54
 927              	.L57:
ARM GAS  /tmp/ccR5kwXz.s 			page 27


 581:./BSP/ST/stm32h747i_discovery_bus.c ****     {
 582:./BSP/ST/stm32h747i_discovery_bus.c ****       if ((i2c_freq >= I2C_Charac[speed].freq_min) &&
 928              		.loc 1 582 41
 929 0020 354A     		ldr	r2, .L60
 930 0022 3B69     		ldr	r3, [r7, #16]
 931 0024 2C21     		movs	r1, #44
 932 0026 01FB03F3 		mul	r3, r1, r3
 933 002a 1344     		add	r3, r3, r2
 934 002c 0433     		adds	r3, r3, #4
 935 002e 1B68     		ldr	r3, [r3]
 936              		.loc 1 582 10
 937 0030 3A68     		ldr	r2, [r7]
 938 0032 9A42     		cmp	r2, r3
 939 0034 52D3     		bcc	.L55
 583:./BSP/ST/stm32h747i_discovery_bus.c ****           (i2c_freq <= I2C_Charac[speed].freq_max))
 940              		.loc 1 583 41 discriminator 1
 941 0036 304A     		ldr	r2, .L60
 942 0038 3B69     		ldr	r3, [r7, #16]
 943 003a 2C21     		movs	r1, #44
 944 003c 01FB03F3 		mul	r3, r1, r3
 945 0040 1344     		add	r3, r3, r2
 946 0042 0833     		adds	r3, r3, #8
 947 0044 1B68     		ldr	r3, [r3]
 582:./BSP/ST/stm32h747i_discovery_bus.c ****           (i2c_freq <= I2C_Charac[speed].freq_max))
 948              		.loc 1 582 52 discriminator 1
 949 0046 3A68     		ldr	r2, [r7]
 950 0048 9A42     		cmp	r2, r3
 951 004a 47D8     		bhi	.L55
 584:./BSP/ST/stm32h747i_discovery_bus.c ****       {
 585:./BSP/ST/stm32h747i_discovery_bus.c ****         I2C_Compute_PRESC_SCLDEL_SDADEL(clock_src_freq, speed);
 952              		.loc 1 585 9
 953 004c 3969     		ldr	r1, [r7, #16]
 954 004e 7868     		ldr	r0, [r7, #4]
 955 0050 FFF7FEFF 		bl	I2C_Compute_PRESC_SCLDEL_SDADEL
 586:./BSP/ST/stm32h747i_discovery_bus.c ****         idx = I2C_Compute_SCLL_SCLH(clock_src_freq, speed);
 956              		.loc 1 586 15
 957 0054 3969     		ldr	r1, [r7, #16]
 958 0056 7868     		ldr	r0, [r7, #4]
 959 0058 FFF7FEFF 		bl	I2C_Compute_SCLL_SCLH
 960 005c F860     		str	r0, [r7, #12]
 587:./BSP/ST/stm32h747i_discovery_bus.c **** 
 588:./BSP/ST/stm32h747i_discovery_bus.c ****         if (idx < I2C_VALID_TIMING_NBR)
 961              		.loc 1 588 12
 962 005e FB68     		ldr	r3, [r7, #12]
 963 0060 7F2B     		cmp	r3, #127
 964 0062 42D8     		bhi	.L59
 589:./BSP/ST/stm32h747i_discovery_bus.c ****         {
 590:./BSP/ST/stm32h747i_discovery_bus.c ****           ret = ((I2c_valid_timing[idx].presc  & 0x0FU) << 28) |\
 965              		.loc 1 590 40
 966 0064 2549     		ldr	r1, .L60+4
 967 0066 FA68     		ldr	r2, [r7, #12]
 968 0068 1346     		mov	r3, r2
 969 006a 9B00     		lsls	r3, r3, #2
 970 006c 1344     		add	r3, r3, r2
 971 006e 9B00     		lsls	r3, r3, #2
 972 0070 0B44     		add	r3, r3, r1
 973 0072 1B68     		ldr	r3, [r3]
ARM GAS  /tmp/ccR5kwXz.s 			page 28


 974              		.loc 1 590 57
 975 0074 1907     		lsls	r1, r3, #28
 591:./BSP/ST/stm32h747i_discovery_bus.c ****                 ((I2c_valid_timing[idx].tscldel & 0x0FU) << 20) |\
 976              		.loc 1 591 40
 977 0076 2148     		ldr	r0, .L60+4
 978 0078 FA68     		ldr	r2, [r7, #12]
 979 007a 1346     		mov	r3, r2
 980 007c 9B00     		lsls	r3, r3, #2
 981 007e 1344     		add	r3, r3, r2
 982 0080 9B00     		lsls	r3, r3, #2
 983 0082 0344     		add	r3, r3, r0
 984 0084 0433     		adds	r3, r3, #4
 985 0086 1B68     		ldr	r3, [r3]
 986              		.loc 1 591 58
 987 0088 1B05     		lsls	r3, r3, #20
 988 008a 03F47003 		and	r3, r3, #15728640
 590:./BSP/ST/stm32h747i_discovery_bus.c ****                 ((I2c_valid_timing[idx].tscldel & 0x0FU) << 20) |\
 989              		.loc 1 590 64
 990 008e 1943     		orrs	r1, r1, r3
 592:./BSP/ST/stm32h747i_discovery_bus.c ****                 ((I2c_valid_timing[idx].tsdadel & 0x0FU) << 16) |\
 991              		.loc 1 592 40
 992 0090 1A48     		ldr	r0, .L60+4
 993 0092 FA68     		ldr	r2, [r7, #12]
 994 0094 1346     		mov	r3, r2
 995 0096 9B00     		lsls	r3, r3, #2
 996 0098 1344     		add	r3, r3, r2
 997 009a 9B00     		lsls	r3, r3, #2
 998 009c 0344     		add	r3, r3, r0
 999 009e 0833     		adds	r3, r3, #8
 1000 00a0 1B68     		ldr	r3, [r3]
 1001              		.loc 1 592 58
 1002 00a2 1B04     		lsls	r3, r3, #16
 1003 00a4 03F47023 		and	r3, r3, #983040
 591:./BSP/ST/stm32h747i_discovery_bus.c ****                 ((I2c_valid_timing[idx].tscldel & 0x0FU) << 20) |\
 1004              		.loc 1 591 65
 1005 00a8 1943     		orrs	r1, r1, r3
 593:./BSP/ST/stm32h747i_discovery_bus.c ****                 ((I2c_valid_timing[idx].sclh & 0xFFU) << 8) |\
 1006              		.loc 1 593 40
 1007 00aa 1448     		ldr	r0, .L60+4
 1008 00ac FA68     		ldr	r2, [r7, #12]
 1009 00ae 1346     		mov	r3, r2
 1010 00b0 9B00     		lsls	r3, r3, #2
 1011 00b2 1344     		add	r3, r3, r2
 1012 00b4 9B00     		lsls	r3, r3, #2
 1013 00b6 0344     		add	r3, r3, r0
 1014 00b8 0C33     		adds	r3, r3, #12
 1015 00ba 1B68     		ldr	r3, [r3]
 1016              		.loc 1 593 55
 1017 00bc 1B02     		lsls	r3, r3, #8
 1018 00be 9BB2     		uxth	r3, r3
 592:./BSP/ST/stm32h747i_discovery_bus.c ****                 ((I2c_valid_timing[idx].tsdadel & 0x0FU) << 16) |\
 1019              		.loc 1 592 65
 1020 00c0 1943     		orrs	r1, r1, r3
 594:./BSP/ST/stm32h747i_discovery_bus.c ****                 ((I2c_valid_timing[idx].scll & 0xFFU) << 0);
 1021              		.loc 1 594 40
 1022 00c2 0E48     		ldr	r0, .L60+4
 1023 00c4 FA68     		ldr	r2, [r7, #12]
ARM GAS  /tmp/ccR5kwXz.s 			page 29


 1024 00c6 1346     		mov	r3, r2
 1025 00c8 9B00     		lsls	r3, r3, #2
 1026 00ca 1344     		add	r3, r3, r2
 1027 00cc 9B00     		lsls	r3, r3, #2
 1028 00ce 0344     		add	r3, r3, r0
 1029 00d0 1033     		adds	r3, r3, #16
 1030 00d2 1B68     		ldr	r3, [r3]
 1031              		.loc 1 594 55
 1032 00d4 DBB2     		uxtb	r3, r3
 590:./BSP/ST/stm32h747i_discovery_bus.c ****                 ((I2c_valid_timing[idx].tscldel & 0x0FU) << 20) |\
 1033              		.loc 1 590 15
 1034 00d6 0B43     		orrs	r3, r3, r1
 1035 00d8 7B61     		str	r3, [r7, #20]
 595:./BSP/ST/stm32h747i_discovery_bus.c ****         }
 596:./BSP/ST/stm32h747i_discovery_bus.c ****         break;
 1036              		.loc 1 596 9
 1037 00da 06E0     		b	.L59
 1038              	.L55:
 580:./BSP/ST/stm32h747i_discovery_bus.c ****     {
 1039              		.loc 1 580 75 discriminator 2
 1040 00dc 3B69     		ldr	r3, [r7, #16]
 1041 00de 0133     		adds	r3, r3, #1
 1042 00e0 3B61     		str	r3, [r7, #16]
 1043              	.L54:
 580:./BSP/ST/stm32h747i_discovery_bus.c ****     {
 1044              		.loc 1 580 5 discriminator 1
 1045 00e2 3B69     		ldr	r3, [r7, #16]
 1046 00e4 022B     		cmp	r3, #2
 1047 00e6 9BD9     		bls	.L57
 1048 00e8 00E0     		b	.L53
 1049              	.L59:
 1050              		.loc 1 596 9
 1051 00ea 00BF     		nop
 1052              	.L53:
 597:./BSP/ST/stm32h747i_discovery_bus.c ****       }
 598:./BSP/ST/stm32h747i_discovery_bus.c ****     }
 599:./BSP/ST/stm32h747i_discovery_bus.c ****   }
 600:./BSP/ST/stm32h747i_discovery_bus.c **** 
 601:./BSP/ST/stm32h747i_discovery_bus.c ****   return ret;
 1053              		.loc 1 601 10
 1054 00ec 7B69     		ldr	r3, [r7, #20]
 602:./BSP/ST/stm32h747i_discovery_bus.c **** }
 1055              		.loc 1 602 1
 1056 00ee 1846     		mov	r0, r3
 1057 00f0 1837     		adds	r7, r7, #24
 1058              	.LCFI45:
 1059              		.cfi_def_cfa_offset 8
 1060 00f2 BD46     		mov	sp, r7
 1061              	.LCFI46:
 1062              		.cfi_def_cfa_register 13
 1063              		@ sp needed
 1064 00f4 80BD     		pop	{r7, pc}
 1065              	.L61:
 1066 00f6 00BF     		.align	2
 1067              	.L60:
 1068 00f8 00000000 		.word	I2C_Charac
 1069 00fc 00000000 		.word	I2c_valid_timing
ARM GAS  /tmp/ccR5kwXz.s 			page 30


 1070              		.cfi_endproc
 1071              	.LFE340:
 1073              		.section	.text.I2C_Compute_PRESC_SCLDEL_SDADEL,"ax",%progbits
 1074              		.align	1
 1075              		.syntax unified
 1076              		.thumb
 1077              		.thumb_func
 1078              		.fpu fpv5-d16
 1080              	I2C_Compute_PRESC_SCLDEL_SDADEL:
 1081              	.LFB341:
 603:./BSP/ST/stm32h747i_discovery_bus.c **** 
 604:./BSP/ST/stm32h747i_discovery_bus.c **** /**
 605:./BSP/ST/stm32h747i_discovery_bus.c ****   * @brief  Compute PRESC, SCLDEL and SDADEL.
 606:./BSP/ST/stm32h747i_discovery_bus.c ****   * @param  clock_src_freq I2C source clock in HZ.
 607:./BSP/ST/stm32h747i_discovery_bus.c ****   * @param  I2C_speed I2C frequency (index).
 608:./BSP/ST/stm32h747i_discovery_bus.c ****   * @retval None.
 609:./BSP/ST/stm32h747i_discovery_bus.c ****   */
 610:./BSP/ST/stm32h747i_discovery_bus.c **** static void I2C_Compute_PRESC_SCLDEL_SDADEL(uint32_t clock_src_freq, uint32_t I2C_speed)
 611:./BSP/ST/stm32h747i_discovery_bus.c **** {
 1082              		.loc 1 611 1
 1083              		.cfi_startproc
 1084              		@ args = 0, pretend = 0, frame = 56
 1085              		@ frame_needed = 1, uses_anonymous_args = 0
 1086              		@ link register save eliminated.
 1087 0000 80B4     		push	{r7}
 1088              	.LCFI47:
 1089              		.cfi_def_cfa_offset 4
 1090              		.cfi_offset 7, -4
 1091 0002 8FB0     		sub	sp, sp, #60
 1092              	.LCFI48:
 1093              		.cfi_def_cfa_offset 64
 1094 0004 00AF     		add	r7, sp, #0
 1095              	.LCFI49:
 1096              		.cfi_def_cfa_register 7
 1097 0006 7860     		str	r0, [r7, #4]
 1098 0008 3960     		str	r1, [r7]
 612:./BSP/ST/stm32h747i_discovery_bus.c ****   uint32_t prev_presc = I2C_PRESC_MAX;
 1099              		.loc 1 612 12
 1100 000a 1023     		movs	r3, #16
 1101 000c 7B63     		str	r3, [r7, #52]
 613:./BSP/ST/stm32h747i_discovery_bus.c ****   uint32_t ti2cclk;
 614:./BSP/ST/stm32h747i_discovery_bus.c ****   int32_t  tsdadel_min, tsdadel_max;
 615:./BSP/ST/stm32h747i_discovery_bus.c ****   int32_t  tscldel_min;
 616:./BSP/ST/stm32h747i_discovery_bus.c ****   uint32_t presc, scldel, sdadel;
 617:./BSP/ST/stm32h747i_discovery_bus.c ****   uint32_t tafdel_min, tafdel_max;
 618:./BSP/ST/stm32h747i_discovery_bus.c **** 
 619:./BSP/ST/stm32h747i_discovery_bus.c ****   ti2cclk   = (SEC2NSEC + (clock_src_freq / 2U))/ clock_src_freq;
 1102              		.loc 1 619 43
 1103 000e 7B68     		ldr	r3, [r7, #4]
 1104 0010 5A08     		lsrs	r2, r3, #1
 1105              		.loc 1 619 25
 1106 0012 6E4B     		ldr	r3, .L75
 1107 0014 1344     		add	r3, r3, r2
 1108              		.loc 1 619 13
 1109 0016 7A68     		ldr	r2, [r7, #4]
 1110 0018 B3FBF2F3 		udiv	r3, r3, r2
 1111 001c FB61     		str	r3, [r7, #28]
ARM GAS  /tmp/ccR5kwXz.s 			page 31


 620:./BSP/ST/stm32h747i_discovery_bus.c **** 
 621:./BSP/ST/stm32h747i_discovery_bus.c ****   tafdel_min = I2C_ANALOG_FILTER_DELAY_MIN;
 1112              		.loc 1 621 14
 1113 001e 3223     		movs	r3, #50
 1114 0020 BB61     		str	r3, [r7, #24]
 622:./BSP/ST/stm32h747i_discovery_bus.c ****   tafdel_max = I2C_ANALOG_FILTER_DELAY_MAX;
 1115              		.loc 1 622 14
 1116 0022 4FF48273 		mov	r3, #260
 1117 0026 7B61     		str	r3, [r7, #20]
 623:./BSP/ST/stm32h747i_discovery_bus.c **** 
 624:./BSP/ST/stm32h747i_discovery_bus.c ****   /* tDNF = DNF x tI2CCLK
 625:./BSP/ST/stm32h747i_discovery_bus.c ****      tPRESC = (PRESC+1) x tI2CCLK
 626:./BSP/ST/stm32h747i_discovery_bus.c ****      SDADEL >= {tf +tHD;DAT(min) - tAF(min) - tDNF - [3 x tI2CCLK]} / {tPRESC}
 627:./BSP/ST/stm32h747i_discovery_bus.c ****      SDADEL <= {tVD;DAT(max) - tr - tAF(max) - tDNF- [4 x tI2CCLK]} / {tPRESC} */
 628:./BSP/ST/stm32h747i_discovery_bus.c **** 
 629:./BSP/ST/stm32h747i_discovery_bus.c ****   tsdadel_min = (int32_t)I2C_Charac[I2C_speed].tfall + (int32_t)I2C_Charac[I2C_speed].hddat_min -
 1118              		.loc 1 629 47
 1119 0028 694A     		ldr	r2, .L75+4
 1120 002a 3B68     		ldr	r3, [r7]
 1121 002c 2C21     		movs	r1, #44
 1122 002e 01FB03F3 		mul	r3, r1, r3
 1123 0032 1344     		add	r3, r3, r2
 1124 0034 2433     		adds	r3, r3, #36
 1125 0036 1B68     		ldr	r3, [r3]
 1126              		.loc 1 629 17
 1127 0038 1846     		mov	r0, r3
 1128              		.loc 1 629 86
 1129 003a 654A     		ldr	r2, .L75+4
 1130 003c 3B68     		ldr	r3, [r7]
 1131 003e 2C21     		movs	r1, #44
 1132 0040 01FB03F3 		mul	r3, r1, r3
 1133 0044 1344     		add	r3, r3, r2
 1134 0046 0C33     		adds	r3, r3, #12
 1135 0048 1B68     		ldr	r3, [r3]
 1136              		.loc 1 629 54
 1137 004a C218     		adds	r2, r0, r3
 630:./BSP/ST/stm32h747i_discovery_bus.c ****     (int32_t)tafdel_min - (int32_t)(((int32_t)I2C_Charac[I2C_speed].dnf + 3) * (int32_t)ti2cclk);
 1138              		.loc 1 630 5
 1139 004c BB69     		ldr	r3, [r7, #24]
 629:./BSP/ST/stm32h747i_discovery_bus.c ****     (int32_t)tafdel_min - (int32_t)(((int32_t)I2C_Charac[I2C_speed].dnf + 3) * (int32_t)ti2cclk);
 1140              		.loc 1 629 97
 1141 004e D21A     		subs	r2, r2, r3
 1142              		.loc 1 630 68
 1143 0050 5F49     		ldr	r1, .L75+4
 1144 0052 3B68     		ldr	r3, [r7]
 1145 0054 2C20     		movs	r0, #44
 1146 0056 00FB03F3 		mul	r3, r0, r3
 1147 005a 0B44     		add	r3, r3, r1
 1148 005c 2833     		adds	r3, r3, #40
 1149 005e 1B68     		ldr	r3, [r3]
 1150              		.loc 1 630 73
 1151 0060 0333     		adds	r3, r3, #3
 1152              		.loc 1 630 80
 1153 0062 F969     		ldr	r1, [r7, #28]
 1154              		.loc 1 630 27
 1155 0064 01FB03F3 		mul	r3, r1, r3
 629:./BSP/ST/stm32h747i_discovery_bus.c ****     (int32_t)tafdel_min - (int32_t)(((int32_t)I2C_Charac[I2C_speed].dnf + 3) * (int32_t)ti2cclk);
ARM GAS  /tmp/ccR5kwXz.s 			page 32


 1156              		.loc 1 629 15
 1157 0068 D31A     		subs	r3, r2, r3
 1158 006a 3B63     		str	r3, [r7, #48]
 631:./BSP/ST/stm32h747i_discovery_bus.c **** 
 632:./BSP/ST/stm32h747i_discovery_bus.c ****   tsdadel_max = (int32_t)I2C_Charac[I2C_speed].vddat_max - (int32_t)I2C_Charac[I2C_speed].trise -
 1159              		.loc 1 632 47
 1160 006c 584A     		ldr	r2, .L75+4
 1161 006e 3B68     		ldr	r3, [r7]
 1162 0070 2C21     		movs	r1, #44
 1163 0072 01FB03F3 		mul	r3, r1, r3
 1164 0076 1344     		add	r3, r3, r2
 1165 0078 1033     		adds	r3, r3, #16
 1166 007a 1B68     		ldr	r3, [r3]
 1167              		.loc 1 632 17
 1168 007c 1846     		mov	r0, r3
 1169              		.loc 1 632 90
 1170 007e 544A     		ldr	r2, .L75+4
 1171 0080 3B68     		ldr	r3, [r7]
 1172 0082 2C21     		movs	r1, #44
 1173 0084 01FB03F3 		mul	r3, r1, r3
 1174 0088 1344     		add	r3, r3, r2
 1175 008a 2033     		adds	r3, r3, #32
 1176 008c 1B68     		ldr	r3, [r3]
 1177              		.loc 1 632 58
 1178 008e C21A     		subs	r2, r0, r3
 633:./BSP/ST/stm32h747i_discovery_bus.c ****     (int32_t)tafdel_max - (int32_t)(((int32_t)I2C_Charac[I2C_speed].dnf + 4) * (int32_t)ti2cclk);
 1179              		.loc 1 633 5
 1180 0090 7B69     		ldr	r3, [r7, #20]
 632:./BSP/ST/stm32h747i_discovery_bus.c ****     (int32_t)tafdel_max - (int32_t)(((int32_t)I2C_Charac[I2C_speed].dnf + 4) * (int32_t)ti2cclk);
 1181              		.loc 1 632 97
 1182 0092 D21A     		subs	r2, r2, r3
 1183              		.loc 1 633 68
 1184 0094 4E49     		ldr	r1, .L75+4
 1185 0096 3B68     		ldr	r3, [r7]
 1186 0098 2C20     		movs	r0, #44
 1187 009a 00FB03F3 		mul	r3, r0, r3
 1188 009e 0B44     		add	r3, r3, r1
 1189 00a0 2833     		adds	r3, r3, #40
 1190 00a2 1B68     		ldr	r3, [r3]
 1191              		.loc 1 633 73
 1192 00a4 0433     		adds	r3, r3, #4
 1193              		.loc 1 633 80
 1194 00a6 F969     		ldr	r1, [r7, #28]
 1195              		.loc 1 633 27
 1196 00a8 01FB03F3 		mul	r3, r1, r3
 632:./BSP/ST/stm32h747i_discovery_bus.c ****     (int32_t)tafdel_max - (int32_t)(((int32_t)I2C_Charac[I2C_speed].dnf + 4) * (int32_t)ti2cclk);
 1197              		.loc 1 632 15
 1198 00ac D31A     		subs	r3, r2, r3
 1199 00ae FB62     		str	r3, [r7, #44]
 634:./BSP/ST/stm32h747i_discovery_bus.c **** 
 635:./BSP/ST/stm32h747i_discovery_bus.c **** 
 636:./BSP/ST/stm32h747i_discovery_bus.c ****   /* {[tr+ tSU;DAT(min)] / [tPRESC]} - 1 <= SCLDEL */
 637:./BSP/ST/stm32h747i_discovery_bus.c ****   tscldel_min = (int32_t)I2C_Charac[I2C_speed].trise + (int32_t)I2C_Charac[I2C_speed].sudat_min;
 1200              		.loc 1 637 47
 1201 00b0 474A     		ldr	r2, .L75+4
 1202 00b2 3B68     		ldr	r3, [r7]
 1203 00b4 2C21     		movs	r1, #44
ARM GAS  /tmp/ccR5kwXz.s 			page 33


 1204 00b6 01FB03F3 		mul	r3, r1, r3
 1205 00ba 1344     		add	r3, r3, r2
 1206 00bc 2033     		adds	r3, r3, #32
 1207 00be 1B68     		ldr	r3, [r3]
 1208              		.loc 1 637 17
 1209 00c0 1846     		mov	r0, r3
 1210              		.loc 1 637 86
 1211 00c2 434A     		ldr	r2, .L75+4
 1212 00c4 3B68     		ldr	r3, [r7]
 1213 00c6 2C21     		movs	r1, #44
 1214 00c8 01FB03F3 		mul	r3, r1, r3
 1215 00cc 1344     		add	r3, r3, r2
 1216 00ce 1433     		adds	r3, r3, #20
 1217 00d0 1B68     		ldr	r3, [r3]
 1218              		.loc 1 637 15
 1219 00d2 0344     		add	r3, r3, r0
 1220 00d4 3B61     		str	r3, [r7, #16]
 638:./BSP/ST/stm32h747i_discovery_bus.c **** 
 639:./BSP/ST/stm32h747i_discovery_bus.c ****   if (tsdadel_min <= 0)
 1221              		.loc 1 639 6
 1222 00d6 3B6B     		ldr	r3, [r7, #48]
 1223 00d8 002B     		cmp	r3, #0
 1224 00da 01DC     		bgt	.L63
 640:./BSP/ST/stm32h747i_discovery_bus.c ****   {
 641:./BSP/ST/stm32h747i_discovery_bus.c ****     tsdadel_min = 0;
 1225              		.loc 1 641 17
 1226 00dc 0023     		movs	r3, #0
 1227 00de 3B63     		str	r3, [r7, #48]
 1228              	.L63:
 642:./BSP/ST/stm32h747i_discovery_bus.c ****   }
 643:./BSP/ST/stm32h747i_discovery_bus.c **** 
 644:./BSP/ST/stm32h747i_discovery_bus.c ****   if (tsdadel_max <= 0)
 1229              		.loc 1 644 6
 1230 00e0 FB6A     		ldr	r3, [r7, #44]
 1231 00e2 002B     		cmp	r3, #0
 1232 00e4 01DC     		bgt	.L64
 645:./BSP/ST/stm32h747i_discovery_bus.c ****   {
 646:./BSP/ST/stm32h747i_discovery_bus.c ****     tsdadel_max = 0;
 1233              		.loc 1 646 17
 1234 00e6 0023     		movs	r3, #0
 1235 00e8 FB62     		str	r3, [r7, #44]
 1236              	.L64:
 647:./BSP/ST/stm32h747i_discovery_bus.c ****   }
 648:./BSP/ST/stm32h747i_discovery_bus.c **** 
 649:./BSP/ST/stm32h747i_discovery_bus.c ****   for (presc = 0; presc < I2C_PRESC_MAX; presc++)
 1237              		.loc 1 649 14
 1238 00ea 0023     		movs	r3, #0
 1239 00ec BB62     		str	r3, [r7, #40]
 1240              		.loc 1 649 3
 1241 00ee 62E0     		b	.L65
 1242              	.L73:
 650:./BSP/ST/stm32h747i_discovery_bus.c ****   {
 651:./BSP/ST/stm32h747i_discovery_bus.c ****     for (scldel = 0; scldel < I2C_SCLDEL_MAX; scldel++)
 1243              		.loc 1 651 17
 1244 00f0 0023     		movs	r3, #0
 1245 00f2 7B62     		str	r3, [r7, #36]
 1246              		.loc 1 651 5
ARM GAS  /tmp/ccR5kwXz.s 			page 34


 1247 00f4 59E0     		b	.L66
 1248              	.L72:
 1249              	.LBB4:
 652:./BSP/ST/stm32h747i_discovery_bus.c ****     {
 653:./BSP/ST/stm32h747i_discovery_bus.c ****       /* TSCLDEL = (SCLDEL+1) * (PRESC+1) * TI2CCLK */
 654:./BSP/ST/stm32h747i_discovery_bus.c ****       uint32_t tscldel = (scldel + 1U) * (presc + 1U) * ti2cclk;
 1250              		.loc 1 654 34
 1251 00f6 7B6A     		ldr	r3, [r7, #36]
 1252 00f8 0133     		adds	r3, r3, #1
 1253              		.loc 1 654 49
 1254 00fa BA6A     		ldr	r2, [r7, #40]
 1255 00fc 0132     		adds	r2, r2, #1
 1256              		.loc 1 654 40
 1257 00fe 02FB03F2 		mul	r2, r2, r3
 1258              		.loc 1 654 16
 1259 0102 FB69     		ldr	r3, [r7, #28]
 1260 0104 02FB03F3 		mul	r3, r2, r3
 1261 0108 FB60     		str	r3, [r7, #12]
 655:./BSP/ST/stm32h747i_discovery_bus.c **** 
 656:./BSP/ST/stm32h747i_discovery_bus.c ****       if (tscldel >= (uint32_t)tscldel_min)
 1262              		.loc 1 656 19
 1263 010a 3B69     		ldr	r3, [r7, #16]
 1264              		.loc 1 656 10
 1265 010c FA68     		ldr	r2, [r7, #12]
 1266 010e 9A42     		cmp	r2, r3
 1267 0110 48D3     		bcc	.L67
 657:./BSP/ST/stm32h747i_discovery_bus.c ****       {
 658:./BSP/ST/stm32h747i_discovery_bus.c ****         for (sdadel = 0; sdadel < I2C_SDADEL_MAX; sdadel++)
 1268              		.loc 1 658 21
 1269 0112 0023     		movs	r3, #0
 1270 0114 3B62     		str	r3, [r7, #32]
 1271              		.loc 1 658 9
 1272 0116 42E0     		b	.L68
 1273              	.L71:
 1274              	.LBB5:
 659:./BSP/ST/stm32h747i_discovery_bus.c ****         {
 660:./BSP/ST/stm32h747i_discovery_bus.c ****           /* TSDADEL = SDADEL * (PRESC+1) * TI2CCLK */
 661:./BSP/ST/stm32h747i_discovery_bus.c ****           uint32_t tsdadel = (sdadel * (presc + 1U)) * ti2cclk;
 1275              		.loc 1 661 47
 1276 0118 BB6A     		ldr	r3, [r7, #40]
 1277 011a 0133     		adds	r3, r3, #1
 1278              		.loc 1 661 38
 1279 011c 3A6A     		ldr	r2, [r7, #32]
 1280 011e 02FB03F2 		mul	r2, r2, r3
 1281              		.loc 1 661 20
 1282 0122 FB69     		ldr	r3, [r7, #28]
 1283 0124 02FB03F3 		mul	r3, r2, r3
 1284 0128 BB60     		str	r3, [r7, #8]
 662:./BSP/ST/stm32h747i_discovery_bus.c **** 
 663:./BSP/ST/stm32h747i_discovery_bus.c ****           if ((tsdadel >= (uint32_t)tsdadel_min) && (tsdadel <= (uint32_t)tsdadel_max))
 1285              		.loc 1 663 24
 1286 012a 3B6B     		ldr	r3, [r7, #48]
 1287              		.loc 1 663 14
 1288 012c BA68     		ldr	r2, [r7, #8]
 1289 012e 9A42     		cmp	r2, r3
 1290 0130 32D3     		bcc	.L69
 1291              		.loc 1 663 62 discriminator 1
ARM GAS  /tmp/ccR5kwXz.s 			page 35


 1292 0132 FB6A     		ldr	r3, [r7, #44]
 1293              		.loc 1 663 50 discriminator 1
 1294 0134 BA68     		ldr	r2, [r7, #8]
 1295 0136 9A42     		cmp	r2, r3
 1296 0138 2ED8     		bhi	.L69
 664:./BSP/ST/stm32h747i_discovery_bus.c ****           {
 665:./BSP/ST/stm32h747i_discovery_bus.c ****             if(presc != prev_presc)
 1297              		.loc 1 665 15
 1298 013a BA6A     		ldr	r2, [r7, #40]
 1299 013c 7B6B     		ldr	r3, [r7, #52]
 1300 013e 9A42     		cmp	r2, r3
 1301 0140 2AD0     		beq	.L69
 666:./BSP/ST/stm32h747i_discovery_bus.c ****             {
 667:./BSP/ST/stm32h747i_discovery_bus.c ****               I2c_valid_timing[I2c_valid_timing_nbr].presc = presc;
 1302              		.loc 1 667 53
 1303 0142 244B     		ldr	r3, .L75+8
 1304 0144 1A68     		ldr	r2, [r3]
 1305              		.loc 1 667 60
 1306 0146 2449     		ldr	r1, .L75+12
 1307 0148 1346     		mov	r3, r2
 1308 014a 9B00     		lsls	r3, r3, #2
 1309 014c 1344     		add	r3, r3, r2
 1310 014e 9B00     		lsls	r3, r3, #2
 1311 0150 0B44     		add	r3, r3, r1
 1312 0152 BA6A     		ldr	r2, [r7, #40]
 1313 0154 1A60     		str	r2, [r3]
 668:./BSP/ST/stm32h747i_discovery_bus.c ****               I2c_valid_timing[I2c_valid_timing_nbr].tscldel = scldel;
 1314              		.loc 1 668 53
 1315 0156 1F4B     		ldr	r3, .L75+8
 1316 0158 1A68     		ldr	r2, [r3]
 1317              		.loc 1 668 62
 1318 015a 1F49     		ldr	r1, .L75+12
 1319 015c 1346     		mov	r3, r2
 1320 015e 9B00     		lsls	r3, r3, #2
 1321 0160 1344     		add	r3, r3, r2
 1322 0162 9B00     		lsls	r3, r3, #2
 1323 0164 0B44     		add	r3, r3, r1
 1324 0166 0433     		adds	r3, r3, #4
 1325 0168 7A6A     		ldr	r2, [r7, #36]
 1326 016a 1A60     		str	r2, [r3]
 669:./BSP/ST/stm32h747i_discovery_bus.c ****               I2c_valid_timing[I2c_valid_timing_nbr].tsdadel = sdadel;
 1327              		.loc 1 669 53
 1328 016c 194B     		ldr	r3, .L75+8
 1329 016e 1A68     		ldr	r2, [r3]
 1330              		.loc 1 669 62
 1331 0170 1949     		ldr	r1, .L75+12
 1332 0172 1346     		mov	r3, r2
 1333 0174 9B00     		lsls	r3, r3, #2
 1334 0176 1344     		add	r3, r3, r2
 1335 0178 9B00     		lsls	r3, r3, #2
 1336 017a 0B44     		add	r3, r3, r1
 1337 017c 0833     		adds	r3, r3, #8
 1338 017e 3A6A     		ldr	r2, [r7, #32]
 1339 0180 1A60     		str	r2, [r3]
 670:./BSP/ST/stm32h747i_discovery_bus.c ****               prev_presc = presc;
 1340              		.loc 1 670 26
 1341 0182 BB6A     		ldr	r3, [r7, #40]
ARM GAS  /tmp/ccR5kwXz.s 			page 36


 1342 0184 7B63     		str	r3, [r7, #52]
 671:./BSP/ST/stm32h747i_discovery_bus.c ****               I2c_valid_timing_nbr ++;
 1343              		.loc 1 671 36
 1344 0186 134B     		ldr	r3, .L75+8
 1345 0188 1B68     		ldr	r3, [r3]
 1346 018a 0133     		adds	r3, r3, #1
 1347 018c 114A     		ldr	r2, .L75+8
 1348 018e 1360     		str	r3, [r2]
 672:./BSP/ST/stm32h747i_discovery_bus.c **** 
 673:./BSP/ST/stm32h747i_discovery_bus.c ****               if(I2c_valid_timing_nbr >= I2C_VALID_TIMING_NBR)
 1349              		.loc 1 673 39
 1350 0190 104B     		ldr	r3, .L75+8
 1351 0192 1B68     		ldr	r3, [r3]
 1352              		.loc 1 673 17
 1353 0194 7F2B     		cmp	r3, #127
 1354 0196 12D8     		bhi	.L74
 1355              	.L69:
 1356              	.LBE5:
 658:./BSP/ST/stm32h747i_discovery_bus.c ****         {
 1357              		.loc 1 658 57 discriminator 2
 1358 0198 3B6A     		ldr	r3, [r7, #32]
 1359 019a 0133     		adds	r3, r3, #1
 1360 019c 3B62     		str	r3, [r7, #32]
 1361              	.L68:
 658:./BSP/ST/stm32h747i_discovery_bus.c ****         {
 1362              		.loc 1 658 9 discriminator 1
 1363 019e 3B6A     		ldr	r3, [r7, #32]
 1364 01a0 0F2B     		cmp	r3, #15
 1365 01a2 B9D9     		bls	.L71
 1366              	.L67:
 1367              	.LBE4:
 651:./BSP/ST/stm32h747i_discovery_bus.c ****     {
 1368              		.loc 1 651 53 discriminator 2
 1369 01a4 7B6A     		ldr	r3, [r7, #36]
 1370 01a6 0133     		adds	r3, r3, #1
 1371 01a8 7B62     		str	r3, [r7, #36]
 1372              	.L66:
 651:./BSP/ST/stm32h747i_discovery_bus.c ****     {
 1373              		.loc 1 651 5 discriminator 1
 1374 01aa 7B6A     		ldr	r3, [r7, #36]
 1375 01ac 0F2B     		cmp	r3, #15
 1376 01ae A2D9     		bls	.L72
 649:./BSP/ST/stm32h747i_discovery_bus.c ****   {
 1377              		.loc 1 649 47 discriminator 2
 1378 01b0 BB6A     		ldr	r3, [r7, #40]
 1379 01b2 0133     		adds	r3, r3, #1
 1380 01b4 BB62     		str	r3, [r7, #40]
 1381              	.L65:
 649:./BSP/ST/stm32h747i_discovery_bus.c ****   {
 1382              		.loc 1 649 3 discriminator 1
 1383 01b6 BB6A     		ldr	r3, [r7, #40]
 1384 01b8 0F2B     		cmp	r3, #15
 1385 01ba 99D9     		bls	.L73
 1386 01bc 00E0     		b	.L62
 1387              	.L74:
 1388              	.LBB7:
 1389              	.LBB6:
ARM GAS  /tmp/ccR5kwXz.s 			page 37


 674:./BSP/ST/stm32h747i_discovery_bus.c ****               {
 675:./BSP/ST/stm32h747i_discovery_bus.c ****                 return;
 1390              		.loc 1 675 17
 1391 01be 00BF     		nop
 1392              	.L62:
 1393              	.LBE6:
 1394              	.LBE7:
 676:./BSP/ST/stm32h747i_discovery_bus.c ****               }
 677:./BSP/ST/stm32h747i_discovery_bus.c ****             }
 678:./BSP/ST/stm32h747i_discovery_bus.c ****           }
 679:./BSP/ST/stm32h747i_discovery_bus.c ****         }
 680:./BSP/ST/stm32h747i_discovery_bus.c ****       }
 681:./BSP/ST/stm32h747i_discovery_bus.c ****     }
 682:./BSP/ST/stm32h747i_discovery_bus.c ****   }
 683:./BSP/ST/stm32h747i_discovery_bus.c **** }
 1395              		.loc 1 683 1
 1396 01c0 3C37     		adds	r7, r7, #60
 1397              	.LCFI50:
 1398              		.cfi_def_cfa_offset 4
 1399 01c2 BD46     		mov	sp, r7
 1400              	.LCFI51:
 1401              		.cfi_def_cfa_register 13
 1402              		@ sp needed
 1403 01c4 5DF8047B 		ldr	r7, [sp], #4
 1404              	.LCFI52:
 1405              		.cfi_restore 7
 1406              		.cfi_def_cfa_offset 0
 1407 01c8 7047     		bx	lr
 1408              	.L76:
 1409 01ca 00BF     		.align	2
 1410              	.L75:
 1411 01cc 00CA9A3B 		.word	1000000000
 1412 01d0 00000000 		.word	I2C_Charac
 1413 01d4 00000000 		.word	I2c_valid_timing_nbr
 1414 01d8 00000000 		.word	I2c_valid_timing
 1415              		.cfi_endproc
 1416              	.LFE341:
 1418              		.section	.text.I2C_Compute_SCLL_SCLH,"ax",%progbits
 1419              		.align	1
 1420              		.syntax unified
 1421              		.thumb
 1422              		.thumb_func
 1423              		.fpu fpv5-d16
 1425              	I2C_Compute_SCLL_SCLH:
 1426              	.LFB342:
 684:./BSP/ST/stm32h747i_discovery_bus.c **** 
 685:./BSP/ST/stm32h747i_discovery_bus.c **** /**
 686:./BSP/ST/stm32h747i_discovery_bus.c ****   * @brief  Calculate SCLL and SCLH and find best configuration.
 687:./BSP/ST/stm32h747i_discovery_bus.c ****   * @param  clock_src_freq I2C source clock in HZ.
 688:./BSP/ST/stm32h747i_discovery_bus.c ****   * @param  I2C_speed I2C frequency (index).
 689:./BSP/ST/stm32h747i_discovery_bus.c ****   * @retval config index (0 to I2C_VALID_TIMING_NBR], 0xFFFFFFFF for no valid config.
 690:./BSP/ST/stm32h747i_discovery_bus.c ****   */
 691:./BSP/ST/stm32h747i_discovery_bus.c **** static uint32_t I2C_Compute_SCLL_SCLH (uint32_t clock_src_freq, uint32_t I2C_speed)
 692:./BSP/ST/stm32h747i_discovery_bus.c **** {
 1427              		.loc 1 692 1
 1428              		.cfi_startproc
 1429              		@ args = 0, pretend = 0, frame = 72
ARM GAS  /tmp/ccR5kwXz.s 			page 38


 1430              		@ frame_needed = 1, uses_anonymous_args = 0
 1431              		@ link register save eliminated.
 1432 0000 80B4     		push	{r7}
 1433              	.LCFI53:
 1434              		.cfi_def_cfa_offset 4
 1435              		.cfi_offset 7, -4
 1436 0002 93B0     		sub	sp, sp, #76
 1437              	.LCFI54:
 1438              		.cfi_def_cfa_offset 80
 1439 0004 00AF     		add	r7, sp, #0
 1440              	.LCFI55:
 1441              		.cfi_def_cfa_register 7
 1442 0006 7860     		str	r0, [r7, #4]
 1443 0008 3960     		str	r1, [r7]
 693:./BSP/ST/stm32h747i_discovery_bus.c ****  uint32_t ret = 0xFFFFFFFFU;
 1444              		.loc 1 693 11
 1445 000a 4FF0FF33 		mov	r3, #-1
 1446 000e 7B64     		str	r3, [r7, #68]
 694:./BSP/ST/stm32h747i_discovery_bus.c ****   uint32_t ti2cclk;
 695:./BSP/ST/stm32h747i_discovery_bus.c ****   uint32_t ti2cspeed;
 696:./BSP/ST/stm32h747i_discovery_bus.c ****   uint32_t prev_error;
 697:./BSP/ST/stm32h747i_discovery_bus.c ****   uint32_t dnf_delay;
 698:./BSP/ST/stm32h747i_discovery_bus.c ****   uint32_t clk_min, clk_max;
 699:./BSP/ST/stm32h747i_discovery_bus.c ****   uint32_t scll, sclh;
 700:./BSP/ST/stm32h747i_discovery_bus.c ****   uint32_t tafdel_min;
 701:./BSP/ST/stm32h747i_discovery_bus.c **** 
 702:./BSP/ST/stm32h747i_discovery_bus.c ****   ti2cclk   = (SEC2NSEC + (clock_src_freq / 2U))/ clock_src_freq;
 1447              		.loc 1 702 43
 1448 0010 7B68     		ldr	r3, [r7, #4]
 1449 0012 5A08     		lsrs	r2, r3, #1
 1450              		.loc 1 702 25
 1451 0014 7A4B     		ldr	r3, .L88
 1452 0016 1344     		add	r3, r3, r2
 1453              		.loc 1 702 13
 1454 0018 7A68     		ldr	r2, [r7, #4]
 1455 001a B3FBF2F3 		udiv	r3, r3, r2
 1456 001e FB62     		str	r3, [r7, #44]
 703:./BSP/ST/stm32h747i_discovery_bus.c ****   ti2cspeed   = (SEC2NSEC + (I2C_Charac[I2C_speed].freq / 2U))/ I2C_Charac[I2C_speed].freq;
 1457              		.loc 1 703 51
 1458 0020 784A     		ldr	r2, .L88+4
 1459 0022 3B68     		ldr	r3, [r7]
 1460 0024 2C21     		movs	r1, #44
 1461 0026 01FB03F3 		mul	r3, r1, r3
 1462 002a 1344     		add	r3, r3, r2
 1463 002c 1B68     		ldr	r3, [r3]
 1464              		.loc 1 703 57
 1465 002e 5A08     		lsrs	r2, r3, #1
 1466              		.loc 1 703 27
 1467 0030 734B     		ldr	r3, .L88
 1468 0032 1344     		add	r3, r3, r2
 1469              		.loc 1 703 86
 1470 0034 7349     		ldr	r1, .L88+4
 1471 0036 3A68     		ldr	r2, [r7]
 1472 0038 2C20     		movs	r0, #44
 1473 003a 00FB02F2 		mul	r2, r0, r2
 1474 003e 0A44     		add	r2, r2, r1
 1475 0040 1268     		ldr	r2, [r2]
ARM GAS  /tmp/ccR5kwXz.s 			page 39


 1476              		.loc 1 703 15
 1477 0042 B3FBF2F3 		udiv	r3, r3, r2
 1478 0046 BB62     		str	r3, [r7, #40]
 704:./BSP/ST/stm32h747i_discovery_bus.c **** 
 705:./BSP/ST/stm32h747i_discovery_bus.c ****   tafdel_min = I2C_ANALOG_FILTER_DELAY_MIN;
 1479              		.loc 1 705 14
 1480 0048 3223     		movs	r3, #50
 1481 004a 7B62     		str	r3, [r7, #36]
 706:./BSP/ST/stm32h747i_discovery_bus.c **** 
 707:./BSP/ST/stm32h747i_discovery_bus.c ****   /* tDNF = DNF x tI2CCLK */
 708:./BSP/ST/stm32h747i_discovery_bus.c ****   dnf_delay = I2C_Charac[I2C_speed].dnf * ti2cclk;
 1482              		.loc 1 708 36
 1483 004c 6D4A     		ldr	r2, .L88+4
 1484 004e 3B68     		ldr	r3, [r7]
 1485 0050 2C21     		movs	r1, #44
 1486 0052 01FB03F3 		mul	r3, r1, r3
 1487 0056 1344     		add	r3, r3, r2
 1488 0058 2833     		adds	r3, r3, #40
 1489 005a 1A68     		ldr	r2, [r3]
 1490              		.loc 1 708 13
 1491 005c FB6A     		ldr	r3, [r7, #44]
 1492 005e 02FB03F3 		mul	r3, r2, r3
 1493 0062 3B62     		str	r3, [r7, #32]
 709:./BSP/ST/stm32h747i_discovery_bus.c **** 
 710:./BSP/ST/stm32h747i_discovery_bus.c ****   clk_max = SEC2NSEC / I2C_Charac[I2C_speed].freq_min;
 1494              		.loc 1 710 45
 1495 0064 674A     		ldr	r2, .L88+4
 1496 0066 3B68     		ldr	r3, [r7]
 1497 0068 2C21     		movs	r1, #44
 1498 006a 01FB03F3 		mul	r3, r1, r3
 1499 006e 1344     		add	r3, r3, r2
 1500 0070 0433     		adds	r3, r3, #4
 1501 0072 1B68     		ldr	r3, [r3]
 1502              		.loc 1 710 11
 1503 0074 624A     		ldr	r2, .L88
 1504 0076 B2FBF3F3 		udiv	r3, r2, r3
 1505 007a FB61     		str	r3, [r7, #28]
 711:./BSP/ST/stm32h747i_discovery_bus.c ****   clk_min = SEC2NSEC / I2C_Charac[I2C_speed].freq_max;
 1506              		.loc 1 711 45
 1507 007c 614A     		ldr	r2, .L88+4
 1508 007e 3B68     		ldr	r3, [r7]
 1509 0080 2C21     		movs	r1, #44
 1510 0082 01FB03F3 		mul	r3, r1, r3
 1511 0086 1344     		add	r3, r3, r2
 1512 0088 0833     		adds	r3, r3, #8
 1513 008a 1B68     		ldr	r3, [r3]
 1514              		.loc 1 711 11
 1515 008c 5C4A     		ldr	r2, .L88
 1516 008e B2FBF3F3 		udiv	r3, r2, r3
 1517 0092 BB61     		str	r3, [r7, #24]
 712:./BSP/ST/stm32h747i_discovery_bus.c **** 
 713:./BSP/ST/stm32h747i_discovery_bus.c ****   prev_error = ti2cspeed;
 1518              		.loc 1 713 14
 1519 0094 BB6A     		ldr	r3, [r7, #40]
 1520 0096 3B64     		str	r3, [r7, #64]
 1521              	.LBB8:
 714:./BSP/ST/stm32h747i_discovery_bus.c **** 
ARM GAS  /tmp/ccR5kwXz.s 			page 40


 715:./BSP/ST/stm32h747i_discovery_bus.c ****   for (uint32_t count = 0; count < I2c_valid_timing_nbr; count++)
 1522              		.loc 1 715 17
 1523 0098 0023     		movs	r3, #0
 1524 009a 7B63     		str	r3, [r7, #52]
 1525              		.loc 1 715 3
 1526 009c A3E0     		b	.L78
 1527              	.L86:
 1528              	.LBB9:
 716:./BSP/ST/stm32h747i_discovery_bus.c ****   {
 717:./BSP/ST/stm32h747i_discovery_bus.c ****     /* tPRESC = (PRESC+1) x tI2CCLK*/
 718:./BSP/ST/stm32h747i_discovery_bus.c ****     uint32_t tpresc = (I2c_valid_timing[count].presc + 1U) * ti2cclk;
 1529              		.loc 1 718 47
 1530 009e 5A49     		ldr	r1, .L88+8
 1531 00a0 7A6B     		ldr	r2, [r7, #52]
 1532 00a2 1346     		mov	r3, r2
 1533 00a4 9B00     		lsls	r3, r3, #2
 1534 00a6 1344     		add	r3, r3, r2
 1535 00a8 9B00     		lsls	r3, r3, #2
 1536 00aa 0B44     		add	r3, r3, r1
 1537 00ac 1B68     		ldr	r3, [r3]
 1538              		.loc 1 718 54
 1539 00ae 5A1C     		adds	r2, r3, #1
 1540              		.loc 1 718 14
 1541 00b0 FB6A     		ldr	r3, [r7, #44]
 1542 00b2 02FB03F3 		mul	r3, r2, r3
 1543 00b6 7B61     		str	r3, [r7, #20]
 719:./BSP/ST/stm32h747i_discovery_bus.c **** 
 720:./BSP/ST/stm32h747i_discovery_bus.c ****     for (scll = 0; scll < I2C_SCLL_MAX; scll++)
 1544              		.loc 1 720 15
 1545 00b8 0023     		movs	r3, #0
 1546 00ba FB63     		str	r3, [r7, #60]
 1547              		.loc 1 720 5
 1548 00bc 8CE0     		b	.L79
 1549              	.L85:
 1550              	.LBB10:
 721:./BSP/ST/stm32h747i_discovery_bus.c ****     {
 722:./BSP/ST/stm32h747i_discovery_bus.c ****       /* tLOW(min) <= tAF(min) + tDNF + 2 x tI2CCLK + [(SCLL+1) x tPRESC ] */
 723:./BSP/ST/stm32h747i_discovery_bus.c ****       uint32_t tscl_l = tafdel_min + dnf_delay + (2U * ti2cclk) + ((scll + 1U) * tpresc);
 1551              		.loc 1 723 36
 1552 00be 7A6A     		ldr	r2, [r7, #36]
 1553 00c0 3B6A     		ldr	r3, [r7, #32]
 1554 00c2 1A44     		add	r2, r2, r3
 1555              		.loc 1 723 74
 1556 00c4 FB6B     		ldr	r3, [r7, #60]
 1557 00c6 0133     		adds	r3, r3, #1
 1558              		.loc 1 723 80
 1559 00c8 7969     		ldr	r1, [r7, #20]
 1560 00ca 01FB03F1 		mul	r1, r1, r3
 1561              		.loc 1 723 54
 1562 00ce FB6A     		ldr	r3, [r7, #44]
 1563 00d0 5B00     		lsls	r3, r3, #1
 1564              		.loc 1 723 65
 1565 00d2 0B44     		add	r3, r3, r1
 1566              		.loc 1 723 16
 1567 00d4 1344     		add	r3, r3, r2
 1568 00d6 3B61     		str	r3, [r7, #16]
 724:./BSP/ST/stm32h747i_discovery_bus.c **** 
ARM GAS  /tmp/ccR5kwXz.s 			page 41


 725:./BSP/ST/stm32h747i_discovery_bus.c **** 
 726:./BSP/ST/stm32h747i_discovery_bus.c ****       /* The I2CCLK period tI2CCLK must respect the following conditions:
 727:./BSP/ST/stm32h747i_discovery_bus.c ****       tI2CCLK < (tLOW - tfilters) / 4 and tI2CCLK < tHIGH */
 728:./BSP/ST/stm32h747i_discovery_bus.c ****       if ((tscl_l > I2C_Charac[I2C_speed].lscl_min) && (ti2cclk < ((tscl_l - tafdel_min - dnf_delay
 1569              		.loc 1 728 42
 1570 00d8 4A4A     		ldr	r2, .L88+4
 1571 00da 3B68     		ldr	r3, [r7]
 1572 00dc 2C21     		movs	r1, #44
 1573 00de 01FB03F3 		mul	r3, r1, r3
 1574 00e2 1344     		add	r3, r3, r2
 1575 00e4 1833     		adds	r3, r3, #24
 1576 00e6 1B68     		ldr	r3, [r3]
 1577              		.loc 1 728 10
 1578 00e8 3A69     		ldr	r2, [r7, #16]
 1579 00ea 9A42     		cmp	r2, r3
 1580 00ec 71D9     		bls	.L80
 1581              		.loc 1 728 76 discriminator 1
 1582 00ee 3A69     		ldr	r2, [r7, #16]
 1583 00f0 7B6A     		ldr	r3, [r7, #36]
 1584 00f2 D21A     		subs	r2, r2, r3
 1585              		.loc 1 728 89 discriminator 1
 1586 00f4 3B6A     		ldr	r3, [r7, #32]
 1587 00f6 D31A     		subs	r3, r2, r3
 1588              		.loc 1 728 102 discriminator 1
 1589 00f8 9B08     		lsrs	r3, r3, #2
 1590              		.loc 1 728 53 discriminator 1
 1591 00fa FA6A     		ldr	r2, [r7, #44]
 1592 00fc 9A42     		cmp	r2, r3
 1593 00fe 68D2     		bcs	.L80
 729:./BSP/ST/stm32h747i_discovery_bus.c ****       {
 730:./BSP/ST/stm32h747i_discovery_bus.c ****         for (sclh = 0; sclh < I2C_SCLH_MAX; sclh++)
 1594              		.loc 1 730 19
 1595 0100 0023     		movs	r3, #0
 1596 0102 BB63     		str	r3, [r7, #56]
 1597              		.loc 1 730 9
 1598 0104 62E0     		b	.L81
 1599              	.L84:
 1600              	.LBB11:
 731:./BSP/ST/stm32h747i_discovery_bus.c ****         {
 732:./BSP/ST/stm32h747i_discovery_bus.c ****           /* tHIGH(min) <= tAF(min) + tDNF + 2 x tI2CCLK + [(SCLH+1) x tPRESC] */
 733:./BSP/ST/stm32h747i_discovery_bus.c ****           uint32_t tscl_h = tafdel_min + dnf_delay + (2U * ti2cclk) + ((sclh + 1U) * tpresc);
 1601              		.loc 1 733 40
 1602 0106 7A6A     		ldr	r2, [r7, #36]
 1603 0108 3B6A     		ldr	r3, [r7, #32]
 1604 010a 1A44     		add	r2, r2, r3
 1605              		.loc 1 733 78
 1606 010c BB6B     		ldr	r3, [r7, #56]
 1607 010e 0133     		adds	r3, r3, #1
 1608              		.loc 1 733 84
 1609 0110 7969     		ldr	r1, [r7, #20]
 1610 0112 01FB03F1 		mul	r1, r1, r3
 1611              		.loc 1 733 58
 1612 0116 FB6A     		ldr	r3, [r7, #44]
 1613 0118 5B00     		lsls	r3, r3, #1
 1614              		.loc 1 733 69
 1615 011a 0B44     		add	r3, r3, r1
 1616              		.loc 1 733 20
ARM GAS  /tmp/ccR5kwXz.s 			page 42


 1617 011c 1344     		add	r3, r3, r2
 1618 011e FB60     		str	r3, [r7, #12]
 734:./BSP/ST/stm32h747i_discovery_bus.c **** 
 735:./BSP/ST/stm32h747i_discovery_bus.c ****           /* tSCL = tf + tLOW + tr + tHIGH */
 736:./BSP/ST/stm32h747i_discovery_bus.c ****           uint32_t tscl = tscl_l + tscl_h + I2C_Charac[I2C_speed].trise + I2C_Charac[I2C_speed].tfa
 1619              		.loc 1 736 34
 1620 0120 3A69     		ldr	r2, [r7, #16]
 1621 0122 FB68     		ldr	r3, [r7, #12]
 1622 0124 1A44     		add	r2, r2, r3
 1623              		.loc 1 736 66
 1624 0126 3749     		ldr	r1, .L88+4
 1625 0128 3B68     		ldr	r3, [r7]
 1626 012a 2C20     		movs	r0, #44
 1627 012c 00FB03F3 		mul	r3, r0, r3
 1628 0130 0B44     		add	r3, r3, r1
 1629 0132 2033     		adds	r3, r3, #32
 1630 0134 1B68     		ldr	r3, [r3]
 1631              		.loc 1 736 43
 1632 0136 1A44     		add	r2, r2, r3
 1633              		.loc 1 736 96
 1634 0138 3249     		ldr	r1, .L88+4
 1635 013a 3B68     		ldr	r3, [r7]
 1636 013c 2C20     		movs	r0, #44
 1637 013e 00FB03F3 		mul	r3, r0, r3
 1638 0142 0B44     		add	r3, r3, r1
 1639 0144 2433     		adds	r3, r3, #36
 1640 0146 1B68     		ldr	r3, [r3]
 1641              		.loc 1 736 20
 1642 0148 1344     		add	r3, r3, r2
 1643 014a BB60     		str	r3, [r7, #8]
 737:./BSP/ST/stm32h747i_discovery_bus.c **** 
 738:./BSP/ST/stm32h747i_discovery_bus.c ****           if ((tscl >= clk_min) && (tscl <= clk_max) && (tscl_h >= I2C_Charac[I2C_speed].hscl_min) 
 1644              		.loc 1 738 14
 1645 014c BA68     		ldr	r2, [r7, #8]
 1646 014e BB69     		ldr	r3, [r7, #24]
 1647 0150 9A42     		cmp	r2, r3
 1648 0152 38D3     		bcc	.L82
 1649              		.loc 1 738 33 discriminator 1
 1650 0154 BA68     		ldr	r2, [r7, #8]
 1651 0156 FB69     		ldr	r3, [r7, #28]
 1652 0158 9A42     		cmp	r2, r3
 1653 015a 34D8     		bhi	.L82
 1654              		.loc 1 738 89 discriminator 2
 1655 015c 294A     		ldr	r2, .L88+4
 1656 015e 3B68     		ldr	r3, [r7]
 1657 0160 2C21     		movs	r1, #44
 1658 0162 01FB03F3 		mul	r3, r1, r3
 1659 0166 1344     		add	r3, r3, r2
 1660 0168 1C33     		adds	r3, r3, #28
 1661 016a 1B68     		ldr	r3, [r3]
 1662              		.loc 1 738 54 discriminator 2
 1663 016c FA68     		ldr	r2, [r7, #12]
 1664 016e 9A42     		cmp	r2, r3
 1665 0170 29D3     		bcc	.L82
 1666              		.loc 1 738 100 discriminator 3
 1667 0172 FA6A     		ldr	r2, [r7, #44]
 1668 0174 FB68     		ldr	r3, [r7, #12]
ARM GAS  /tmp/ccR5kwXz.s 			page 43


 1669 0176 9A42     		cmp	r2, r3
 1670 0178 25D2     		bcs	.L82
 1671              	.LBB12:
 739:./BSP/ST/stm32h747i_discovery_bus.c ****           {
 740:./BSP/ST/stm32h747i_discovery_bus.c ****             int32_t error = (int32_t)tscl - (int32_t)ti2cspeed;
 1672              		.loc 1 740 29
 1673 017a BA68     		ldr	r2, [r7, #8]
 1674              		.loc 1 740 45
 1675 017c BB6A     		ldr	r3, [r7, #40]
 1676              		.loc 1 740 21
 1677 017e D31A     		subs	r3, r2, r3
 1678 0180 3B63     		str	r3, [r7, #48]
 741:./BSP/ST/stm32h747i_discovery_bus.c **** 
 742:./BSP/ST/stm32h747i_discovery_bus.c ****             if (error < 0)
 1679              		.loc 1 742 16
 1680 0182 3B6B     		ldr	r3, [r7, #48]
 1681 0184 002B     		cmp	r3, #0
 1682 0186 02DA     		bge	.L83
 743:./BSP/ST/stm32h747i_discovery_bus.c ****             {
 744:./BSP/ST/stm32h747i_discovery_bus.c ****               error = -error;
 1683              		.loc 1 744 21
 1684 0188 3B6B     		ldr	r3, [r7, #48]
 1685 018a 5B42     		rsbs	r3, r3, #0
 1686 018c 3B63     		str	r3, [r7, #48]
 1687              	.L83:
 745:./BSP/ST/stm32h747i_discovery_bus.c ****             }
 746:./BSP/ST/stm32h747i_discovery_bus.c **** 
 747:./BSP/ST/stm32h747i_discovery_bus.c ****             /* look for the timings with the lowest clock error */
 748:./BSP/ST/stm32h747i_discovery_bus.c ****             if ((uint32_t)error < prev_error)
 1688              		.loc 1 748 17
 1689 018e 3B6B     		ldr	r3, [r7, #48]
 1690              		.loc 1 748 16
 1691 0190 3A6C     		ldr	r2, [r7, #64]
 1692 0192 9A42     		cmp	r2, r3
 1693 0194 17D9     		bls	.L82
 749:./BSP/ST/stm32h747i_discovery_bus.c ****             {
 750:./BSP/ST/stm32h747i_discovery_bus.c ****               prev_error = (uint32_t)error;
 1694              		.loc 1 750 26
 1695 0196 3B6B     		ldr	r3, [r7, #48]
 1696 0198 3B64     		str	r3, [r7, #64]
 751:./BSP/ST/stm32h747i_discovery_bus.c ****               I2c_valid_timing[count].scll = scll;
 1697              		.loc 1 751 44
 1698 019a 1B49     		ldr	r1, .L88+8
 1699 019c 7A6B     		ldr	r2, [r7, #52]
 1700 019e 1346     		mov	r3, r2
 1701 01a0 9B00     		lsls	r3, r3, #2
 1702 01a2 1344     		add	r3, r3, r2
 1703 01a4 9B00     		lsls	r3, r3, #2
 1704 01a6 0B44     		add	r3, r3, r1
 1705 01a8 1033     		adds	r3, r3, #16
 1706 01aa FA6B     		ldr	r2, [r7, #60]
 1707 01ac 1A60     		str	r2, [r3]
 752:./BSP/ST/stm32h747i_discovery_bus.c ****               I2c_valid_timing[count].sclh = sclh;
 1708              		.loc 1 752 44
 1709 01ae 1649     		ldr	r1, .L88+8
 1710 01b0 7A6B     		ldr	r2, [r7, #52]
 1711 01b2 1346     		mov	r3, r2
ARM GAS  /tmp/ccR5kwXz.s 			page 44


 1712 01b4 9B00     		lsls	r3, r3, #2
 1713 01b6 1344     		add	r3, r3, r2
 1714 01b8 9B00     		lsls	r3, r3, #2
 1715 01ba 0B44     		add	r3, r3, r1
 1716 01bc 0C33     		adds	r3, r3, #12
 1717 01be BA6B     		ldr	r2, [r7, #56]
 1718 01c0 1A60     		str	r2, [r3]
 753:./BSP/ST/stm32h747i_discovery_bus.c ****               ret = count;
 1719              		.loc 1 753 19
 1720 01c2 7B6B     		ldr	r3, [r7, #52]
 1721 01c4 7B64     		str	r3, [r7, #68]
 1722              	.L82:
 1723              	.LBE12:
 1724              	.LBE11:
 730:./BSP/ST/stm32h747i_discovery_bus.c ****         {
 1725              		.loc 1 730 49 discriminator 2
 1726 01c6 BB6B     		ldr	r3, [r7, #56]
 1727 01c8 0133     		adds	r3, r3, #1
 1728 01ca BB63     		str	r3, [r7, #56]
 1729              	.L81:
 730:./BSP/ST/stm32h747i_discovery_bus.c ****         {
 1730              		.loc 1 730 9 discriminator 1
 1731 01cc BB6B     		ldr	r3, [r7, #56]
 1732 01ce FF2B     		cmp	r3, #255
 1733 01d0 99D9     		bls	.L84
 1734              	.L80:
 1735              	.LBE10:
 720:./BSP/ST/stm32h747i_discovery_bus.c ****     {
 1736              		.loc 1 720 45 discriminator 2
 1737 01d2 FB6B     		ldr	r3, [r7, #60]
 1738 01d4 0133     		adds	r3, r3, #1
 1739 01d6 FB63     		str	r3, [r7, #60]
 1740              	.L79:
 720:./BSP/ST/stm32h747i_discovery_bus.c ****     {
 1741              		.loc 1 720 5 discriminator 1
 1742 01d8 FB6B     		ldr	r3, [r7, #60]
 1743 01da FF2B     		cmp	r3, #255
 1744 01dc 7FF66FAF 		bls	.L85
 1745              	.LBE9:
 715:./BSP/ST/stm32h747i_discovery_bus.c ****   {
 1746              		.loc 1 715 63 discriminator 2
 1747 01e0 7B6B     		ldr	r3, [r7, #52]
 1748 01e2 0133     		adds	r3, r3, #1
 1749 01e4 7B63     		str	r3, [r7, #52]
 1750              	.L78:
 715:./BSP/ST/stm32h747i_discovery_bus.c ****   {
 1751              		.loc 1 715 34 discriminator 1
 1752 01e6 094B     		ldr	r3, .L88+12
 1753 01e8 1B68     		ldr	r3, [r3]
 715:./BSP/ST/stm32h747i_discovery_bus.c ****   {
 1754              		.loc 1 715 3 discriminator 1
 1755 01ea 7A6B     		ldr	r2, [r7, #52]
 1756 01ec 9A42     		cmp	r2, r3
 1757 01ee FFF456AF 		bcc	.L86
 1758              	.LBE8:
 754:./BSP/ST/stm32h747i_discovery_bus.c ****             }
 755:./BSP/ST/stm32h747i_discovery_bus.c ****           }
ARM GAS  /tmp/ccR5kwXz.s 			page 45


 756:./BSP/ST/stm32h747i_discovery_bus.c ****         }
 757:./BSP/ST/stm32h747i_discovery_bus.c ****       }
 758:./BSP/ST/stm32h747i_discovery_bus.c ****     }
 759:./BSP/ST/stm32h747i_discovery_bus.c ****   }
 760:./BSP/ST/stm32h747i_discovery_bus.c **** 
 761:./BSP/ST/stm32h747i_discovery_bus.c ****   return ret;
 1759              		.loc 1 761 10
 1760 01f2 7B6C     		ldr	r3, [r7, #68]
 762:./BSP/ST/stm32h747i_discovery_bus.c **** }
 1761              		.loc 1 762 1
 1762 01f4 1846     		mov	r0, r3
 1763 01f6 4C37     		adds	r7, r7, #76
 1764              	.LCFI56:
 1765              		.cfi_def_cfa_offset 4
 1766 01f8 BD46     		mov	sp, r7
 1767              	.LCFI57:
 1768              		.cfi_def_cfa_register 13
 1769              		@ sp needed
 1770 01fa 5DF8047B 		ldr	r7, [sp], #4
 1771              	.LCFI58:
 1772              		.cfi_restore 7
 1773              		.cfi_def_cfa_offset 0
 1774 01fe 7047     		bx	lr
 1775              	.L89:
 1776              		.align	2
 1777              	.L88:
 1778 0200 00CA9A3B 		.word	1000000000
 1779 0204 00000000 		.word	I2C_Charac
 1780 0208 00000000 		.word	I2c_valid_timing
 1781 020c 00000000 		.word	I2c_valid_timing_nbr
 1782              		.cfi_endproc
 1783              	.LFE342:
 1785              		.section	.text.I2C4_MspInit,"ax",%progbits
 1786              		.align	1
 1787              		.syntax unified
 1788              		.thumb
 1789              		.thumb_func
 1790              		.fpu fpv5-d16
 1792              	I2C4_MspInit:
 1793              	.LFB343:
 763:./BSP/ST/stm32h747i_discovery_bus.c **** 
 764:./BSP/ST/stm32h747i_discovery_bus.c **** /**
 765:./BSP/ST/stm32h747i_discovery_bus.c ****   * @brief  Initializes I2C MSP.
 766:./BSP/ST/stm32h747i_discovery_bus.c ****   * @param  phi2c  I2C handler
 767:./BSP/ST/stm32h747i_discovery_bus.c ****   * @retval None
 768:./BSP/ST/stm32h747i_discovery_bus.c ****   */
 769:./BSP/ST/stm32h747i_discovery_bus.c **** static void I2C4_MspInit(I2C_HandleTypeDef *phi2c)
 770:./BSP/ST/stm32h747i_discovery_bus.c **** {
 1794              		.loc 1 770 1
 1795              		.cfi_startproc
 1796              		@ args = 0, pretend = 0, frame = 40
 1797              		@ frame_needed = 1, uses_anonymous_args = 0
 1798 0000 80B5     		push	{r7, lr}
 1799              	.LCFI59:
 1800              		.cfi_def_cfa_offset 8
 1801              		.cfi_offset 7, -8
 1802              		.cfi_offset 14, -4
ARM GAS  /tmp/ccR5kwXz.s 			page 46


 1803 0002 8AB0     		sub	sp, sp, #40
 1804              	.LCFI60:
 1805              		.cfi_def_cfa_offset 48
 1806 0004 00AF     		add	r7, sp, #0
 1807              	.LCFI61:
 1808              		.cfi_def_cfa_register 7
 1809 0006 7860     		str	r0, [r7, #4]
 1810              	.LBB13:
 771:./BSP/ST/stm32h747i_discovery_bus.c ****   GPIO_InitTypeDef  gpio_init_structure;
 772:./BSP/ST/stm32h747i_discovery_bus.c **** 
 773:./BSP/ST/stm32h747i_discovery_bus.c ****   /* Prevent unused argument(s) compilation warning */
 774:./BSP/ST/stm32h747i_discovery_bus.c ****   UNUSED(phi2c);
 775:./BSP/ST/stm32h747i_discovery_bus.c **** 
 776:./BSP/ST/stm32h747i_discovery_bus.c ****   /*** Configure the GPIOs ***/
 777:./BSP/ST/stm32h747i_discovery_bus.c ****   /* Enable SCL GPIO clock */
 778:./BSP/ST/stm32h747i_discovery_bus.c ****   BUS_I2C4_SCL_GPIO_CLK_ENABLE();
 1811              		.loc 1 778 3
 1812 0008 314B     		ldr	r3, .L91
 1813 000a D3F8E030 		ldr	r3, [r3, #224]
 1814 000e 304A     		ldr	r2, .L91
 1815 0010 43F00803 		orr	r3, r3, #8
 1816 0014 C2F8E030 		str	r3, [r2, #224]
 1817 0018 2D4B     		ldr	r3, .L91
 1818 001a D3F8E030 		ldr	r3, [r3, #224]
 1819 001e 03F00803 		and	r3, r3, #8
 1820 0022 3B61     		str	r3, [r7, #16]
 1821 0024 3B69     		ldr	r3, [r7, #16]
 1822              	.LBE13:
 1823              	.LBB14:
 779:./BSP/ST/stm32h747i_discovery_bus.c ****   /* Enable SDA GPIO clock */
 780:./BSP/ST/stm32h747i_discovery_bus.c ****   BUS_I2C4_SDA_GPIO_CLK_ENABLE();
 1824              		.loc 1 780 3
 1825 0026 2A4B     		ldr	r3, .L91
 1826 0028 D3F8E030 		ldr	r3, [r3, #224]
 1827 002c 284A     		ldr	r2, .L91
 1828 002e 43F00803 		orr	r3, r3, #8
 1829 0032 C2F8E030 		str	r3, [r2, #224]
 1830 0036 264B     		ldr	r3, .L91
 1831 0038 D3F8E030 		ldr	r3, [r3, #224]
 1832 003c 03F00803 		and	r3, r3, #8
 1833 0040 FB60     		str	r3, [r7, #12]
 1834 0042 FB68     		ldr	r3, [r7, #12]
 1835              	.LBE14:
 781:./BSP/ST/stm32h747i_discovery_bus.c **** 
 782:./BSP/ST/stm32h747i_discovery_bus.c ****   /* Configure I2C Tx as alternate function */
 783:./BSP/ST/stm32h747i_discovery_bus.c ****   gpio_init_structure.Pin       = BUS_I2C4_SCL_PIN;
 1836              		.loc 1 783 33
 1837 0044 4FF48053 		mov	r3, #4096
 1838 0048 7B61     		str	r3, [r7, #20]
 784:./BSP/ST/stm32h747i_discovery_bus.c ****   gpio_init_structure.Mode      = GPIO_MODE_AF_OD;
 1839              		.loc 1 784 33
 1840 004a 1223     		movs	r3, #18
 1841 004c BB61     		str	r3, [r7, #24]
 785:./BSP/ST/stm32h747i_discovery_bus.c ****   gpio_init_structure.Pull      = GPIO_NOPULL;
 1842              		.loc 1 785 33
 1843 004e 0023     		movs	r3, #0
 1844 0050 FB61     		str	r3, [r7, #28]
ARM GAS  /tmp/ccR5kwXz.s 			page 47


 786:./BSP/ST/stm32h747i_discovery_bus.c ****   gpio_init_structure.Speed     = GPIO_SPEED_FREQ_HIGH;
 1845              		.loc 1 786 33
 1846 0052 0223     		movs	r3, #2
 1847 0054 3B62     		str	r3, [r7, #32]
 787:./BSP/ST/stm32h747i_discovery_bus.c ****   gpio_init_structure.Alternate = BUS_I2C4_SCL_AF;
 1848              		.loc 1 787 33
 1849 0056 0423     		movs	r3, #4
 1850 0058 7B62     		str	r3, [r7, #36]
 788:./BSP/ST/stm32h747i_discovery_bus.c ****   HAL_GPIO_Init(BUS_I2C4_SCL_GPIO_PORT, &gpio_init_structure);
 1851              		.loc 1 788 3
 1852 005a 07F11403 		add	r3, r7, #20
 1853 005e 1946     		mov	r1, r3
 1854 0060 1C48     		ldr	r0, .L91+4
 1855 0062 FFF7FEFF 		bl	HAL_GPIO_Init
 789:./BSP/ST/stm32h747i_discovery_bus.c **** 
 790:./BSP/ST/stm32h747i_discovery_bus.c ****   /* Configure I2C Rx as alternate function */
 791:./BSP/ST/stm32h747i_discovery_bus.c ****   gpio_init_structure.Pin       = BUS_I2C4_SDA_PIN;
 1856              		.loc 1 791 33
 1857 0066 4FF40053 		mov	r3, #8192
 1858 006a 7B61     		str	r3, [r7, #20]
 792:./BSP/ST/stm32h747i_discovery_bus.c ****   gpio_init_structure.Mode      = GPIO_MODE_AF_OD;
 1859              		.loc 1 792 33
 1860 006c 1223     		movs	r3, #18
 1861 006e BB61     		str	r3, [r7, #24]
 793:./BSP/ST/stm32h747i_discovery_bus.c ****   gpio_init_structure.Pull      = GPIO_NOPULL;
 1862              		.loc 1 793 33
 1863 0070 0023     		movs	r3, #0
 1864 0072 FB61     		str	r3, [r7, #28]
 794:./BSP/ST/stm32h747i_discovery_bus.c ****   gpio_init_structure.Speed     = GPIO_SPEED_FREQ_HIGH;
 1865              		.loc 1 794 33
 1866 0074 0223     		movs	r3, #2
 1867 0076 3B62     		str	r3, [r7, #32]
 795:./BSP/ST/stm32h747i_discovery_bus.c ****   gpio_init_structure.Alternate = BUS_I2C4_SDA_AF;
 1868              		.loc 1 795 33
 1869 0078 0423     		movs	r3, #4
 1870 007a 7B62     		str	r3, [r7, #36]
 796:./BSP/ST/stm32h747i_discovery_bus.c ****   HAL_GPIO_Init(BUS_I2C4_SDA_GPIO_PORT, &gpio_init_structure);
 1871              		.loc 1 796 3
 1872 007c 07F11403 		add	r3, r7, #20
 1873 0080 1946     		mov	r1, r3
 1874 0082 1448     		ldr	r0, .L91+4
 1875 0084 FFF7FEFF 		bl	HAL_GPIO_Init
 1876              	.LBB15:
 797:./BSP/ST/stm32h747i_discovery_bus.c **** 
 798:./BSP/ST/stm32h747i_discovery_bus.c ****   /*** Configure the I2C peripheral ***/
 799:./BSP/ST/stm32h747i_discovery_bus.c ****   /* Enable I2C clock */
 800:./BSP/ST/stm32h747i_discovery_bus.c ****   BUS_I2C4_CLK_ENABLE();
 1877              		.loc 1 800 3
 1878 0088 114B     		ldr	r3, .L91
 1879 008a D3F8F430 		ldr	r3, [r3, #244]
 1880 008e 104A     		ldr	r2, .L91
 1881 0090 43F08003 		orr	r3, r3, #128
 1882 0094 C2F8F430 		str	r3, [r2, #244]
 1883 0098 0D4B     		ldr	r3, .L91
 1884 009a D3F8F430 		ldr	r3, [r3, #244]
 1885 009e 03F08003 		and	r3, r3, #128
 1886 00a2 BB60     		str	r3, [r7, #8]
ARM GAS  /tmp/ccR5kwXz.s 			page 48


 1887 00a4 BB68     		ldr	r3, [r7, #8]
 1888              	.LBE15:
 801:./BSP/ST/stm32h747i_discovery_bus.c **** 
 802:./BSP/ST/stm32h747i_discovery_bus.c ****   /* Force the I2C peripheral clock reset */
 803:./BSP/ST/stm32h747i_discovery_bus.c ****   BUS_I2C4_FORCE_RESET();
 1889              		.loc 1 803 3
 1890 00a6 0A4B     		ldr	r3, .L91
 1891 00a8 D3F89C30 		ldr	r3, [r3, #156]
 1892 00ac 084A     		ldr	r2, .L91
 1893 00ae 43F08003 		orr	r3, r3, #128
 1894 00b2 C2F89C30 		str	r3, [r2, #156]
 804:./BSP/ST/stm32h747i_discovery_bus.c **** 
 805:./BSP/ST/stm32h747i_discovery_bus.c ****   /* Release the I2C peripheral clock reset */
 806:./BSP/ST/stm32h747i_discovery_bus.c ****   BUS_I2C4_RELEASE_RESET();
 1895              		.loc 1 806 3
 1896 00b6 064B     		ldr	r3, .L91
 1897 00b8 D3F89C30 		ldr	r3, [r3, #156]
 1898 00bc 044A     		ldr	r2, .L91
 1899 00be 23F08003 		bic	r3, r3, #128
 1900 00c2 C2F89C30 		str	r3, [r2, #156]
 807:./BSP/ST/stm32h747i_discovery_bus.c **** }
 1901              		.loc 1 807 1
 1902 00c6 00BF     		nop
 1903 00c8 2837     		adds	r7, r7, #40
 1904              	.LCFI62:
 1905              		.cfi_def_cfa_offset 8
 1906 00ca BD46     		mov	sp, r7
 1907              	.LCFI63:
 1908              		.cfi_def_cfa_register 13
 1909              		@ sp needed
 1910 00cc 80BD     		pop	{r7, pc}
 1911              	.L92:
 1912 00ce 00BF     		.align	2
 1913              	.L91:
 1914 00d0 00440258 		.word	1476543488
 1915 00d4 000C0258 		.word	1476529152
 1916              		.cfi_endproc
 1917              	.LFE343:
 1919              		.section	.text.I2C4_MspDeInit,"ax",%progbits
 1920              		.align	1
 1921              		.syntax unified
 1922              		.thumb
 1923              		.thumb_func
 1924              		.fpu fpv5-d16
 1926              	I2C4_MspDeInit:
 1927              	.LFB344:
 808:./BSP/ST/stm32h747i_discovery_bus.c **** 
 809:./BSP/ST/stm32h747i_discovery_bus.c **** /**
 810:./BSP/ST/stm32h747i_discovery_bus.c ****   * @brief  DeInitializes I2C MSP.
 811:./BSP/ST/stm32h747i_discovery_bus.c ****   * @param  phi2c  I2C handler
 812:./BSP/ST/stm32h747i_discovery_bus.c ****   * @retval None
 813:./BSP/ST/stm32h747i_discovery_bus.c ****   */
 814:./BSP/ST/stm32h747i_discovery_bus.c **** static void I2C4_MspDeInit(I2C_HandleTypeDef *phi2c)
 815:./BSP/ST/stm32h747i_discovery_bus.c **** {
 1928              		.loc 1 815 1
 1929              		.cfi_startproc
 1930              		@ args = 0, pretend = 0, frame = 32
ARM GAS  /tmp/ccR5kwXz.s 			page 49


 1931              		@ frame_needed = 1, uses_anonymous_args = 0
 1932 0000 80B5     		push	{r7, lr}
 1933              	.LCFI64:
 1934              		.cfi_def_cfa_offset 8
 1935              		.cfi_offset 7, -8
 1936              		.cfi_offset 14, -4
 1937 0002 88B0     		sub	sp, sp, #32
 1938              	.LCFI65:
 1939              		.cfi_def_cfa_offset 40
 1940 0004 00AF     		add	r7, sp, #0
 1941              	.LCFI66:
 1942              		.cfi_def_cfa_register 7
 1943 0006 7860     		str	r0, [r7, #4]
 816:./BSP/ST/stm32h747i_discovery_bus.c ****   GPIO_InitTypeDef  gpio_init_structure;
 817:./BSP/ST/stm32h747i_discovery_bus.c **** 
 818:./BSP/ST/stm32h747i_discovery_bus.c ****   /* Prevent unused argument(s) compilation warning */
 819:./BSP/ST/stm32h747i_discovery_bus.c ****   UNUSED(phi2c);
 820:./BSP/ST/stm32h747i_discovery_bus.c **** 
 821:./BSP/ST/stm32h747i_discovery_bus.c ****   /* Configure I2C Tx, Rx as alternate function */
 822:./BSP/ST/stm32h747i_discovery_bus.c ****   gpio_init_structure.Pin = BUS_I2C4_SCL_PIN;
 1944              		.loc 1 822 27
 1945 0008 4FF48053 		mov	r3, #4096
 1946 000c FB60     		str	r3, [r7, #12]
 823:./BSP/ST/stm32h747i_discovery_bus.c ****   HAL_GPIO_DeInit(BUS_I2C4_SCL_GPIO_PORT, gpio_init_structure.Pin );
 1947              		.loc 1 823 3
 1948 000e FB68     		ldr	r3, [r7, #12]
 1949 0010 1946     		mov	r1, r3
 1950 0012 0B48     		ldr	r0, .L94
 1951 0014 FFF7FEFF 		bl	HAL_GPIO_DeInit
 824:./BSP/ST/stm32h747i_discovery_bus.c ****   gpio_init_structure.Pin = BUS_I2C4_SDA_PIN;
 1952              		.loc 1 824 27
 1953 0018 4FF40053 		mov	r3, #8192
 1954 001c FB60     		str	r3, [r7, #12]
 825:./BSP/ST/stm32h747i_discovery_bus.c ****   HAL_GPIO_DeInit(BUS_I2C4_SDA_GPIO_PORT, gpio_init_structure.Pin);
 1955              		.loc 1 825 3
 1956 001e FB68     		ldr	r3, [r7, #12]
 1957 0020 1946     		mov	r1, r3
 1958 0022 0748     		ldr	r0, .L94
 1959 0024 FFF7FEFF 		bl	HAL_GPIO_DeInit
 826:./BSP/ST/stm32h747i_discovery_bus.c **** 
 827:./BSP/ST/stm32h747i_discovery_bus.c ****   /* Disable I2C clock */
 828:./BSP/ST/stm32h747i_discovery_bus.c ****   BUS_I2C4_CLK_DISABLE();
 1960              		.loc 1 828 3
 1961 0028 064B     		ldr	r3, .L94+4
 1962 002a D3F8F430 		ldr	r3, [r3, #244]
 1963 002e 054A     		ldr	r2, .L94+4
 1964 0030 23F08003 		bic	r3, r3, #128
 1965 0034 C2F8F430 		str	r3, [r2, #244]
 829:./BSP/ST/stm32h747i_discovery_bus.c **** }
 1966              		.loc 1 829 1
 1967 0038 00BF     		nop
 1968 003a 2037     		adds	r7, r7, #32
 1969              	.LCFI67:
 1970              		.cfi_def_cfa_offset 8
 1971 003c BD46     		mov	sp, r7
 1972              	.LCFI68:
 1973              		.cfi_def_cfa_register 13
ARM GAS  /tmp/ccR5kwXz.s 			page 50


 1974              		@ sp needed
 1975 003e 80BD     		pop	{r7, pc}
 1976              	.L95:
 1977              		.align	2
 1978              	.L94:
 1979 0040 000C0258 		.word	1476529152
 1980 0044 00440258 		.word	1476543488
 1981              		.cfi_endproc
 1982              	.LFE344:
 1984              		.section	.text.I2C4_WriteReg,"ax",%progbits
 1985              		.align	1
 1986              		.syntax unified
 1987              		.thumb
 1988              		.thumb_func
 1989              		.fpu fpv5-d16
 1991              	I2C4_WriteReg:
 1992              	.LFB345:
 830:./BSP/ST/stm32h747i_discovery_bus.c **** 
 831:./BSP/ST/stm32h747i_discovery_bus.c **** /**
 832:./BSP/ST/stm32h747i_discovery_bus.c ****   * @brief  Write a value in a register of the device through BUS.
 833:./BSP/ST/stm32h747i_discovery_bus.c ****   * @param  DevAddr    Device address on Bus.
 834:./BSP/ST/stm32h747i_discovery_bus.c ****   * @param  MemAddSize Size of internal memory address
 835:./BSP/ST/stm32h747i_discovery_bus.c ****   * @param  Reg        The target register address to write
 836:./BSP/ST/stm32h747i_discovery_bus.c ****   * @param  pData      The target register value to be written
 837:./BSP/ST/stm32h747i_discovery_bus.c ****   * @param  Length     data length in bytes
 838:./BSP/ST/stm32h747i_discovery_bus.c ****   * @retval BSP status
 839:./BSP/ST/stm32h747i_discovery_bus.c ****   */
 840:./BSP/ST/stm32h747i_discovery_bus.c **** static int32_t I2C4_WriteReg(uint16_t DevAddr, uint16_t Reg, uint16_t MemAddSize, uint8_t *pData, u
 841:./BSP/ST/stm32h747i_discovery_bus.c **** {
 1993              		.loc 1 841 1
 1994              		.cfi_startproc
 1995              		@ args = 4, pretend = 0, frame = 16
 1996              		@ frame_needed = 1, uses_anonymous_args = 0
 1997 0000 80B5     		push	{r7, lr}
 1998              	.LCFI69:
 1999              		.cfi_def_cfa_offset 8
 2000              		.cfi_offset 7, -8
 2001              		.cfi_offset 14, -4
 2002 0002 88B0     		sub	sp, sp, #32
 2003              	.LCFI70:
 2004              		.cfi_def_cfa_offset 40
 2005 0004 04AF     		add	r7, sp, #16
 2006              	.LCFI71:
 2007              		.cfi_def_cfa 7, 24
 2008 0006 7B60     		str	r3, [r7, #4]
 2009 0008 0346     		mov	r3, r0	@ movhi
 2010 000a FB81     		strh	r3, [r7, #14]	@ movhi
 2011 000c 0B46     		mov	r3, r1	@ movhi
 2012 000e BB81     		strh	r3, [r7, #12]	@ movhi
 2013 0010 1346     		mov	r3, r2	@ movhi
 2014 0012 7B81     		strh	r3, [r7, #10]	@ movhi
 842:./BSP/ST/stm32h747i_discovery_bus.c ****   if(HAL_I2C_Mem_Write(&hbus_i2c4, DevAddr, Reg, MemAddSize, pData, Length, 1000) == HAL_OK)
 2015              		.loc 1 842 6
 2016 0014 7889     		ldrh	r0, [r7, #10]
 2017 0016 BA89     		ldrh	r2, [r7, #12]
 2018 0018 F989     		ldrh	r1, [r7, #14]
 2019 001a 4FF47A73 		mov	r3, #1000
ARM GAS  /tmp/ccR5kwXz.s 			page 51


 2020 001e 0293     		str	r3, [sp, #8]
 2021 0020 3B8B     		ldrh	r3, [r7, #24]
 2022 0022 0193     		str	r3, [sp, #4]
 2023 0024 7B68     		ldr	r3, [r7, #4]
 2024 0026 0093     		str	r3, [sp]
 2025 0028 0346     		mov	r3, r0
 2026 002a 0748     		ldr	r0, .L99
 2027 002c FFF7FEFF 		bl	HAL_I2C_Mem_Write
 2028 0030 0346     		mov	r3, r0
 2029              		.loc 1 842 5
 2030 0032 002B     		cmp	r3, #0
 2031 0034 01D1     		bne	.L97
 843:./BSP/ST/stm32h747i_discovery_bus.c ****   {
 844:./BSP/ST/stm32h747i_discovery_bus.c ****     return BSP_ERROR_NONE;
 2032              		.loc 1 844 12
 2033 0036 0023     		movs	r3, #0
 2034 0038 01E0     		b	.L98
 2035              	.L97:
 845:./BSP/ST/stm32h747i_discovery_bus.c ****   }
 846:./BSP/ST/stm32h747i_discovery_bus.c **** 
 847:./BSP/ST/stm32h747i_discovery_bus.c ****   return BSP_ERROR_BUS_FAILURE;
 2036              		.loc 1 847 10
 2037 003a 6FF00703 		mvn	r3, #7
 2038              	.L98:
 848:./BSP/ST/stm32h747i_discovery_bus.c **** }
 2039              		.loc 1 848 1
 2040 003e 1846     		mov	r0, r3
 2041 0040 1037     		adds	r7, r7, #16
 2042              	.LCFI72:
 2043              		.cfi_def_cfa_offset 8
 2044 0042 BD46     		mov	sp, r7
 2045              	.LCFI73:
 2046              		.cfi_def_cfa_register 13
 2047              		@ sp needed
 2048 0044 80BD     		pop	{r7, pc}
 2049              	.L100:
 2050 0046 00BF     		.align	2
 2051              	.L99:
 2052 0048 00000000 		.word	hbus_i2c4
 2053              		.cfi_endproc
 2054              	.LFE345:
 2056              		.section	.text.I2C4_ReadReg,"ax",%progbits
 2057              		.align	1
 2058              		.syntax unified
 2059              		.thumb
 2060              		.thumb_func
 2061              		.fpu fpv5-d16
 2063              	I2C4_ReadReg:
 2064              	.LFB346:
 849:./BSP/ST/stm32h747i_discovery_bus.c **** 
 850:./BSP/ST/stm32h747i_discovery_bus.c **** /**
 851:./BSP/ST/stm32h747i_discovery_bus.c ****   * @brief  Read a register of the device through BUS
 852:./BSP/ST/stm32h747i_discovery_bus.c ****   * @param  DevAddr    Device address on BUS
 853:./BSP/ST/stm32h747i_discovery_bus.c ****   * @param  MemAddSize Size of internal memory address
 854:./BSP/ST/stm32h747i_discovery_bus.c ****   * @param  Reg        The target register address to read
 855:./BSP/ST/stm32h747i_discovery_bus.c ****   * @param  pData      The target register value to be read
 856:./BSP/ST/stm32h747i_discovery_bus.c ****   * @param  Length     data length in bytes
ARM GAS  /tmp/ccR5kwXz.s 			page 52


 857:./BSP/ST/stm32h747i_discovery_bus.c ****   * @retval BSP status
 858:./BSP/ST/stm32h747i_discovery_bus.c ****   */
 859:./BSP/ST/stm32h747i_discovery_bus.c **** static int32_t I2C4_ReadReg(uint16_t DevAddr, uint16_t Reg, uint16_t MemAddSize, uint8_t *pData, ui
 860:./BSP/ST/stm32h747i_discovery_bus.c **** {
 2065              		.loc 1 860 1
 2066              		.cfi_startproc
 2067              		@ args = 4, pretend = 0, frame = 16
 2068              		@ frame_needed = 1, uses_anonymous_args = 0
 2069 0000 80B5     		push	{r7, lr}
 2070              	.LCFI74:
 2071              		.cfi_def_cfa_offset 8
 2072              		.cfi_offset 7, -8
 2073              		.cfi_offset 14, -4
 2074 0002 88B0     		sub	sp, sp, #32
 2075              	.LCFI75:
 2076              		.cfi_def_cfa_offset 40
 2077 0004 04AF     		add	r7, sp, #16
 2078              	.LCFI76:
 2079              		.cfi_def_cfa 7, 24
 2080 0006 7B60     		str	r3, [r7, #4]
 2081 0008 0346     		mov	r3, r0	@ movhi
 2082 000a FB81     		strh	r3, [r7, #14]	@ movhi
 2083 000c 0B46     		mov	r3, r1	@ movhi
 2084 000e BB81     		strh	r3, [r7, #12]	@ movhi
 2085 0010 1346     		mov	r3, r2	@ movhi
 2086 0012 7B81     		strh	r3, [r7, #10]	@ movhi
 861:./BSP/ST/stm32h747i_discovery_bus.c ****   if (HAL_I2C_Mem_Read(&hbus_i2c4, DevAddr, Reg, MemAddSize, pData, Length, 1000) == HAL_OK)
 2087              		.loc 1 861 7
 2088 0014 7889     		ldrh	r0, [r7, #10]
 2089 0016 BA89     		ldrh	r2, [r7, #12]
 2090 0018 F989     		ldrh	r1, [r7, #14]
 2091 001a 4FF47A73 		mov	r3, #1000
 2092 001e 0293     		str	r3, [sp, #8]
 2093 0020 3B8B     		ldrh	r3, [r7, #24]
 2094 0022 0193     		str	r3, [sp, #4]
 2095 0024 7B68     		ldr	r3, [r7, #4]
 2096 0026 0093     		str	r3, [sp]
 2097 0028 0346     		mov	r3, r0
 2098 002a 0748     		ldr	r0, .L104
 2099 002c FFF7FEFF 		bl	HAL_I2C_Mem_Read
 2100 0030 0346     		mov	r3, r0
 2101              		.loc 1 861 6
 2102 0032 002B     		cmp	r3, #0
 2103 0034 01D1     		bne	.L102
 862:./BSP/ST/stm32h747i_discovery_bus.c ****   {
 863:./BSP/ST/stm32h747i_discovery_bus.c ****     return BSP_ERROR_NONE;
 2104              		.loc 1 863 12
 2105 0036 0023     		movs	r3, #0
 2106 0038 01E0     		b	.L103
 2107              	.L102:
 864:./BSP/ST/stm32h747i_discovery_bus.c ****   }
 865:./BSP/ST/stm32h747i_discovery_bus.c **** 
 866:./BSP/ST/stm32h747i_discovery_bus.c ****   return BSP_ERROR_BUS_FAILURE;
 2108              		.loc 1 866 10
 2109 003a 6FF00703 		mvn	r3, #7
 2110              	.L103:
 867:./BSP/ST/stm32h747i_discovery_bus.c **** }
ARM GAS  /tmp/ccR5kwXz.s 			page 53


 2111              		.loc 1 867 1
 2112 003e 1846     		mov	r0, r3
 2113 0040 1037     		adds	r7, r7, #16
 2114              	.LCFI77:
 2115              		.cfi_def_cfa_offset 8
 2116 0042 BD46     		mov	sp, r7
 2117              	.LCFI78:
 2118              		.cfi_def_cfa_register 13
 2119              		@ sp needed
 2120 0044 80BD     		pop	{r7, pc}
 2121              	.L105:
 2122 0046 00BF     		.align	2
 2123              	.L104:
 2124 0048 00000000 		.word	hbus_i2c4
 2125              		.cfi_endproc
 2126              	.LFE346:
 2128              		.text
 2129              	.Letext0:
 2130              		.file 2 "/usr/lib/gcc/arm-none-eabi/9.2.1/include/stdint.h"
 2131              		.file 3 "./Libraries/CMSIS/Core/Include/core_cm7.h"
 2132              		.file 4 "./Libraries/CMSIS/Device/ST/STM32H7xx/Include/system_stm32h7xx.h"
 2133              		.file 5 "./Libraries/CMSIS/Device/ST/STM32H7xx/Include/stm32h747xx.h"
 2134              		.file 6 "/usr/lib/gcc/arm-none-eabi/9.2.1/include/stddef.h"
 2135              		.file 7 "/usr/include/newlib/sys/_types.h"
 2136              		.file 8 "/usr/include/newlib/sys/reent.h"
 2137              		.file 9 "/usr/include/newlib/sys/lock.h"
 2138              		.file 10 "/usr/include/newlib/math.h"
 2139              		.file 11 "./Libraries/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_def.h"
 2140              		.file 12 "./Libraries/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_gpio.h"
 2141              		.file 13 "./Libraries/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_dma.h"
 2142              		.file 14 "./Libraries/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_flash.h"
 2143              		.file 15 "./Libraries/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_i2c.h"
 2144              		.file 16 "./Libraries/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_uart.h"
 2145              		.file 17 "./Libraries/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal.h"
 2146              		.file 18 "./Libraries/CMSIS/RTOS/cmsis_os.h"
 2147              		.file 19 "./BSP/ST/stm32h747i_discovery_bus.h"
ARM GAS  /tmp/ccR5kwXz.s 			page 54


DEFINED SYMBOLS
                            *ABS*:0000000000000000 stm32h747i_discovery_bus.c
     /tmp/ccR5kwXz.s:17     .rodata.I2C_Charac:0000000000000000 $d
     /tmp/ccR5kwXz.s:20     .rodata.I2C_Charac:0000000000000000 I2C_Charac
     /tmp/ccR5kwXz.s:55     .bss.I2c4InitCounter:0000000000000000 $d
     /tmp/ccR5kwXz.s:58     .bss.I2c4InitCounter:0000000000000000 I2c4InitCounter
     /tmp/ccR5kwXz.s:61     .bss.I2c_valid_timing:0000000000000000 $d
     /tmp/ccR5kwXz.s:64     .bss.I2c_valid_timing:0000000000000000 I2c_valid_timing
     /tmp/ccR5kwXz.s:67     .bss.I2c_valid_timing_nbr:0000000000000000 $d
     /tmp/ccR5kwXz.s:70     .bss.I2c_valid_timing_nbr:0000000000000000 I2c_valid_timing_nbr
     /tmp/ccR5kwXz.s:73     .bss.BspI2cSemaphore:0000000000000000 $d
     /tmp/ccR5kwXz.s:76     .bss.BspI2cSemaphore:0000000000000000 BspI2cSemaphore
                            *COM*:000000000000004c hbus_i2c4
     /tmp/ccR5kwXz.s:80     .text.BSP_I2C4_Init:0000000000000000 $t
     /tmp/ccR5kwXz.s:88     .text.BSP_I2C4_Init:0000000000000000 BSP_I2C4_Init
     /tmp/ccR5kwXz.s:1792   .text.I2C4_MspInit:0000000000000000 I2C4_MspInit
     /tmp/ccR5kwXz.s:892    .text.I2C_GetTiming:0000000000000000 I2C_GetTiming
     /tmp/ccR5kwXz.s:279    .text.MX_I2C4_Init:0000000000000000 MX_I2C4_Init
     /tmp/ccR5kwXz.s:189    .text.BSP_I2C4_Init:0000000000000080 $d
     /tmp/ccR5kwXz.s:198    .text.BSP_I2C4_DeInit:0000000000000000 $t
     /tmp/ccR5kwXz.s:205    .text.BSP_I2C4_DeInit:0000000000000000 BSP_I2C4_DeInit
     /tmp/ccR5kwXz.s:1926   .text.I2C4_MspDeInit:0000000000000000 I2C4_MspDeInit
     /tmp/ccR5kwXz.s:266    .text.BSP_I2C4_DeInit:0000000000000040 $d
     /tmp/ccR5kwXz.s:272    .text.MX_I2C4_Init:0000000000000000 $t
     /tmp/ccR5kwXz.s:391    .text.BSP_I2C4_WriteReg:0000000000000000 $t
     /tmp/ccR5kwXz.s:398    .text.BSP_I2C4_WriteReg:0000000000000000 BSP_I2C4_WriteReg
     /tmp/ccR5kwXz.s:1991   .text.I2C4_WriteReg:0000000000000000 I2C4_WriteReg
     /tmp/ccR5kwXz.s:482    .text.BSP_I2C4_WriteReg:0000000000000070 $d
     /tmp/ccR5kwXz.s:488    .text.BSP_I2C4_ReadReg:0000000000000000 $t
     /tmp/ccR5kwXz.s:495    .text.BSP_I2C4_ReadReg:0000000000000000 BSP_I2C4_ReadReg
     /tmp/ccR5kwXz.s:2063   .text.I2C4_ReadReg:0000000000000000 I2C4_ReadReg
     /tmp/ccR5kwXz.s:579    .text.BSP_I2C4_ReadReg:0000000000000070 $d
     /tmp/ccR5kwXz.s:585    .text.BSP_I2C4_WriteReg16:0000000000000000 $t
     /tmp/ccR5kwXz.s:592    .text.BSP_I2C4_WriteReg16:0000000000000000 BSP_I2C4_WriteReg16
     /tmp/ccR5kwXz.s:676    .text.BSP_I2C4_WriteReg16:0000000000000070 $d
     /tmp/ccR5kwXz.s:682    .text.BSP_I2C4_ReadReg16:0000000000000000 $t
     /tmp/ccR5kwXz.s:689    .text.BSP_I2C4_ReadReg16:0000000000000000 BSP_I2C4_ReadReg16
     /tmp/ccR5kwXz.s:773    .text.BSP_I2C4_ReadReg16:0000000000000070 $d
     /tmp/ccR5kwXz.s:779    .text.BSP_I2C4_IsReady:0000000000000000 $t
     /tmp/ccR5kwXz.s:786    .text.BSP_I2C4_IsReady:0000000000000000 BSP_I2C4_IsReady
     /tmp/ccR5kwXz.s:849    .text.BSP_I2C4_IsReady:000000000000004c $d
     /tmp/ccR5kwXz.s:855    .text.BSP_GetTick:0000000000000000 $t
     /tmp/ccR5kwXz.s:862    .text.BSP_GetTick:0000000000000000 BSP_GetTick
     /tmp/ccR5kwXz.s:886    .text.I2C_GetTiming:0000000000000000 $t
     /tmp/ccR5kwXz.s:1080   .text.I2C_Compute_PRESC_SCLDEL_SDADEL:0000000000000000 I2C_Compute_PRESC_SCLDEL_SDADEL
     /tmp/ccR5kwXz.s:1425   .text.I2C_Compute_SCLL_SCLH:0000000000000000 I2C_Compute_SCLL_SCLH
     /tmp/ccR5kwXz.s:1068   .text.I2C_GetTiming:00000000000000f8 $d
     /tmp/ccR5kwXz.s:1074   .text.I2C_Compute_PRESC_SCLDEL_SDADEL:0000000000000000 $t
     /tmp/ccR5kwXz.s:1411   .text.I2C_Compute_PRESC_SCLDEL_SDADEL:00000000000001cc $d
     /tmp/ccR5kwXz.s:1419   .text.I2C_Compute_SCLL_SCLH:0000000000000000 $t
     /tmp/ccR5kwXz.s:1778   .text.I2C_Compute_SCLL_SCLH:0000000000000200 $d
     /tmp/ccR5kwXz.s:1786   .text.I2C4_MspInit:0000000000000000 $t
     /tmp/ccR5kwXz.s:1914   .text.I2C4_MspInit:00000000000000d0 $d
     /tmp/ccR5kwXz.s:1920   .text.I2C4_MspDeInit:0000000000000000 $t
     /tmp/ccR5kwXz.s:1979   .text.I2C4_MspDeInit:0000000000000040 $d
     /tmp/ccR5kwXz.s:1985   .text.I2C4_WriteReg:0000000000000000 $t
     /tmp/ccR5kwXz.s:2052   .text.I2C4_WriteReg:0000000000000048 $d
ARM GAS  /tmp/ccR5kwXz.s 			page 55


     /tmp/ccR5kwXz.s:2057   .text.I2C4_ReadReg:0000000000000000 $t
     /tmp/ccR5kwXz.s:2124   .text.I2C4_ReadReg:0000000000000048 $d

UNDEFINED SYMBOLS
HAL_I2C_GetState
osSemaphoreCreate
HAL_RCC_GetPCLK2Freq
HAL_I2C_DeInit
HAL_I2C_Init
HAL_I2CEx_ConfigAnalogFilter
HAL_I2CEx_ConfigDigitalFilter
osSemaphoreWait
HAL_I2C_GetError
osSemaphoreRelease
HAL_I2C_IsDeviceReady
HAL_GetTick
HAL_GPIO_Init
HAL_GPIO_DeInit
HAL_I2C_Mem_Write
HAL_I2C_Mem_Read
